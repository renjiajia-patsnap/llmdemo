2025-02-26 14:15:52,788 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 14:16:01,078 - utils.logger - INFO - Analyzed User Intent: content='{\n  "intent": "查询最近更新的专利延期记录，条件为延长类型为PTE，并返回专利ID、延长类型和关联药物ID。",\n  "tables": ["ads_phs_patent_extension"]\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 894, 'prompt_tokens': 1307, 'total_tokens': 2201, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 832, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-f7682b3c-eb52-4d12-abad-3ba18128a408-0' usage_metadata={'input_tokens': 1307, 'output_tokens': 894, 'total_tokens': 2201, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 832}}
2025-02-26 14:16:01,088 - utils.logger - ERROR - Error during query execution: unhashable type: 'dict'
2025-02-26 14:16:59,075 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 14:17:04,676 - utils.logger - INFO - Analyzed User Intent: content='{\n  "intent": "查询最近更新的专利延期数据，其中专利延期类型为PTE，返回专利ID、延期类型及关联药物ID",\n  "tables": ["ads_phs_patent_extension"]\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 828, 'prompt_tokens': 1307, 'total_tokens': 2135, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-a0917cd7-4118-48ed-9dd5-affe25f040de-0' usage_metadata={'input_tokens': 1307, 'output_tokens': 828, 'total_tokens': 2135, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-02-26 14:21:37,311 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 14:21:42,117 - utils.logger - INFO - Analyzed User Intent: content='{\n  "intent": "查询专利延期业务数据：筛选出最近更新且延长类型为PTE的专利记录，并返回专利ID、延长类型及关联药物ID",\n  "tables": ["ads_phs_patent_extension"]\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 388, 'prompt_tokens': 1307, 'total_tokens': 1695, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-2f73ca92-4e0b-4f25-9c1c-43d175a42d9a-0' usage_metadata={'input_tokens': 1307, 'output_tokens': 388, 'total_tokens': 1695, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-02-26 14:21:50,426 - utils.logger - ERROR - Error during query execution: 1 validation error for generate_sql
input
  Field required [type=missing, input_value={'intent': '查询专利...型及关联药物ID'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-02-26 14:25:12,588 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 14:25:20,117 - utils.logger - INFO - Analyzed User Intent: content='{\n  "intent": "查询最近更新的专利延长记录，筛选条件为延长类型为PTE，并返回专利ID、延长类型和关联药物ID",\n  "tables": ["ads_phs_patent_extension"]\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1153, 'prompt_tokens': 1307, 'total_tokens': 2460, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 1088, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-5e5bec00-941d-4d34-b18a-ff7129ab83e5-0' usage_metadata={'input_tokens': 1307, 'output_tokens': 1153, 'total_tokens': 2460, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 1088}}
2025-02-26 14:25:37,938 - utils.logger - ERROR - Error during query execution: 1 validation error for generate_sql
input
  Field required [type=missing, input_value={'intent': '查询最近...型及关联药物ID'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-02-26 14:29:53,784 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 14:30:00,422 - utils.logger - INFO - Analyzed User Intent: content='{\n  "intent": "查询最近更新的且延长类型为PTE的专利数据，返回专利ID、延长类型和关联药物ID",\n  "tables": ["ads_phs_patent_extension"]\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 764, 'prompt_tokens': 1307, 'total_tokens': 2071, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-de60f1ca-21c1-42a5-bcbe-af908c1c5ed1-0' usage_metadata={'input_tokens': 1307, 'output_tokens': 764, 'total_tokens': 2071, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-02-26 14:30:00,435 - utils.logger - ERROR - Error during query execution: 1 validation error for generate_sql
input
  Field required [type=missing, input_value={'intent': '查询最近...型及关联药物ID'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-02-26 15:44:58,563 - utils.logger - INFO - Found similar question: 帮我找几条最近更新的专利延长类型是PTE的数据，发挥专利ID，延长类型及关联药物ID
2025-02-26 15:50:03,430 - utils.logger - ERROR - 更新QA对失败: DataFrame index must be unique for orient='index'.
2025-02-26 15:59:42,387 - utils.logger - ERROR - Workflow execution failed: 'question'
2025-02-26 16:03:22,495 - utils.logger - INFO - Generated SQL Response: content="SELECT\n  patent_id,\n  extension_type,\n  drug_id\nFROM\n  ads_phs_patent_extension\nWHERE\n  extension_type = 'PTE'\nORDER BY\n  updated_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 441, 'prompt_tokens': 1400, 'total_tokens': 1841, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-0d7a399b-7d35-42bd-982f-4b3e71264cae-0' usage_metadata={'input_tokens': 1400, 'output_tokens': 441, 'total_tokens': 1841, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-02-26 16:03:29,215 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 16:08:04,353 - utils.logger - INFO - Generated SQL Response: content="SELECT patent_id, extension_type, drug_id\nFROM ads_phs_patent_extension\nWHERE extension_type = 'PTE'\nORDER BY updated_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 367, 'prompt_tokens': 1399, 'total_tokens': 1766, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-c804de59-167f-4403-972f-14b7faf72401-0' usage_metadata={'input_tokens': 1399, 'output_tokens': 367, 'total_tokens': 1766, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-02-26 16:08:09,352 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 16:14:27,366 - utils.logger - INFO - Generated SQL Response: content="SELECT patent_id, extension_type, drug_id\nFROM ads_phs_patent_extension\nWHERE extension_type = 'PTE'\nORDER BY updated_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 495, 'prompt_tokens': 1399, 'total_tokens': 1894, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-a5e451d8-8884-41dc-8bc5-16cc430ec675-0' usage_metadata={'input_tokens': 1399, 'output_tokens': 495, 'total_tokens': 1894, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-02-26 16:34:10,823 - utils.logger - INFO - Generated SQL Response: content="SELECT \n  patent_id, \n  extension_type, \n  drug_id\nFROM \n  ads_phs_patent_extension\nWHERE \n  extension_type = 'PTE'\nORDER BY \n  updated_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 315, 'prompt_tokens': 1404, 'total_tokens': 1719, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-61569738-5910-4be3-8e95-3b18911d499c-0' usage_metadata={'input_tokens': 1404, 'output_tokens': 315, 'total_tokens': 1719, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-02-26 16:34:10,826 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 16:35:02,330 - utils.logger - INFO - JSON解析失败: Expecting ',' delimiter: line 2 column 36 (char 37)
2025-02-26 16:35:02,331 - utils.logger - INFO - 原始内容: {
  "intent": "获取最近更新的专利延期记录，其中延长类型为"PTE"，并返回专利ID、延长类型以及关联的药物ID。",
  "tables": ["ads_phs_patent_extension"]
}
2025-02-26 16:35:02,333 - utils.logger - ERROR - Workflow execution failed: 'sql'
2025-02-26 16:37:57,100 - utils.logger - INFO - Generated SQL Response: content="SELECT \n  patent_id, \n  extension_type, \n  drug_id \nFROM \n  ads_phs_patent_extension \nWHERE \n  extension_type = 'PTE' \nORDER BY \n  updated_ts DESC \nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 572, 'prompt_tokens': 1401, 'total_tokens': 1973, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-9e88c50d-2fec-4094-b2d7-15b7373cb8ce-0' usage_metadata={'input_tokens': 1401, 'output_tokens': 572, 'total_tokens': 1973, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-02-26 16:39:29,597 - utils.logger - INFO - Generated SQL Response: content="SELECT \n  patent_id, \n  extension_type, \n  drug_id\nFROM ads_phs_patent_extension\nWHERE extension_type = 'PTE'\nORDER BY updated_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 629, 'prompt_tokens': 1400, 'total_tokens': 2029, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-668a25d3-0292-4641-91f0-f1cbb753b925-0' usage_metadata={'input_tokens': 1400, 'output_tokens': 629, 'total_tokens': 2029, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-02-26 16:39:36,135 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 16:50:06,128 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:50:06,129 - utils.logger - INFO - find_similar_question input: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 16:50:06,131 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'answer': ''}}
2025-02-26 16:50:06,133 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:50:06,134 - utils.logger - INFO - analyze_user_intent input: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 16:50:12,928 - utils.logger - INFO - Analyzed user intent: {'intent': '查询最近更新的专利延期数据，筛选延长类型为PTE，并返回数据中所包含的专利ID、延期类型以及与之关联的药物ID', 'tables': ['ads_phs_patent_extension', 'ads_phs_patent_entity_rel'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 16:50:12,929 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:50:12,930 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:50:12,931 - utils.logger - INFO - generate_sql input: {'intent': '查询最近更新的专利延期数据，筛选延长类型为PTE，并返回数据中所包含的专利ID、延期类型以及与之关联的药物ID', 'tables': ['ads_phs_patent_extension', 'ads_phs_patent_entity_rel'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 16:50:13,706 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 16:51:53,783 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:51:53,784 - utils.logger - INFO - find_similar_question input: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 16:51:53,786 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'answer': ''}}
2025-02-26 16:51:53,787 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:51:53,789 - utils.logger - INFO - analyze_user_intent input: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 16:52:00,402 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延期数据，要求返回最近更新的且专利延长类型为PTE的记录，包括专利ID、延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 16:52:00,402 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:52:00,405 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:52:00,405 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延期数据，要求返回最近更新的且专利延长类型为PTE的记录，包括专利ID、延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 16:53:11,656 - utils.logger - INFO - Generated SQL Response: content="SELECT patent_id, extension_type, drug_id\nFROM ads_phs_patent_extension\nWHERE extension_type = 'PTE'\nORDER BY updated_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 431, 'prompt_tokens': 1402, 'total_tokens': 1833, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-ec42a508-7ef0-4357-af66-f9c47174f2d4-0' usage_metadata={'input_tokens': 1402, 'output_tokens': 431, 'total_tokens': 1833, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-02-26 16:53:46,413 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension WHERE extension_type = 'PTE' ORDER BY updated_ts DESC LIMIT 5"}
2025-02-26 16:53:47,703 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:54:02,413 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:54:03,035 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension WHERE extension_type = 'PTE' ORDER BY updated_ts DESC LIMIT 5"}
2025-02-26 16:54:55,728 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension WHERE extension_type = 'PTE' ORDER BY updated_ts DESC LIMIT 5", 'query_result': [{'patent_id': '482962b7-fb58-4351-b938-8d13b3b0799c', 'extension_type': 'PTE'}, {'patent_id': '195787bc-db10-44f0-9f52-c156c902faab', 'extension_type': 'PTE'}, {'patent_id': '31d0837a-7fe6-4e8e-841a-54c6888910da', 'extension_type': 'PTE'}, {'patent_id': '0916d453-085d-44bf-ba77-772ad6796f95', 'extension_type': 'PTE'}, {'patent_id': '70003a4e-7b49-40f9-84e9-3e70d64face4', 'extension_type': 'PTE'}]}
2025-02-26 16:55:07,555 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:55:12,287 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 16:55:13,149 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension WHERE extension_type = 'PTE' ORDER BY updated_ts DESC LIMIT 5", 'query_result': [{'patent_id': '482962b7-fb58-4351-b938-8d13b3b0799c', 'extension_type': 'PTE'}, {'patent_id': '195787bc-db10-44f0-9f52-c156c902faab', 'extension_type': 'PTE'}, {'patent_id': '31d0837a-7fe6-4e8e-841a-54c6888910da', 'extension_type': 'PTE'}, {'patent_id': '0916d453-085d-44bf-ba77-772ad6796f95', 'extension_type': 'PTE'}, {'patent_id': '70003a4e-7b49-40f9-84e9-3e70d64face4', 'extension_type': 'PTE'}]}
2025-02-26 16:57:19,987 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension WHERE extension_type = 'PTE' ORDER BY updated_ts DESC LIMIT 5", 'answer': '下面是整理后的查询结果，每行显示一个专利的ID及其扩展类型：\n\n1. 专利ID: 482962b7-fb58-4351-b938-8d13b3b0799c  \n   扩展类型: PTE\n\n2. 专利ID: 195787bc-db10-44f0-9f52-c156c902faab  \n   扩展类型: PTE\n\n3. 专利ID: 31d0837a-7fe6-4e8e-841a-54c6888910da  \n   扩展类型: PTE\n\n4. 专利ID: 0916d453-085d-44bf-ba77-772ad6796f95  \n   扩展类型: PTE\n\n5. 专利ID: 70003a4e-7b49-40f9-84e9-3e70d64face4  \n   扩展类型: PTE'}
2025-02-26 16:57:21,906 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:05:13,918 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:05:13,919 - utils.logger - INFO - find_similar_question input: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 17:05:13,921 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 17:06:09,719 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:09,720 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 17:06:20,902 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'answer': ''}}
2025-02-26 17:06:20,905 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:20,906 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'answer': ''}
2025-02-26 17:06:37,108 - utils.logger - INFO - Analyzed user intent: {'intent': '查询最近更新的专利延期记录，筛选出延长类型为PTE的记录，并返回专利ID、延长类型和关联药物ID', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 17:06:37,109 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:37,111 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:37,111 - utils.logger - INFO - generate_sql input: {'intent': '查询最近更新的专利延期记录，筛选出延长类型为PTE的记录，并返回专利ID、延长类型和关联药物ID', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 17:06:42,167 - utils.logger - INFO - Generated SQL Response: content="SELECT \n  patent_id, \n  extension_type, \n  drug_id \nFROM ads_phs_patent_extension \nWHERE extension_type = 'PTE' \nORDER BY updated_ts DESC \nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 310, 'prompt_tokens': 1401, 'total_tokens': 1711, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-88a5db43-2b1c-4fd6-8cf9-c232dc6ef7b1-0' usage_metadata={'input_tokens': 1401, 'output_tokens': 310, 'total_tokens': 1711, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-02-26 17:06:42,168 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT    patent_id,    extension_type,    drug_id  FROM ads_phs_patent_extension  WHERE extension_type = 'PTE'  ORDER BY updated_ts DESC  LIMIT 5"}
2025-02-26 17:06:42,169 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:42,171 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:42,172 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT    patent_id,    extension_type,    drug_id  FROM ads_phs_patent_extension  WHERE extension_type = 'PTE'  ORDER BY updated_ts DESC  LIMIT 5"}
2025-02-26 17:06:42,875 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT    patent_id,    extension_type,    drug_id  FROM ads_phs_patent_extension  WHERE extension_type = 'PTE'  ORDER BY updated_ts DESC  LIMIT 5", 'query_result': [{'patent_id': '482962b7-fb58-4351-b938-8d13b3b0799c', 'extension_type': 'PTE'}, {'patent_id': '195787bc-db10-44f0-9f52-c156c902faab', 'extension_type': 'PTE'}, {'patent_id': '31d0837a-7fe6-4e8e-841a-54c6888910da', 'extension_type': 'PTE'}, {'patent_id': '0916d453-085d-44bf-ba77-772ad6796f95', 'extension_type': 'PTE'}, {'patent_id': '70003a4e-7b49-40f9-84e9-3e70d64face4', 'extension_type': 'PTE'}]}
2025-02-26 17:06:42,876 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:42,878 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:42,879 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT    patent_id,    extension_type,    drug_id  FROM ads_phs_patent_extension  WHERE extension_type = 'PTE'  ORDER BY updated_ts DESC  LIMIT 5", 'query_result': [{'patent_id': '482962b7-fb58-4351-b938-8d13b3b0799c', 'extension_type': 'PTE'}, {'patent_id': '195787bc-db10-44f0-9f52-c156c902faab', 'extension_type': 'PTE'}, {'patent_id': '31d0837a-7fe6-4e8e-841a-54c6888910da', 'extension_type': 'PTE'}, {'patent_id': '0916d453-085d-44bf-ba77-772ad6796f95', 'extension_type': 'PTE'}, {'patent_id': '70003a4e-7b49-40f9-84e9-3e70d64face4', 'extension_type': 'PTE'}]}
2025-02-26 17:06:48,511 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT    patent_id,    extension_type,    drug_id  FROM ads_phs_patent_extension  WHERE extension_type = 'PTE'  ORDER BY updated_ts DESC  LIMIT 5", 'answer': '以下是整理后的查询结果：\n\n1. 专利ID: 482962b7-fb58-4351-b938-8d13b3b0799c  \n   扩展类型: PTE\n\n2. 专利ID: 195787bc-db10-44f0-9f52-c156c902faab  \n   扩展类型: PTE\n\n3. 专利ID: 31d0837a-7fe6-4e8e-841a-54c6888910da  \n   扩展类型: PTE\n\n4. 专利ID: 0916d453-085d-44bf-ba77-772ad6796f95  \n   扩展类型: PTE\n\n5. 专利ID: 70003a4e-7b49-40f9-84e9-3e70d64face4  \n   扩展类型: PTE'}
2025-02-26 17:06:48,512 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:06:48,896 - utils.logger - INFO - 更新QA对: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 17:11:12,831 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 17:11:12,832 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 17:11:15,384 - utils.logger - INFO - Found similar question: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 17:11:15,385 - utils.logger - INFO - Similarity score: 0.0
2025-02-26 17:11:15,386 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 17:11:15,387 - utils.logger - INFO - Route after similar question: {'result': {'sql': "SELECT    patent_id,    extension_type,    drug_id  FROM ads_phs_patent_extension  WHERE extension_type = 'PTE'  ORDER BY updated_ts DESC  LIMIT 5", 'answer': '以下是整理后的查询结果：\n\n1. 专利ID: 482962b7-fb58-4351-b938-8d13b3b0799c  \n   扩展类型: PTE\n\n2. 专利ID: 195787bc-db10-44f0-9f52-c156c902faab  \n   扩展类型: PTE\n\n3. 专利ID: 31d0837a-7fe6-4e8e-841a-54c6888910da  \n   扩展类型: PTE\n\n4. 专利ID: 0916d453-085d-44bf-ba77-772ad6796f95  \n   扩展类型: PTE\n\n5. 专利ID: 70003a4e-7b49-40f9-84e9-3e70d64face4  \n   扩展类型: PTE', 'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}}
2025-02-26 17:11:15,411 - utils.logger - INFO - 更新QA对: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 18:43:55,073 - utils.logger - ERROR - 加载QA对失败: "None of ['question'] are in the columns"
2025-02-26 18:43:55,095 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 18:43:55,096 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 18:43:55,097 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'answer': ''}}
2025-02-26 18:43:55,098 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:43:55,099 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'answer': ''}
2025-02-26 18:44:06,912 - utils.logger - INFO - Analyzed user intent: {'intent': '查询最近更新的专利延期记录，这些记录中专利的延期类型为PTE，要求返回字段包括专利ID、延长类型及其关联的药物ID。', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 18:44:06,912 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:44:06,913 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:44:06,914 - utils.logger - INFO - generate_sql input: {'intent': '查询最近更新的专利延期记录，这些记录中专利的延期类型为PTE，要求返回字段包括专利ID、延长类型及其关联的药物ID。', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID'}
2025-02-26 18:44:12,706 - utils.logger - INFO - Generated SQL Response: content="SELECT patent_id, extension_type, drug_id\nFROM ads_phs_patent_extension \nWHERE extension_type = 'PTE'\nORDER BY updated_ts DESC \nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 431, 'prompt_tokens': 1406, 'total_tokens': 1837, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-c508277f-9bfa-4f75-be5e-de3b9008decc-0' usage_metadata={'input_tokens': 1406, 'output_tokens': 431, 'total_tokens': 1837, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-02-26 18:44:12,710 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension  WHERE extension_type = 'PTE' ORDER BY updated_ts DESC  LIMIT 5"}
2025-02-26 18:44:12,711 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:44:12,713 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:44:12,713 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension  WHERE extension_type = 'PTE' ORDER BY updated_ts DESC  LIMIT 5"}
2025-02-26 18:44:13,430 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension  WHERE extension_type = 'PTE' ORDER BY updated_ts DESC  LIMIT 5", 'query_result': [{'patent_id': '482962b7-fb58-4351-b938-8d13b3b0799c', 'extension_type': 'PTE'}, {'patent_id': '195787bc-db10-44f0-9f52-c156c902faab', 'extension_type': 'PTE'}, {'patent_id': '31d0837a-7fe6-4e8e-841a-54c6888910da', 'extension_type': 'PTE'}, {'patent_id': '0916d453-085d-44bf-ba77-772ad6796f95', 'extension_type': 'PTE'}, {'patent_id': '70003a4e-7b49-40f9-84e9-3e70d64face4', 'extension_type': 'PTE'}]}
2025-02-26 18:44:13,431 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:44:13,433 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:44:13,434 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension  WHERE extension_type = 'PTE' ORDER BY updated_ts DESC  LIMIT 5", 'query_result': [{'patent_id': '482962b7-fb58-4351-b938-8d13b3b0799c', 'extension_type': 'PTE'}, {'patent_id': '195787bc-db10-44f0-9f52-c156c902faab', 'extension_type': 'PTE'}, {'patent_id': '31d0837a-7fe6-4e8e-841a-54c6888910da', 'extension_type': 'PTE'}, {'patent_id': '0916d453-085d-44bf-ba77-772ad6796f95', 'extension_type': 'PTE'}, {'patent_id': '70003a4e-7b49-40f9-84e9-3e70d64face4', 'extension_type': 'PTE'}]}
2025-02-26 18:44:23,104 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID', 'sql': "SELECT patent_id, extension_type, drug_id FROM ads_phs_patent_extension  WHERE extension_type = 'PTE' ORDER BY updated_ts DESC  LIMIT 5", 'answer': '下面是整理后的数据库查询结果，采用了表格形式展示每条数据的信息：\n\n-------------------------------------------------\n|               Patent ID                 | Extension Type |\n-------------------------------------------------\n| 482962b7-fb58-4351-b938-8d13b3b0799c      | PTE            |\n| 195787bc-db10-44f0-9f52-c156c902faab      | PTE            |\n| 31d0837a-7fe6-4e8e-841a-54c6888910da      | PTE            |\n| 0916d453-085d-44bf-ba77-772ad6796f95      | PTE            |\n| 70003a4e-7b49-40f9-84e9-3e70d64face4      | PTE            |\n-------------------------------------------------\n\n这样可以方便查看每条记录的专利ID及其对应的扩展类型。'}
2025-02-26 18:44:23,105 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 18:44:23,153 - utils.logger - INFO - 更新QA对: 帮我找几条最近更新的专利延长类型是PTE的数据，返回专利ID，延长类型及关联药物ID
2025-02-26 19:04:05,371 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:04:05,372 - utils.logger - INFO - find_similar_question input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:04:07,100 - utils.logger - INFO - No similar question found
2025-02-26 19:04:07,101 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:07,102 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}}
2025-02-26 19:04:07,103 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:07,104 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}
2025-02-26 19:04:36,703 - utils.logger - INFO - Analyzed user intent: {'intent': '用户希望查询药物信息，找到三条拥有较多通用名的药物记录，并返回这些药物的ID、名称以及对应的通用名。', 'tables': ['ads_phs_drug'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:04:36,703 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:36,705 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:36,705 - utils.logger - INFO - generate_sql input: {'intent': '用户希望查询药物信息，找到三条拥有较多通用名的药物记录，并返回这些药物的ID、名称以及对应的通用名。', 'tables': ['ads_phs_drug'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:04:45,014 - utils.logger - INFO - Generated SQL Response: content="SELECT drug_id, drug_name, generic_name\nFROM ads_phs_drug\nWHERE data_status = 'ACTIVE' AND generic_name IS NOT NULL\nORDER BY JSON_LENGTH(generic_name) DESC\nLIMIT 3;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 568, 'prompt_tokens': 7921, 'total_tokens': 8489, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-e5820842-91fa-4b56-a817-ba646d0f5e42-0' usage_metadata={'input_tokens': 7921, 'output_tokens': 568, 'total_tokens': 8489, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-02-26 19:04:45,016 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'tables': ['ads_phs_drug'], 'sql': "SELECT drug_id, drug_name, generic_name FROM ads_phs_drug WHERE data_status = 'ACTIVE' AND generic_name IS NOT NULL ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3"}
2025-02-26 19:04:45,017 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:45,019 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:45,021 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'tables': ['ads_phs_drug'], 'sql': "SELECT drug_id, drug_name, generic_name FROM ads_phs_drug WHERE data_status = 'ACTIVE' AND generic_name IS NOT NULL ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3"}
2025-02-26 19:04:45,931 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': "SELECT drug_id, drug_name, generic_name FROM ads_phs_drug WHERE data_status = 'ACTIVE' AND generic_name IS NOT NULL ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3", 'query_result': [{'drug_name': '[{"lang": "CN", "name": "复必泰", "source_info": [{"normalized_source_id": "cf0e26a9d83243f2a3855089fd5c4870", "source": "Company pipeline", "source_url": "https://yimiao.fosunpharma.com/news/detail/3?up=index"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Comirnaty-COVID-19 mRNA vaccine", "source_info": [{"normalized_source_id": "6ede8d4125e04e5f89f14e1cc3428f82", "source": "WEB", "source_url": "https://www.yalemedicine.org/news/covid-19-vaccine-comparison"}], "status": "ACTIVE"}, {"lang": "JP", "name": "トジナメラン", "source_info": [{"code": "30400AMX00015", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "d854805e8228850d402dd22ae84e3244", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11"}], "status": "ACTIVE"}]', 'drug_id': '19a9ef8ac9a741b0af4248b32326034a', 'generic_name': '[{"lang": "EN", "name": "COMIRNATY Original/Omicron", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Famtozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Riltozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "贝舒地尔", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil Mesilate", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02"}], "status": "ACTIVE"}, {"lang": "JP", "name": "ベルモスジルメシル酸塩", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision"}], "status": "ACTIVE"}]', 'drug_id': '0826acdaa31c473480a705191150f6f5', 'generic_name': '[{"lang": "EN", "name": "Belumosudil", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "10.1002/cpdd.1082", "normalized_source_id": "3a35cdb7-0f33-4417-a43d-5456963ef5a1", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Clin Pharmacol Drug Dev", "source_url": "http://dx.doi.org/10.1002/cpdd.1082"}, {"code": "35230741", "normalized_source_id": "e7f29b256e9c46c19d4acbc643430038", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Pubmed", "source_url": "https://pubmed.ncbi.nlm.nih.gov/35230741/"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil (USAN)", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}, {"lang": "EN", "name": "RHOLISTIQ", "source_info": [{"normalized_source_id": "d960dac41dfe49609b6b380987cae0d9", "source": "TGA", "source_url": "https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "盐酸普鲁卡因", "source_info": [{"normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Procaine Hydrochloride", "source_info": [{"normalized_source_id": "713ce6480d33457e84ba18159638cafb", "source": "FDA_CDER"}, {"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカイン塩酸塩", "source_info": [{"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'drug_id': '39140fe8d67b4bc0a1ccc0dff48a4586', 'generic_name': '[{"lang": "EN", "name": "Procanine", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "procaine", "source_info": [{"code": "4Z8Y51M438", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカニン", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]'}]}
2025-02-26 19:04:45,935 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:45,936 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:04:45,936 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': "SELECT drug_id, drug_name, generic_name FROM ads_phs_drug WHERE data_status = 'ACTIVE' AND generic_name IS NOT NULL ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3", 'query_result': [{'drug_name': '[{"lang": "CN", "name": "复必泰", "source_info": [{"normalized_source_id": "cf0e26a9d83243f2a3855089fd5c4870", "source": "Company pipeline", "source_url": "https://yimiao.fosunpharma.com/news/detail/3?up=index"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Comirnaty-COVID-19 mRNA vaccine", "source_info": [{"normalized_source_id": "6ede8d4125e04e5f89f14e1cc3428f82", "source": "WEB", "source_url": "https://www.yalemedicine.org/news/covid-19-vaccine-comparison"}], "status": "ACTIVE"}, {"lang": "JP", "name": "トジナメラン", "source_info": [{"code": "30400AMX00015", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "d854805e8228850d402dd22ae84e3244", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11"}], "status": "ACTIVE"}]', 'drug_id': '19a9ef8ac9a741b0af4248b32326034a', 'generic_name': '[{"lang": "EN", "name": "COMIRNATY Original/Omicron", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Famtozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Riltozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "贝舒地尔", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil Mesilate", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02"}], "status": "ACTIVE"}, {"lang": "JP", "name": "ベルモスジルメシル酸塩", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision"}], "status": "ACTIVE"}]', 'drug_id': '0826acdaa31c473480a705191150f6f5', 'generic_name': '[{"lang": "EN", "name": "Belumosudil", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "10.1002/cpdd.1082", "normalized_source_id": "3a35cdb7-0f33-4417-a43d-5456963ef5a1", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Clin Pharmacol Drug Dev", "source_url": "http://dx.doi.org/10.1002/cpdd.1082"}, {"code": "35230741", "normalized_source_id": "e7f29b256e9c46c19d4acbc643430038", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Pubmed", "source_url": "https://pubmed.ncbi.nlm.nih.gov/35230741/"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil (USAN)", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}, {"lang": "EN", "name": "RHOLISTIQ", "source_info": [{"normalized_source_id": "d960dac41dfe49609b6b380987cae0d9", "source": "TGA", "source_url": "https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "盐酸普鲁卡因", "source_info": [{"normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Procaine Hydrochloride", "source_info": [{"normalized_source_id": "713ce6480d33457e84ba18159638cafb", "source": "FDA_CDER"}, {"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカイン塩酸塩", "source_info": [{"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'drug_id': '39140fe8d67b4bc0a1ccc0dff48a4586', 'generic_name': '[{"lang": "EN", "name": "Procanine", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "procaine", "source_info": [{"code": "4Z8Y51M438", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカニン", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]'}]}
2025-02-26 19:05:07,942 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': "SELECT drug_id, drug_name, generic_name FROM ads_phs_drug WHERE data_status = 'ACTIVE' AND generic_name IS NOT NULL ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3", 'answer': '下面按照记录依次整理出每个药物的详细信息，包括药品ID、各语言药品名称及对应通用名称。每个名称项中均给出状态、来源以及链接信息（若有）。\n\n──────────────────────────────\n【记录 1】\n药品ID：19a9ef8ac9a741b0af4248b32326034a\n\n一、药品名称：\n1. 语言：CN  \n   名称：复必泰  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：Company pipeline  \n\u2003\u2003– 链接：https://yimiao.fosunpharma.com/news/detail/3?up=index\n\n2. 语言：EN  \n   名称：Comirnaty-COVID-19 mRNA vaccine  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：WEB  \n\u2003\u2003– 链接：https://www.yalemedicine.org/news/covid-19-vaccine-comparison\n\n3. 语言：JP  \n   名称：トジナメラン  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：PMDA  \n\u2003\u2003– 链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11\n\n二、通用名称：\n1. 语言：EN  \n   名称：COMIRNATY Original/Omicron  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：WHO  \n\u2003\u2003– 链接：https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n\n2. 语言：EN  \n   名称：COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：WHO  \n\u2003\u2003– 链接：https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n\n3. 语言：EN  \n   名称：COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：WHO  \n\u2003\u2003– 链接：https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n\n4. 语言：EN  \n   名称：Tozinameran/Famtozinameran  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：WHO  \n\u2003\u2003– 链接：https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n\n5. 语言：EN  \n   名称：Tozinameran/Riltozinameran  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：WHO  \n\u2003\u2003– 链接：https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n\n──────────────────────────────\n【记录 2】\n药品ID：0826acdaa31c473480a705191150f6f5\n\n一、药品名称：\n1. 语言：CN  \n   名称：贝舒地尔  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：NEWS  \n\u2003\u2003– 链接：https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html\n\n2. 语言：EN  \n   名称：Belumosudil Mesilate  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：PMDA  \n\u2003\u2003\u2003\u2003代码：30600AMX00126000  \n\u2003\u2003\u2003\u2003patsnap_id：8982588d454de324833e0a82a2255285  \n\u2003\u2003\u2003\u2003链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02\n\n3. 语言：JP  \n   名称：ベルモスジルメシル酸塩  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：PMDA  \n\u2003\u2003\u2003\u2003代码：30600AMX00126000  \n\u2003\u2003\u2003\u2003patsnap_id：8982588d454de324833e0a82a2255285  \n\u2003\u2003\u2003\u2003链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision\n\n二、通用名称：\n1. 语言：EN  \n   名称：Belumosudil  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：KEGG  \n\u2003\u2003– 另有来源：Clin Pharmacol Drug Dev  \n\u2003\u2003\u2003\u2003代码：10.1002/cpdd.1082  \n\u2003\u2003\u2003\u2003链接：http://dx.doi.org/10.1002/cpdd.1082  \n\u2003\u2003– 另有来源：Pubmed  \n\u2003\u2003\u2003\u2003代码：35230741  \n\u2003\u2003\u2003\u2003链接：https://pubmed.ncbi.nlm.nih.gov/35230741/\n\n2. 语言：EN  \n   名称：Belumosudil (USAN)  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：KEGG  \n\u2003\u2003\u2003\u2003代码：D11815\n\n3. 语言：EN  \n   名称：RHOLISTIQ  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：TGA  \n\u2003\u2003\u2003\u2003链接：https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd\n\n──────────────────────────────\n【记录 3】\n药品ID：39140fe8d67b4bc0a1ccc0dff48a4586\n\n一、药品名称：\n1. 语言：CN  \n   名称：盐酸普鲁卡因  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：NMPA\n\n2. 语言：EN  \n   名称：Procaine Hydrochloride  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：FDA_CDER  \n\u2003\u2003– 另一来源：PMDA  \n\u2003\u2003\u2003\u2003代码：22000AMX02403000  \n\u2003\u2003\u2003\u2003patsnap_id：48d849a842e22d02ed98a558255052a9\n\n3. 语言：JP  \n   名称：プロカイン塩酸塩  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：PMDA  \n\u2003\u2003\u2003\u2003代码：22000AMX02403000  \n\u2003\u2003\u2003\u2003patsnap_id：48d849a842e22d02ed98a558255052a9\n\n二、通用名称：\n1. 语言：EN  \n   名称：Procanine  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：PMDA  \n\u2003\u2003\u2003\u2003代码：22000AMX00376  \n\u2003\u2003\u2003\u2003patsnap_id：52233898ed4a85002229ad238922a85d\n\n2. 语言：EN  \n   名称：procaine  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：GSRS  \n\u2003\u2003\u2003\u2003代码：4Z8Y51M438  \n\u2003\u2003\u2003\u2003链接：https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460\n\n3. 语言：JP  \n   名称：プロカニン  \n   状态：ACTIVE  \n   来源信息：  \n\u2003\u2003– 来源：PMDA  \n\u2003\u2003\u2003\u2003代码：22000AMX00376  \n\u2003\u2003\u2003\u2003patsnap_id：52233898ed4a85002229ad238922a85d\n\n──────────────────────────────\n以上即为根据数据库查询结果整理后的易读格式汇总。'}
2025-02-26 19:05:07,950 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:05:07,971 - utils.logger - INFO - 更新QA对: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
2025-02-26 19:06:44,762 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:06:44,762 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:06:44,763 - utils.logger - ERROR - Workflow execution failed: 1 validation error for Document
page_content
  Input should be a valid string [type=string_type, input_value=nan, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-02-26 19:08:16,617 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:08:16,618 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:08:27,300 - utils.logger - ERROR - Workflow execution failed: 1 validation error for Document
page_content
  Input should be a valid string [type=string_type, input_value=nan, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-02-26 19:09:00,639 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:09:00,640 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:11:38,140 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:11:38,141 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:11:40,388 - utils.logger - INFO - No similar question found
2025-02-26 19:11:40,388 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:40,389 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 19:11:40,392 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:40,392 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 19:11:47,774 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延期业务表中申请国家的数量，即统计该表中不同申请国家的种类数', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:11:47,775 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:47,777 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:47,778 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延期业务表中申请国家的数量，即统计该表中不同申请国家的种类数', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:11:54,639 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS distinct_country_count \nFROM ads_phs_patent_extension;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 416, 'prompt_tokens': 1390, 'total_tokens': 1806, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-88a796e6-6e69-4ea9-9f5b-f57c1e09fb67-0' usage_metadata={'input_tokens': 1390, 'output_tokens': 416, 'total_tokens': 1806, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-02-26 19:11:54,641 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count  FROM ads_phs_patent_extension'}
2025-02-26 19:11:54,642 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:54,644 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:54,645 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count  FROM ads_phs_patent_extension'}
2025-02-26 19:11:55,543 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count  FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 19:11:55,544 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:55,545 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:11:55,546 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count  FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 19:12:01,742 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count  FROM ads_phs_patent_extension', 'answer': '查询结果整理如下：\n\n┌─────────────────────┐\n│ 不同国家的数量: 24  │\n└─────────────────────┘'}
2025-02-26 19:12:01,743 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:13:58,045 - utils.logger - INFO - 更新QA对: 帮我查下专利延长表中的的申请国家总共有多少个？
2025-02-26 19:22:47,519 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:22:47,520 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:22:47,521 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 19:22:47,522 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:22:47,523 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 19:22:58,246 - utils.logger - INFO - Analyzed user intent: {'intent': '统计专利延长表中不同申请国家的个数', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:22:58,247 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:22:58,249 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:22:58,250 - utils.logger - INFO - generate_sql input: {'intent': '统计专利延长表中不同申请国家的个数', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:23:59,334 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS distinct_country_count\nFROM ads_phs_patent_extension;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 288, 'prompt_tokens': 1380, 'total_tokens': 1668, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-552fb06f-aab4-44fb-a658-65991e2c11f7-0' usage_metadata={'input_tokens': 1380, 'output_tokens': 288, 'total_tokens': 1668, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-02-26 19:23:59,335 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 19:23:59,335 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:23:59,336 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:23:59,337 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 19:24:00,564 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 19:24:00,566 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:24:00,567 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:24:00,567 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 19:24:04,707 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'answer': '下面是整理后的查询结果，展示了符合用户预期的内容：\n\n┌─────────────────────────┐\n│ 不同国家的总数: 24      │\n└─────────────────────────┘\n\n解释：该查询结果表明，在数据库中共有 24 个不同的国家。'}
2025-02-26 19:24:04,708 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:24:04,942 - utils.logger - INFO - 更新QA对: 帮我查下专利延长表中的的申请国家总共有多少个？
2025-02-26 19:24:35,487 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:24:35,488 - utils.logger - INFO - find_similar_question input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:24:37,236 - utils.logger - INFO - No similar question found
2025-02-26 19:24:37,237 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:24:37,238 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}}
2025-02-26 19:24:37,239 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:24:37,240 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}
2025-02-26 19:25:17,330 - utils.logger - INFO - Analyzed user intent: {'intent': '查找通用名数量较多的药物，返回这三条记录中药物ID、药物名称及其对应的通用名信息', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:25:17,331 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:25:17,332 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:25:17,333 - utils.logger - INFO - generate_sql input: {'intent': '查找通用名数量较多的药物，返回这三条记录中药物ID、药物名称及其对应的通用名信息', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:25:18,408 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 19:30:07,059 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:30:07,060 - utils.logger - INFO - find_similar_question input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:30:09,380 - utils.logger - INFO - No similar question found
2025-02-26 19:30:09,381 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:09,382 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}}
2025-02-26 19:30:09,384 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:09,384 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}
2025-02-26 19:30:26,607 - utils.logger - INFO - Analyzed user intent: {'intent': '查找通用名记录数量较多的药物，返回这三条药物的药物ID、药物名称以及通用名信息', 'tables': ['ads_phs_drug'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:30:26,607 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:26,609 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:26,609 - utils.logger - INFO - generate_sql input: {'intent': '查找通用名记录数量较多的药物，返回这三条药物的药物ID、药物名称以及通用名信息', 'tables': ['ads_phs_drug'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 19:30:45,572 - utils.logger - INFO - Generated SQL Response: content='SELECT drug_id,\n       drug_name,\n       generic_name\nFROM ads_phs_drug\nORDER BY JSON_LENGTH(generic_name) DESC\nLIMIT 3;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 300, 'prompt_tokens': 7918, 'total_tokens': 8218, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-90935a1d-6c05-4c1d-be9e-55d08b2b105a-0' usage_metadata={'input_tokens': 7918, 'output_tokens': 300, 'total_tokens': 8218, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-02-26 19:30:45,573 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'tables': ['ads_phs_drug'], 'sql': 'SELECT drug_id,        drug_name,        generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3'}
2025-02-26 19:30:45,574 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:45,576 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:45,577 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'tables': ['ads_phs_drug'], 'sql': 'SELECT drug_id,        drug_name,        generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3'}
2025-02-26 19:30:46,245 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': 'SELECT drug_id,        drug_name,        generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3', 'query_result': [{'drug_name': '[{"lang": "CN", "name": "复必泰", "source_info": [{"normalized_source_id": "cf0e26a9d83243f2a3855089fd5c4870", "source": "Company pipeline", "source_url": "https://yimiao.fosunpharma.com/news/detail/3?up=index"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Comirnaty-COVID-19 mRNA vaccine", "source_info": [{"normalized_source_id": "6ede8d4125e04e5f89f14e1cc3428f82", "source": "WEB", "source_url": "https://www.yalemedicine.org/news/covid-19-vaccine-comparison"}], "status": "ACTIVE"}, {"lang": "JP", "name": "トジナメラン", "source_info": [{"code": "30400AMX00015", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "d854805e8228850d402dd22ae84e3244", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11"}], "status": "ACTIVE"}]', 'drug_id': '19a9ef8ac9a741b0af4248b32326034a', 'generic_name': '[{"lang": "EN", "name": "COMIRNATY Original/Omicron", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Famtozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Riltozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "贝舒地尔", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil Mesilate", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02"}], "status": "ACTIVE"}, {"lang": "JP", "name": "ベルモスジルメシル酸塩", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision"}], "status": "ACTIVE"}]', 'drug_id': '0826acdaa31c473480a705191150f6f5', 'generic_name': '[{"lang": "EN", "name": "Belumosudil", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "10.1002/cpdd.1082", "normalized_source_id": "3a35cdb7-0f33-4417-a43d-5456963ef5a1", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Clin Pharmacol Drug Dev", "source_url": "http://dx.doi.org/10.1002/cpdd.1082"}, {"code": "35230741", "normalized_source_id": "e7f29b256e9c46c19d4acbc643430038", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Pubmed", "source_url": "https://pubmed.ncbi.nlm.nih.gov/35230741/"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil (USAN)", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}, {"lang": "EN", "name": "RHOLISTIQ", "source_info": [{"normalized_source_id": "d960dac41dfe49609b6b380987cae0d9", "source": "TGA", "source_url": "https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "盐酸普鲁卡因", "source_info": [{"normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Procaine Hydrochloride", "source_info": [{"normalized_source_id": "713ce6480d33457e84ba18159638cafb", "source": "FDA_CDER"}, {"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカイン塩酸塩", "source_info": [{"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'drug_id': '39140fe8d67b4bc0a1ccc0dff48a4586', 'generic_name': '[{"lang": "EN", "name": "Procanine", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "procaine", "source_info": [{"code": "4Z8Y51M438", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカニン", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]'}]}
2025-02-26 19:30:46,246 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:46,248 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:30:46,248 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': 'SELECT drug_id,        drug_name,        generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3', 'query_result': [{'drug_name': '[{"lang": "CN", "name": "复必泰", "source_info": [{"normalized_source_id": "cf0e26a9d83243f2a3855089fd5c4870", "source": "Company pipeline", "source_url": "https://yimiao.fosunpharma.com/news/detail/3?up=index"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Comirnaty-COVID-19 mRNA vaccine", "source_info": [{"normalized_source_id": "6ede8d4125e04e5f89f14e1cc3428f82", "source": "WEB", "source_url": "https://www.yalemedicine.org/news/covid-19-vaccine-comparison"}], "status": "ACTIVE"}, {"lang": "JP", "name": "トジナメラン", "source_info": [{"code": "30400AMX00015", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "d854805e8228850d402dd22ae84e3244", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11"}], "status": "ACTIVE"}]', 'drug_id': '19a9ef8ac9a741b0af4248b32326034a', 'generic_name': '[{"lang": "EN", "name": "COMIRNATY Original/Omicron", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Famtozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Riltozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "贝舒地尔", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil Mesilate", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02"}], "status": "ACTIVE"}, {"lang": "JP", "name": "ベルモスジルメシル酸塩", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision"}], "status": "ACTIVE"}]', 'drug_id': '0826acdaa31c473480a705191150f6f5', 'generic_name': '[{"lang": "EN", "name": "Belumosudil", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "10.1002/cpdd.1082", "normalized_source_id": "3a35cdb7-0f33-4417-a43d-5456963ef5a1", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Clin Pharmacol Drug Dev", "source_url": "http://dx.doi.org/10.1002/cpdd.1082"}, {"code": "35230741", "normalized_source_id": "e7f29b256e9c46c19d4acbc643430038", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Pubmed", "source_url": "https://pubmed.ncbi.nlm.nih.gov/35230741/"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil (USAN)", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}, {"lang": "EN", "name": "RHOLISTIQ", "source_info": [{"normalized_source_id": "d960dac41dfe49609b6b380987cae0d9", "source": "TGA", "source_url": "https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "盐酸普鲁卡因", "source_info": [{"normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Procaine Hydrochloride", "source_info": [{"normalized_source_id": "713ce6480d33457e84ba18159638cafb", "source": "FDA_CDER"}, {"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカイン塩酸塩", "source_info": [{"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'drug_id': '39140fe8d67b4bc0a1ccc0dff48a4586', 'generic_name': '[{"lang": "EN", "name": "Procanine", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "procaine", "source_info": [{"code": "4Z8Y51M438", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカニン", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]'}]}
2025-02-26 19:31:22,268 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': 'SELECT drug_id,        drug_name,        generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3', 'answer': '下面整理了查询到的三条药品数据，每条数据均包含药品ID、药品中文/英文/日文名称（drug_name）以及对应的通用名称（generic_name），每个名称都附带语言标识、状态和来源信息：\n\n──────────────────────────────\n【记录 1】\n药品ID：19a9ef8ac9a741b0af4248b32326034a\n\n① 药品名称（drug_name）：\n   • 语言：CN  \n     名称：复必泰  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：Company pipeline  \n         标准化来源ID：cf0e26a9d83243f2a3855089fd5c4870  \n         链接：https://yimiao.fosunpharma.com/news/detail/3?up=index\n\n   • 语言：EN  \n     名称：Comirnaty-COVID-19 mRNA vaccine  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：WEB  \n         标准化来源ID：6ede8d4125e04e5f89f14e1cc3428f82  \n         链接：https://www.yalemedicine.org/news/covid-19-vaccine-comparison\n\n   • 语言：JP  \n     名称：トジナメラン  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 30400AMX00015；patsnap_id = d854805e8228850d402dd22ae84e3244；patsnap_type = 9bc3513c5909451980a59322d935419e  \n         链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11\n\n② 通用名称（generic_name）：\n   • 语言：EN  \n     名称：COMIRNATY Original/Omicron  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：WHO  \n         标准化来源ID：112b7931c4484b7986ffbe3983494961  \n         链接：https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n\n   • 语言：EN  \n     名称：COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n   • 语言：EN  \n     名称：COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n   • 语言：EN  \n     名称：Tozinameran/Famtozinameran  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n   • 语言：EN  \n     名称：Tozinameran/Riltozinameran  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n──────────────────────────────\n【记录 2】\n药品ID：0826acdaa31c473480a705191150f6f5\n\n① 药品名称（drug_name）：\n   • 语言：CN  \n     名称：贝舒地尔  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：NEWS  \n         标准化来源ID：0b0db149ab6e4a978c1c4e83498d6d5a  \n         链接：https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html\n\n   • 语言：EN  \n     名称：Belumosudil Mesilate  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 30600AMX00126000；patsnap_id = 8982588d454de324833e0a82a2255285  \n         链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02\n\n   • 语言：JP  \n     名称：ベルモスジルメシル酸塩  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 30600AMX00126000；patsnap_id = 8982588d454de324833e0a82a2255285  \n         链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision\n\n② 通用名称（generic_name）：\n   • 语言：EN  \n     名称：Belumosudil  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：KEGG  \n         附加信息：code = D11815；标准化来源ID：a07dbc9f94144f609a25c9d343a2ec5b  \n       - 来源：Clin Pharmacol Drug Dev  \n         附加信息：code = 10.1002/cpdd.1082；标准化来源ID：3a35cdb7-0f33-4417-a43d-5456963ef5a1；patsnap_id = b31eecbe-99b5-463c-ab3b-bcce8e150d45  \n         链接：http://dx.doi.org/10.1002/cpdd.1082  \n       - 来源：Pubmed  \n         附加信息：code = 35230741；标准化来源ID：e7f29b256e9c46c19d4acbc643430038；patsnap_id = b31eecbe-99b5-463c-ab3b-bcce8e150d45  \n         链接：https://pubmed.ncbi.nlm.nih.gov/35230741/\n\n   • 语言：EN  \n     名称：Belumosudil (USAN)  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：KEGG  \n         附加信息：code = D11815；标准化来源ID：a07dbc9f94144f609a25c9d343a2ec5b\n\n   • 语言：EN  \n     名称：RHOLISTIQ  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：TGA  \n         标准化来源ID：d960dac41dfe49609b6b380987cae0d9  \n         链接：https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd\n\n──────────────────────────────\n【记录 3】\n药品ID：39140fe8d67b4bc0a1ccc0dff48a4586\n\n① 药品名称（drug_name）：\n   • 语言：CN  \n     名称：盐酸普鲁卡因  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：NMPA  \n         标准化来源ID：3f2dbc379c394cd7b1307649f4a49eae\n\n   • 语言：EN  \n     名称：Procaine Hydrochloride  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：FDA_CDER  \n         标准化来源ID：713ce6480d33457e84ba18159638cafb  \n       - 另一个来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 22000AMX02403000；patsnap_id = 48d849a842e22d02ed98a558255052a9；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n   • 语言：JP  \n     名称：プロカイン塩酸塩  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 22000AMX02403000；patsnap_id = 48d849a842e22d02ed98a558255052a9；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n② 通用名称（generic_name）：\n   • 语言：EN  \n     名称：Procanine  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         附加信息：code = 22000AMX00376；标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         patsnap_id = 52233898ed4a85002229ad238922a85d；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n   • 语言：EN  \n     名称：procaine  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：GSRS  \n         附加信息：code = 4Z8Y51M438；标准化来源ID：a69257a1f6e645e29d7e433ddc094e1d  \n         链接：https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460\n\n   • 语言：JP  \n     名称：プロカニン  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         附加信息：code = 22000AMX00376；标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         patsnap_id = 52233898ed4a85002229ad238922a85d；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n──────────────────────────────\n以上即为将数据库查询的结果整理后的易读格式。'}
2025-02-26 19:31:22,269 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:31:22,340 - utils.logger - INFO - 更新QA对: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
2025-02-26 19:55:08,496 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 19:55:08,497 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:55:12,572 - utils.logger - INFO - No similar question found
2025-02-26 19:55:12,573 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:12,574 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 19:55:12,575 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:12,576 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 19:55:18,810 - utils.logger - INFO - Analyzed user intent: {'intent': '统计专利延长表中申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:55:18,811 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:18,812 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:18,813 - utils.logger - INFO - generate_sql input: {'intent': '统计专利延长表中申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 19:55:30,705 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS country_count\nFROM ads_phs_patent_extension;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 735, 'prompt_tokens': 1378, 'total_tokens': 2113, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-e06212a5-a034-4be1-a3de-ea82ad808633-0' usage_metadata={'input_tokens': 1378, 'output_tokens': 735, 'total_tokens': 2113, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-02-26 19:55:30,707 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS country_count FROM ads_phs_patent_extension'}
2025-02-26 19:55:30,708 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:30,709 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:30,710 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS country_count FROM ads_phs_patent_extension'}
2025-02-26 19:55:31,350 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS country_count FROM ads_phs_patent_extension', 'query_result': [{'country_count': '24'}]}
2025-02-26 19:55:31,352 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:31,352 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 19:55:31,353 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS country_count FROM ads_phs_patent_extension', 'query_result': [{'country_count': '24'}]}
2025-02-26 19:55:35,484 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS country_count FROM ads_phs_patent_extension', 'answer': '整理后的查询结果如下：\n\n• 国家数量：24'}
2025-02-26 19:55:35,485 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:41,614 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 20:00:41,615 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:00:43,446 - utils.logger - INFO - No similar question found
2025-02-26 20:00:43,447 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:43,448 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 20:00:43,450 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:43,450 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 20:00:48,857 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延长表中不同申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:00:48,858 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:48,860 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:48,861 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延长表中不同申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:00:54,090 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS distinct_country_count\nFROM ads_phs_patent_extension;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 352, 'prompt_tokens': 1379, 'total_tokens': 1731, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-4cbd0b1e-9048-4412-b4f0-764a68f9e3ca-0' usage_metadata={'input_tokens': 1379, 'output_tokens': 352, 'total_tokens': 1731, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-02-26 20:00:54,092 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 20:00:54,092 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:54,094 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:54,095 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 20:00:54,798 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 20:00:54,799 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:54,801 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:00:54,802 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 20:01:00,641 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'answer': '查询结果展示：\n\n┌────────────────────────────┐\n│ 不同国家数量 (distinct_country_count) │ 24                         │\n└────────────────────────────┘\n\n也就是说，数据库中共有 24 个不同的国家。'}
2025-02-26 20:01:00,642 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:08,825 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 20:02:08,826 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:02:10,600 - utils.logger - INFO - No similar question found
2025-02-26 20:02:10,601 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:10,602 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 20:02:10,604 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:10,604 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 20:02:17,345 - utils.logger - INFO - Analyzed user intent: {'intent': '统计专利延期业务表中不同申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:02:17,346 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:17,347 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:17,348 - utils.logger - INFO - generate_sql input: {'intent': '统计专利延期业务表中不同申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:02:25,693 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS distinct_country_count\nFROM ads_phs_patent_extension;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 480, 'prompt_tokens': 1379, 'total_tokens': 1859, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-ad25a9c2-7f71-4c9f-bf73-48e15bff24c3-0' usage_metadata={'input_tokens': 1379, 'output_tokens': 480, 'total_tokens': 1859, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-02-26 20:02:25,694 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 20:02:25,695 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:25,696 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:25,697 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 20:02:26,322 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 20:02:26,324 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:26,325 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:02:26,326 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 20:02:28,815 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'answer': '查询结果整理如下：\n\n总共查询到 24 个不同的国家。'}
2025-02-26 20:02:28,816 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:22,434 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 20:05:22,434 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:05:24,326 - utils.logger - INFO - No similar question found
2025-02-26 20:05:24,327 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:24,328 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 20:05:24,329 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:24,330 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 20:05:30,939 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延期业务表中不同申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:05:30,940 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:30,942 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:30,943 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延期业务表中不同申请国家的数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:05:41,852 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS distinct_country_count\nFROM ads_phs_patent_extension;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 544, 'prompt_tokens': 1379, 'total_tokens': 1923, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-e2753d90-cb2d-4ca7-9022-5134a621dc48-0' usage_metadata={'input_tokens': 1379, 'output_tokens': 544, 'total_tokens': 1923, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-02-26 20:05:41,853 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 20:05:41,854 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:41,856 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:41,856 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension'}
2025-02-26 20:05:42,455 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 20:05:42,456 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:42,457 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:42,458 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'query_result': [{'distinct_country_count': '24'}]}
2025-02-26 20:05:47,089 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS distinct_country_count FROM ads_phs_patent_extension', 'answer': '下面是整理后的数据库查询结果：\n\n─────────────────────────────  \n字段名称           | 值  \n─────────────────────────────  \ndistinct_country_count | 24  \n─────────────────────────────  \n\n这表示查询结果中“distinct_country_count”的值为 24。'}
2025-02-26 20:05:47,090 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:05:47,092 - utils.logger - ERROR - 更新QA对失败: 'dict' object has no attribute 'index'
2025-02-26 20:06:17,946 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 20:06:17,946 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:06:19,848 - utils.logger - INFO - No similar question found
2025-02-26 20:06:19,849 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:19,850 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 20:06:19,851 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:19,852 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 20:06:26,864 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延期业务表中申请国家的去重数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:06:26,865 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:26,866 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:26,867 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延期业务表中申请国家的去重数量', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:06:36,322 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS unique_country_count\nFROM ads_phs_patent_extension\nLIMIT 5;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 548, 'prompt_tokens': 1380, 'total_tokens': 1928, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-a175d5a5-2764-4efa-86e0-3ed4e1e9685b-0' usage_metadata={'input_tokens': 1380, 'output_tokens': 548, 'total_tokens': 1928, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-02-26 20:06:36,324 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS unique_country_count FROM ads_phs_patent_extension LIMIT 5'}
2025-02-26 20:06:36,324 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:36,326 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:36,327 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS unique_country_count FROM ads_phs_patent_extension LIMIT 5'}
2025-02-26 20:06:36,937 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS unique_country_count FROM ads_phs_patent_extension LIMIT 5', 'query_result': [{'unique_country_count': '24'}]}
2025-02-26 20:06:36,938 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:36,939 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:06:36,940 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS unique_country_count FROM ads_phs_patent_extension LIMIT 5', 'query_result': [{'unique_country_count': '24'}]}
2025-02-26 20:06:44,531 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS unique_country_count FROM ads_phs_patent_extension LIMIT 5', 'answer': '查询结果整理如下：\n\n• 唯一国家数量：24\n\n这意味着数据库中共有24个不同的国家。'}
2025-02-26 20:06:44,532 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:09:45,141 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 20:09:45,142 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:09:47,952 - utils.logger - INFO - No similar question found
2025-02-26 20:09:47,955 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:09:47,957 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}}
2025-02-26 20:09:47,967 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:09:47,969 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下专利延长表中的的申请国家总共有多少个？', 'answer': ''}
2025-02-26 20:09:58,765 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延长表中所有申请国家的总数', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:09:58,767 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:09:58,768 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:09:58,769 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延长表中所有申请国家的总数', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？'}
2025-02-26 20:10:03,121 - utils.logger - INFO - Generated SQL Response: content='SELECT COUNT(DISTINCT authority_country) AS total_application_countries\nFROM ads_phs_patent_extension;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 289, 'prompt_tokens': 1380, 'total_tokens': 1669, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-647a1588-76cd-4a5c-ad2a-4eeaf2e88407-0' usage_metadata={'input_tokens': 1380, 'output_tokens': 289, 'total_tokens': 1669, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-02-26 20:10:03,122 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS total_application_countries FROM ads_phs_patent_extension'}
2025-02-26 20:10:03,123 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:10:03,124 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:10:03,125 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'tables': ['ads_phs_patent_extension'], 'sql': 'SELECT COUNT(DISTINCT authority_country) AS total_application_countries FROM ads_phs_patent_extension'}
2025-02-26 20:10:03,908 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS total_application_countries FROM ads_phs_patent_extension', 'query_result': [{'total_application_countries': '24'}]}
2025-02-26 20:10:03,909 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:10:03,910 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:10:03,912 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS total_application_countries FROM ads_phs_patent_extension', 'query_result': [{'total_application_countries': '24'}]}
2025-02-26 20:10:20,974 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下专利延长表中的的申请国家总共有多少个？', 'sql': 'SELECT COUNT(DISTINCT authority_country) AS total_application_countries FROM ads_phs_patent_extension', 'answer': '整理后的查询结果如下：\n\n• 总申请国家数量：24\n\n这是将原始数据转换为更易阅读的格式后的展示。'}
2025-02-26 20:10:20,975 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:10:59,103 - utils.logger - INFO - 更新QA对: 帮我查下专利延长表中的的申请国家总共有多少个？
2025-02-26 20:13:12,495 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>

2025-02-26 20:13:12,495 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型'}
2025-02-26 20:13:14,167 - utils.logger - INFO - No similar question found
2025-02-26 20:13:14,168 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:14,169 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型', 'answer': ''}}
2025-02-26 20:13:14,170 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:14,170 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型', 'answer': ''}
2025-02-26 20:13:23,074 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延期记录中延长类型为PTE，且关联的药物字段不为空的记录，并返回专利ID、关联的药物ID和延长类型。', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型'}
2025-02-26 20:13:23,075 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:23,077 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:23,077 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延期记录中延长类型为PTE，且关联的药物字段不为空的记录，并返回专利ID、关联的药物ID和延长类型。', 'tables': ['ads_phs_patent_extension'], 'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型'}
2025-02-26 20:13:32,514 - utils.logger - INFO - Generated SQL Response: content="SELECT patent_id, drug_id, extension_type\nFROM ads_phs_patent_extension\nWHERE extension_type = 'PTE'\n  AND drug_id IS NOT NULL\n  AND JSON_LENGTH(drug_id) > 0\nORDER BY created_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 771, 'prompt_tokens': 1405, 'total_tokens': 2176, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-896062d7-96e6-4402-b812-e11d0103dda5-0' usage_metadata={'input_tokens': 1405, 'output_tokens': 771, 'total_tokens': 2176, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-02-26 20:13:32,517 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT patent_id, drug_id, extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5"}
2025-02-26 20:13:32,519 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:32,522 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:32,524 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型', 'tables': ['ads_phs_patent_extension'], 'sql': "SELECT patent_id, drug_id, extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5"}
2025-02-26 20:13:33,197 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型', 'sql': "SELECT patent_id, drug_id, extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'query_result': [{'patent_id': 'ff181981-057b-41c0-b613-2df3b70ae978', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': 'b5f128ac-1d73-4f6c-a015-ef2b41f71055', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': '3c425356-acf3-4d8f-bc8f-344c1931c6a0', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': 'd4bb9e39-bd66-4b27-92c1-2d254ded24a9', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': '937b93b6-c383-45a9-a905-49eb05ad5759', 'drug_id': '["cc12b0ab972347fa97dd8a38d5c9fa54"]', 'extension_type': 'PTE'}]}
2025-02-26 20:13:33,205 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:33,209 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:33,211 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型', 'sql': "SELECT patent_id, drug_id, extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'query_result': [{'patent_id': 'ff181981-057b-41c0-b613-2df3b70ae978', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': 'b5f128ac-1d73-4f6c-a015-ef2b41f71055', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': '3c425356-acf3-4d8f-bc8f-344c1931c6a0', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': 'd4bb9e39-bd66-4b27-92c1-2d254ded24a9', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': '937b93b6-c383-45a9-a905-49eb05ad5759', 'drug_id': '["cc12b0ab972347fa97dd8a38d5c9fa54"]', 'extension_type': 'PTE'}]}
2025-02-26 20:13:43,151 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型', 'sql': "SELECT patent_id, drug_id, extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'answer': '下面是整理后的数据，采用表格形式展示每条记录的信息：\n\n---------------------------------------------------------------\n| 序号 |               Patent ID               |                  Drug ID                  | Extension Type |\n---------------------------------------------------------------\n|  1   | ff181981-057b-41c0-b613-2df3b70ae978   | ["d367fa50d1d74df1a3b012e10f7408d5"]        | PTE            |\n|  2   | b5f128ac-1d73-4f6c-a015-ef2b41f71055   | ["d367fa50d1d74df1a3b012e10f7408d5"]        | PTE            |\n|  3   | 3c425356-acf3-4d8f-bc8f-344c1931c6a0   | ["3977a18e334b47a58108a0df2161d768"]        | PTE            |\n|  4   | d4bb9e39-bd66-4b27-92c1-2d254ded24a9   | ["3977a18e334b47a58108a0df2161d768"]        | PTE            |\n|  5   | 937b93b6-c383-45a9-a905-49eb05ad5759   | ["cc12b0ab972347fa97dd8a38d5c9fa54"]        | PTE            |\n---------------------------------------------------------------\n\n这样一目了然，可以快速查看每个Patent ID对应的Drug ID以及扩展类型。'}
2025-02-26 20:13:43,153 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:13:43,180 - utils.logger - INFO - 更新QA对: 帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型
2025-02-26 20:19:55,701 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:19:55,702 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 20:19:57,710 - utils.logger - INFO - No similar question found
2025-02-26 20:19:57,711 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:19:57,712 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}}
2025-02-26 20:19:57,713 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:19:57,714 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}
2025-02-26 20:20:11,045 - utils.logger - INFO - Analyzed user intent: {'intent': '查询药物索托拉西布的别名信息', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 20:20:11,045 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:20:11,047 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:20:11,048 - utils.logger - INFO - generate_sql input: {'intent': '查询药物索托拉西布的别名信息', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 20:20:11,834 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 20:20:32,269 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:20:32,270 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 20:20:34,148 - utils.logger - INFO - No similar question found
2025-02-26 20:20:34,150 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:20:34,151 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}}
2025-02-26 20:20:34,153 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:20:34,154 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}
2025-02-26 20:20:44,186 - utils.logger - INFO - Analyzed user intent: {'intent': '用户希望查询药物‘索托拉西布’的所有别名，也就是对该药物相关的名称/同义词做查询。', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 20:20:44,187 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:20:44,188 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:20:44,189 - utils.logger - INFO - generate_sql input: {'intent': '用户希望查询药物‘索托拉西布’的所有别名，也就是对该药物相关的名称/同义词做查询。', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 20:20:45,007 - utils.logger - ERROR - Workflow execution failed: 'str' object has no attribute 'get'
2025-02-26 20:21:13,876 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:21:13,877 - utils.logger - INFO - find_similar_question input: {'question': '帮我查几条文献的核心靶点不为空的文献，返回文献id'}
2025-02-26 20:21:16,505 - utils.logger - INFO - No similar question found
2025-02-26 20:21:16,505 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:21:16,507 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查几条文献的核心靶点不为空的文献，返回文献id', 'answer': ''}}
2025-02-26 20:21:16,508 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:21:16,509 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查几条文献的核心靶点不为空的文献，返回文献id', 'answer': ''}
2025-02-26 20:22:14,255 - utils.logger - INFO - Analyzed user intent: {'intent': '查询文献记录中，核心靶点字段有值的文献，并返回这些文献对应的文献ID', 'tables': ['ads_phs_paper_rel'], 'original_input': '帮我查几条文献的核心靶点不为空的文献，返回文献id'}
2025-02-26 20:22:14,255 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:22:14,256 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:22:14,257 - utils.logger - INFO - generate_sql input: {'intent': '查询文献记录中，核心靶点字段有值的文献，并返回这些文献对应的文献ID', 'tables': ['ads_phs_paper_rel'], 'original_input': '帮我查几条文献的核心靶点不为空的文献，返回文献id'}
2025-02-26 20:22:22,298 - utils.logger - INFO - Generated SQL Response: content="SELECT paper_id\nFROM ads_phs_paper_rel\nWHERE data_status = 'ACTIVE'\n  AND core_target_id IS NOT NULL\n  AND JSON_LENGTH(core_target_id) > 0\nORDER BY created_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 573, 'prompt_tokens': 727, 'total_tokens': 1300, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-e86774a7-e61e-4daf-9dbd-ed4abed41a73-0' usage_metadata={'input_tokens': 727, 'output_tokens': 573, 'total_tokens': 1300, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-02-26 20:22:22,299 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查几条文献的核心靶点不为空的文献，返回文献id', 'tables': ['ads_phs_paper_rel'], 'sql': "SELECT paper_id FROM ads_phs_paper_rel WHERE data_status = 'ACTIVE'   AND core_target_id IS NOT NULL   AND JSON_LENGTH(core_target_id) > 0 ORDER BY created_ts DESC LIMIT 5"}
2025-02-26 20:22:22,300 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:22:22,301 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:22:22,302 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查几条文献的核心靶点不为空的文献，返回文献id', 'tables': ['ads_phs_paper_rel'], 'sql': "SELECT paper_id FROM ads_phs_paper_rel WHERE data_status = 'ACTIVE'   AND core_target_id IS NOT NULL   AND JSON_LENGTH(core_target_id) > 0 ORDER BY created_ts DESC LIMIT 5"}
2025-02-26 20:22:25,979 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查几条文献的核心靶点不为空的文献，返回文献id', 'sql': "SELECT paper_id FROM ads_phs_paper_rel WHERE data_status = 'ACTIVE'   AND core_target_id IS NOT NULL   AND JSON_LENGTH(core_target_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'query_result': [{'paper_id': 'cd83e9b6-baae-473a-bad1-02395195f829'}, {'paper_id': '53cb5e09-0e9f-4544-9c69-f85fae26a09c'}, {'paper_id': 'fbb17ca9-6a82-4404-866b-92d7fda94f78'}, {'paper_id': '9c68b395-1e1a-3562-9d52-ec9b9cd585b4'}, {'paper_id': 'a0f9b615-9a4a-4148-ad7c-ce9666510e23'}]}
2025-02-26 20:22:25,980 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:22:25,981 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:22:25,982 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查几条文献的核心靶点不为空的文献，返回文献id', 'sql': "SELECT paper_id FROM ads_phs_paper_rel WHERE data_status = 'ACTIVE'   AND core_target_id IS NOT NULL   AND JSON_LENGTH(core_target_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'query_result': [{'paper_id': 'cd83e9b6-baae-473a-bad1-02395195f829'}, {'paper_id': '53cb5e09-0e9f-4544-9c69-f85fae26a09c'}, {'paper_id': 'fbb17ca9-6a82-4404-866b-92d7fda94f78'}, {'paper_id': '9c68b395-1e1a-3562-9d52-ec9b9cd585b4'}, {'paper_id': 'a0f9b615-9a4a-4148-ad7c-ce9666510e23'}]}
2025-02-26 20:22:29,708 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查几条文献的核心靶点不为空的文献，返回文献id', 'sql': "SELECT paper_id FROM ads_phs_paper_rel WHERE data_status = 'ACTIVE'   AND core_target_id IS NOT NULL   AND JSON_LENGTH(core_target_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'answer': '以下是整理后的论文编号列表，便于查看：\n\n1. paper_id: cd83e9b6-baae-473a-bad1-02395195f829  \n2. paper_id: 53cb5e09-0e9f-4544-9c69-f85fae26a09c  \n3. paper_id: fbb17ca9-6a82-4404-866b-92d7fda94f78  \n4. paper_id: 9c68b395-1e1a-3562-9d52-ec9b9cd585b4  \n5. paper_id: a0f9b615-9a4a-4148-ad7c-ce9666510e23'}
2025-02-26 20:22:29,709 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:22:29,722 - utils.logger - INFO - 更新QA对: 帮我查几条文献的核心靶点不为空的文献，返回文献id
2025-02-26 20:26:31,034 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:26:31,035 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}
2025-02-26 20:26:34,943 - utils.logger - INFO - Found similar question: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
2025-02-26 20:26:34,944 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 20:26:34,945 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:26:34,946 - utils.logger - INFO - Route after similar question: {'result': {'sql': 'SELECT drug_id,        drug_name,        generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3', 'answer': '下面整理了查询到的三条药品数据，每条数据均包含药品ID、药品中文/英文/日文名称（drug_name）以及对应的通用名称（generic_name），每个名称都附带语言标识、状态和来源信息：\n\n──────────────────────────────\n【记录 1】\n药品ID：19a9ef8ac9a741b0af4248b32326034a\n\n① 药品名称（drug_name）：\n   • 语言：CN  \n     名称：复必泰  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：Company pipeline  \n         标准化来源ID：cf0e26a9d83243f2a3855089fd5c4870  \n         链接：https://yimiao.fosunpharma.com/news/detail/3?up=index\n\n   • 语言：EN  \n     名称：Comirnaty-COVID-19 mRNA vaccine  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：WEB  \n         标准化来源ID：6ede8d4125e04e5f89f14e1cc3428f82  \n         链接：https://www.yalemedicine.org/news/covid-19-vaccine-comparison\n\n   • 语言：JP  \n     名称：トジナメラン  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 30400AMX00015；patsnap_id = d854805e8228850d402dd22ae84e3244；patsnap_type = 9bc3513c5909451980a59322d935419e  \n         链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11\n\n② 通用名称（generic_name）：\n   • 语言：EN  \n     名称：COMIRNATY Original/Omicron  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：WHO  \n         标准化来源ID：112b7931c4484b7986ffbe3983494961  \n         链接：https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n\n   • 语言：EN  \n     名称：COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n   • 语言：EN  \n     名称：COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n   • 语言：EN  \n     名称：Tozinameran/Famtozinameran  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n   • 语言：EN  \n     名称：Tozinameran/Riltozinameran  \n     状态：ACTIVE  \n     来源信息：同上（WHO，112b7931c4484b7986ffbe3983494961）\n\n──────────────────────────────\n【记录 2】\n药品ID：0826acdaa31c473480a705191150f6f5\n\n① 药品名称（drug_name）：\n   • 语言：CN  \n     名称：贝舒地尔  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：NEWS  \n         标准化来源ID：0b0db149ab6e4a978c1c4e83498d6d5a  \n         链接：https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html\n\n   • 语言：EN  \n     名称：Belumosudil Mesilate  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 30600AMX00126000；patsnap_id = 8982588d454de324833e0a82a2255285  \n         链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02\n\n   • 语言：JP  \n     名称：ベルモスジルメシル酸塩  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 30600AMX00126000；patsnap_id = 8982588d454de324833e0a82a2255285  \n         链接：https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision\n\n② 通用名称（generic_name）：\n   • 语言：EN  \n     名称：Belumosudil  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：KEGG  \n         附加信息：code = D11815；标准化来源ID：a07dbc9f94144f609a25c9d343a2ec5b  \n       - 来源：Clin Pharmacol Drug Dev  \n         附加信息：code = 10.1002/cpdd.1082；标准化来源ID：3a35cdb7-0f33-4417-a43d-5456963ef5a1；patsnap_id = b31eecbe-99b5-463c-ab3b-bcce8e150d45  \n         链接：http://dx.doi.org/10.1002/cpdd.1082  \n       - 来源：Pubmed  \n         附加信息：code = 35230741；标准化来源ID：e7f29b256e9c46c19d4acbc643430038；patsnap_id = b31eecbe-99b5-463c-ab3b-bcce8e150d45  \n         链接：https://pubmed.ncbi.nlm.nih.gov/35230741/\n\n   • 语言：EN  \n     名称：Belumosudil (USAN)  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：KEGG  \n         附加信息：code = D11815；标准化来源ID：a07dbc9f94144f609a25c9d343a2ec5b\n\n   • 语言：EN  \n     名称：RHOLISTIQ  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：TGA  \n         标准化来源ID：d960dac41dfe49609b6b380987cae0d9  \n         链接：https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd\n\n──────────────────────────────\n【记录 3】\n药品ID：39140fe8d67b4bc0a1ccc0dff48a4586\n\n① 药品名称（drug_name）：\n   • 语言：CN  \n     名称：盐酸普鲁卡因  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：NMPA  \n         标准化来源ID：3f2dbc379c394cd7b1307649f4a49eae\n\n   • 语言：EN  \n     名称：Procaine Hydrochloride  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：FDA_CDER  \n         标准化来源ID：713ce6480d33457e84ba18159638cafb  \n       - 另一个来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 22000AMX02403000；patsnap_id = 48d849a842e22d02ed98a558255052a9；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n   • 语言：JP  \n     名称：プロカイン塩酸塩  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         附加信息：code = 22000AMX02403000；patsnap_id = 48d849a842e22d02ed98a558255052a9；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n② 通用名称（generic_name）：\n   • 语言：EN  \n     名称：Procanine  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         附加信息：code = 22000AMX00376；标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         patsnap_id = 52233898ed4a85002229ad238922a85d；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n   • 语言：EN  \n     名称：procaine  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：GSRS  \n         附加信息：code = 4Z8Y51M438；标准化来源ID：a69257a1f6e645e29d7e433ddc094e1d  \n         链接：https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460\n\n   • 语言：JP  \n     名称：プロカニン  \n     状态：ACTIVE  \n     来源信息：  \n       - 来源：PMDA  \n         附加信息：code = 22000AMX00376；标准化来源ID：b5713ff9ea774e908282b147d30973d7  \n         patsnap_id = 52233898ed4a85002229ad238922a85d；patsnap_type = 9bc3513c5909451980a59322d935419e\n\n──────────────────────────────\n以上即为将数据库查询的结果整理后的易读格式。', 'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}}
2025-02-26 20:26:34,951 - utils.logger - ERROR - 更新QA对失败: Length mismatch: Expected axis has 6 elements, new values have 3 elements
2025-02-26 20:27:58,547 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:27:58,548 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}
2025-02-26 20:28:00,925 - utils.logger - INFO - No similar question found
2025-02-26 20:28:00,926 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:28:00,926 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'answer': ''}}
2025-02-26 20:28:00,928 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:28:00,929 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'answer': ''}
2025-02-26 20:28:13,253 - utils.logger - INFO - Analyzed user intent: {'intent': '查询药物数据中药物通用名不为空的记录，并返回药物ID和通用名', 'tables': ['ads_phs_drug'], 'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}
2025-02-26 20:28:13,254 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:28:13,256 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:28:13,257 - utils.logger - INFO - generate_sql input: {'intent': '查询药物数据中药物通用名不为空的记录，并返回药物ID和通用名', 'tables': ['ads_phs_drug'], 'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}
2025-02-26 20:28:24,907 - utils.logger - INFO - Generated SQL Response: content='SELECT drug_id, generic_name\nFROM ads_phs_drug\nWHERE JSON_LENGTH(generic_name) > 0\nLIMIT 5;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 488, 'prompt_tokens': 7909, 'total_tokens': 8397, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-41e92373-d486-41ab-ae76-d43e1a1276ae-0' usage_metadata={'input_tokens': 7909, 'output_tokens': 488, 'total_tokens': 8397, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-02-26 20:28:24,909 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'tables': ['ads_phs_drug'], 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 LIMIT 5'}
2025-02-26 20:28:24,909 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:28:24,910 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:28:24,911 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'tables': ['ads_phs_drug'], 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 LIMIT 5'}
2025-02-26 20:28:25,467 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 LIMIT 5', 'query_result': [{'drug_id': '0000d4a23502459386f511f0dfdad0df', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]'}, {'drug_id': '000133a233844135a2994ad3dbd3c76f', 'generic_name': '[{"lang": "EN", "name": "Paramethasone", "status": "ACTIVE"}]'}, {'drug_id': '00023bcab2274722b9c6cfde9f264576', 'generic_name': '[{"lang": "EN", "name": "indinavir", "source_info": [{"code": "9MG78X43ZT", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f"}], "status": "ACTIVE"}]'}, {'drug_id': '00199692457c4721b88795b26b04129b', 'generic_name': '[{"lang": "EN", "name": "Trastuzumab", "status": "ACTIVE"}]'}, {'drug_id': '001ab4d02229445bb129a717442d1097', 'generic_name': '[{"lang": "EN", "name": "Cefepime", "source_info": [{"code": "807PW4VQE3", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d"}], "status": "ACTIVE"}]'}]}
2025-02-26 20:28:25,468 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:28:25,469 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 20:28:25,470 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 LIMIT 5', 'query_result': [{'drug_id': '0000d4a23502459386f511f0dfdad0df', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]'}, {'drug_id': '000133a233844135a2994ad3dbd3c76f', 'generic_name': '[{"lang": "EN", "name": "Paramethasone", "status": "ACTIVE"}]'}, {'drug_id': '00023bcab2274722b9c6cfde9f264576', 'generic_name': '[{"lang": "EN", "name": "indinavir", "source_info": [{"code": "9MG78X43ZT", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f"}], "status": "ACTIVE"}]'}, {'drug_id': '00199692457c4721b88795b26b04129b', 'generic_name': '[{"lang": "EN", "name": "Trastuzumab", "status": "ACTIVE"}]'}, {'drug_id': '001ab4d02229445bb129a717442d1097', 'generic_name': '[{"lang": "EN", "name": "Cefepime", "source_info": [{"code": "807PW4VQE3", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d"}], "status": "ACTIVE"}]'}]}
2025-02-26 20:28:38,085 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 LIMIT 5', 'answer': '下面是整理后的结果，采用表格展示各条记录的主要信息：\n\n─────────────────────────────────────────────────────────────  \nDrug ID                             | Generic Name       | Lang | Status  | Source Info  \n─────────────────────────────────────────────────────────────  \n0000d4a23502459386f511f0dfdad0df      | Susoctocog alfa    | EN   | ACTIVE  | Code: D10831; Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b; Source: KEGG  \n─────────────────────────────────────────────────────────────  \n000133a233844135a2994ad3dbd3c76f      | Paramethasone      | EN   | ACTIVE  | —  \n─────────────────────────────────────────────────────────────  \n00023bcab2274722b9c6cfde9f264576      | indinavir          | EN   | ACTIVE  | Code: 9MG78X43ZT; Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d; Source: GSRS; URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f  \n─────────────────────────────────────────────────────────────  \n00199692457c4721b88795b26b04129b      | Trastuzumab        | EN   | ACTIVE  | —  \n─────────────────────────────────────────────────────────────  \n001ab4d02229445bb129a717442d1097      | Cefepime           | EN   | ACTIVE  | Code: 807PW4VQE3; Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d; Source: GSRS; URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d  \n─────────────────────────────────────────────────────────────  \n\n说明：\n1. 每条记录的 generic_name 字段原始上为 JSON 格式，此处提取了 lang、name、status 内容。\n2. 如有 source_info，则列出相关的“Code”、“Normalized Source ID”、“Source”，有的记录还提供了“Source URL”。  \n3. 未提供 source_info 的记录在该列标识为 "—"。\n\n这样呈现后，可以方便地浏览各药物的关键信息。'}
2025-02-26 20:28:38,086 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 20:28:38,090 - utils.logger - ERROR - 更新QA对失败: Length mismatch: Expected axis has 6 elements, new values have 3 elements
2025-02-26 21:38:52,262 - utils.logger - INFO - 更新QA对: what is your name
2025-02-26 21:39:31,424 - utils.logger - INFO - 更新QA对: what is your age
2025-02-26 21:47:54,133 - utils.logger - INFO - 更新QA对: what is your name
2025-02-26 21:47:54,153 - utils.logger - INFO - 更新QA对: what is your age
2025-02-26 21:47:54,172 - utils.logger - INFO - 更新QA对: what is your sex
2025-02-26 21:52:04,166 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:52:04,167 - utils.logger - INFO - find_similar_question input: {'question': '帮我查几条文献的核心靶点不为空的文献，返回文献id'}
2025-02-26 21:52:06,423 - utils.logger - INFO - Found similar question: 帮我查几条文献的核心靶点不为空的文献，返回文献id
2025-02-26 21:52:06,424 - utils.logger - INFO - Similarity score: 0.0
2025-02-26 21:52:06,425 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:52:06,426 - utils.logger - INFO - Route after similar question: {'result': {'sql': "SELECT paper_id FROM ads_phs_paper_rel WHERE data_status = 'ACTIVE'   AND core_target_id IS NOT NULL   AND JSON_LENGTH(core_target_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'answer': '以下是整理后的论文编号列表，便于查看：\n\n1. paper_id: cd83e9b6-baae-473a-bad1-02395195f829  \n2. paper_id: 53cb5e09-0e9f-4544-9c69-f85fae26a09c  \n3. paper_id: fbb17ca9-6a82-4404-866b-92d7fda94f78  \n4. paper_id: 9c68b395-1e1a-3562-9d52-ec9b9cd585b4  \n5. paper_id: a0f9b615-9a4a-4148-ad7c-ce9666510e23', 'question': '帮我查几条文献的核心靶点不为空的文献，返回文献id'}}
2025-02-26 21:52:06,438 - utils.logger - INFO - 更新QA对: 帮我查几条文献的核心靶点不为空的文献，返回文献id
2025-02-26 21:53:22,831 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:53:22,832 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}
2025-02-26 21:53:25,176 - utils.logger - INFO - No similar question found
2025-02-26 21:53:25,177 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:53:25,178 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'answer': ''}}
2025-02-26 21:53:25,179 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:53:25,180 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'answer': ''}
2025-02-26 21:53:45,481 - utils.logger - INFO - Analyzed user intent: {'intent': '查询药物信息，筛选通用名不为空的记录，并返回药物ID与通用名', 'tables': ['ads_phs_drug'], 'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}
2025-02-26 21:53:45,482 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:53:45,483 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:53:45,484 - utils.logger - INFO - generate_sql input: {'intent': '查询药物信息，筛选通用名不为空的记录，并返回药物ID与通用名', 'tables': ['ads_phs_drug'], 'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名'}
2025-02-26 21:53:59,127 - utils.logger - INFO - Generated SQL Response: content='SELECT drug_id, generic_name\nFROM ads_phs_drug\nWHERE JSON_LENGTH(generic_name) > 0\nORDER BY drug_id\nLIMIT 5;' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 557, 'prompt_tokens': 7909, 'total_tokens': 8466, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-1f6ab8c3-3f1f-460d-85a9-9a28e631d6a3-0' usage_metadata={'input_tokens': 7909, 'output_tokens': 557, 'total_tokens': 8466, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-02-26 21:53:59,128 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'tables': ['ads_phs_drug'], 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5'}
2025-02-26 21:53:59,129 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:53:59,130 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:53:59,130 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'tables': ['ads_phs_drug'], 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5'}
2025-02-26 21:53:59,734 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'query_result': [{'drug_id': '0000d4a23502459386f511f0dfdad0df', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]'}, {'drug_id': '000133a233844135a2994ad3dbd3c76f', 'generic_name': '[{"lang": "EN", "name": "Paramethasone", "status": "ACTIVE"}]'}, {'drug_id': '00023bcab2274722b9c6cfde9f264576', 'generic_name': '[{"lang": "EN", "name": "indinavir", "source_info": [{"code": "9MG78X43ZT", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f"}], "status": "ACTIVE"}]'}, {'drug_id': '00199692457c4721b88795b26b04129b', 'generic_name': '[{"lang": "EN", "name": "Trastuzumab", "status": "ACTIVE"}]'}, {'drug_id': '001ab4d02229445bb129a717442d1097', 'generic_name': '[{"lang": "EN", "name": "Cefepime", "source_info": [{"code": "807PW4VQE3", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d"}], "status": "ACTIVE"}]'}]}
2025-02-26 21:53:59,736 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:53:59,738 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:53:59,739 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'query_result': [{'drug_id': '0000d4a23502459386f511f0dfdad0df', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]'}, {'drug_id': '000133a233844135a2994ad3dbd3c76f', 'generic_name': '[{"lang": "EN", "name": "Paramethasone", "status": "ACTIVE"}]'}, {'drug_id': '00023bcab2274722b9c6cfde9f264576', 'generic_name': '[{"lang": "EN", "name": "indinavir", "source_info": [{"code": "9MG78X43ZT", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f"}], "status": "ACTIVE"}]'}, {'drug_id': '00199692457c4721b88795b26b04129b', 'generic_name': '[{"lang": "EN", "name": "Trastuzumab", "status": "ACTIVE"}]'}, {'drug_id': '001ab4d02229445bb129a717442d1097', 'generic_name': '[{"lang": "EN", "name": "Cefepime", "source_info": [{"code": "807PW4VQE3", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d"}], "status": "ACTIVE"}]'}]}
2025-02-26 21:54:15,113 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找几条药物通用名不为空的数据，返回药物ID及通用名', 'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。'}
2025-02-26 21:54:15,117 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:54:15,145 - utils.logger - INFO - 更新QA对: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 21:55:33,305 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:55:33,306 - utils.logger - INFO - find_similar_question input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 21:55:35,541 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 21:55:35,542 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 21:55:35,543 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:55:35,544 - utils.logger - INFO - Route after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}}
2025-02-26 21:55:35,599 - utils.logger - INFO - 更新QA对: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
2025-02-26 21:57:30,548 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:57:30,548 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 21:57:32,668 - utils.logger - INFO - No similar question found
2025-02-26 21:57:32,669 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:57:32,670 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 21:57:32,671 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:57:32,672 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 21:57:47,930 - utils.logger - INFO - JSON解析失败: Expecting ',' delimiter: line 2 column 21 (char 22)
2025-02-26 21:57:47,931 - utils.logger - INFO - 原始内容: {
  "intent": "首先查找药物"索托拉西布"的ID，然后使用该药物ID在临床试验数据中查找以该药物为试验药的记录，并返回相关的临床试验ID。",
  "tables": [
    "ads_phs_drug",
    "ads_phs_ct"
  ]
}
2025-02-26 21:57:47,932 - utils.logger - INFO - Analyzed user intent: {'error': '无法解析LLM响应', 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 21:57:47,932 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:57:47,933 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:57:47,934 - utils.logger - INFO - generate_sql input: {'error': '无法解析LLM响应', 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 21:57:47,935 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:57:47,935 - utils.logger - INFO - execute_sql input: {'error': '未找到相关表'}
2025-02-26 21:57:47,936 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 21:57:47,937 - utils.logger - INFO - summarize_sql_result input: {'error': '无有效的SQL语句'}
2025-02-26 21:57:54,572 - utils.logger - INFO - Summarized SQL result: {'original_input': '', 'sql': '', 'answer': '查询结果：\n----------------------------------------\n没有查询到任何数据。'}
2025-02-26 21:57:54,573 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 21:57:54,602 - utils.logger - INFO - 更新QA对: 帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？
2025-02-26 22:07:48,032 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:07:48,033 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:07:50,909 - utils.logger - INFO - Found similar question: 帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？
2025-02-26 22:07:50,911 - utils.logger - INFO - Similarity score: 0.0
2025-02-26 22:07:50,912 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:07:50,914 - utils.logger - INFO - Route after similar question: {'result': {'sql': nan, 'answer': '查询结果：\n----------------------------------------\n没有查询到任何数据。', 'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}}
2025-02-26 22:07:50,947 - utils.logger - INFO - 更新QA对: 帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？
2025-02-26 22:08:39,352 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:08:39,353 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:08:42,787 - utils.logger - INFO - No similar question found
2025-02-26 22:08:42,788 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:08:42,790 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 22:08:42,792 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:08:42,793 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 22:09:48,226 - utils.logger - INFO - Analyzed user intent: {'intent': '先通过药物名称‘索托拉西布’查找其药物ID，再利用该药物ID到临床业务数据中查找作为试验药物的临床记录，进而返回这些记录对应的临床试验ID', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:09:48,228 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:09:51,847 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:09:53,343 - utils.logger - INFO - generate_sql input: {'intent': '先通过药物名称‘索托拉西布’查找其药物ID，再利用该药物ID到临床业务数据中查找作为试验药物的临床记录，进而返回这些记录对应的临床试验ID', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:20:52,343 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:20:52,344 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:20:55,886 - utils.logger - INFO - No similar question found
2025-02-26 22:20:55,887 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:20:55,888 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 22:20:55,890 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:20:55,890 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 22:20:55,891 - utils.logger - ERROR - Workflow execution failed: BaseTool.__call__() missing 1 required positional argument: 'tool_input'
2025-02-26 22:24:21,107 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:24:21,108 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:24:23,190 - utils.logger - INFO - No similar question found
2025-02-26 22:24:23,191 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:24:23,192 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 22:24:23,195 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:24:23,200 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 22:24:23,201 - utils.logger - ERROR - Workflow execution failed: BaseTool.invoke() missing 1 required positional argument: 'input'
2025-02-26 22:25:03,463 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:25:03,464 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:25:05,675 - utils.logger - INFO - No similar question found
2025-02-26 22:25:05,676 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:25:05,677 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 22:25:05,679 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:25:05,680 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 22:25:05,681 - utils.logger - ERROR - Workflow execution failed: BaseTool.invoke() missing 1 required positional argument: 'input'
2025-02-26 22:25:49,184 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:25:49,184 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:25:52,114 - utils.logger - INFO - No similar question found
2025-02-26 22:25:52,115 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:25:52,116 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 22:25:52,118 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:25:52,118 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 22:25:52,119 - utils.logger - ERROR - Workflow execution failed: BaseTool.invoke() missing 1 required positional argument: 'input'
2025-02-26 22:30:52,650 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:30:52,652 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:30:55,154 - utils.logger - INFO - No similar question found
2025-02-26 22:30:55,155 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:30:55,156 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 22:30:55,158 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:30:55,159 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 22:30:55,161 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 22:31:03,447 - utils.logger - INFO - Analyzed user intent: {'intent': '查询药物索托拉西布在药物业务表中对应的药物ID，然后利用该ID在临床业务表中查找作为试验药物参与的临床试验记录，最后返回这些临床试验的ID。', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:31:03,448 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:31:03,450 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:31:03,450 - utils.logger - INFO - generate_sql input: {'intent': '查询药物索托拉西布在药物业务表中对应的药物ID，然后利用该ID在临床业务表中查找作为试验药物参与的临床试验记录，最后返回这些临床试验的ID。', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:31:05,560 - utils.logger - INFO - Structure for table ads_phs_drug retrieved: 表名：ads_phs_drug
表结构：CREATE TABLE `ads_phs_drug` (
  `drug_id` varchar(32) NOT NULL COMMENT '药物 ID',
  `docid` int(11) DEFAULT NULL COMMENT '数字主键',
  `drug_name` json NOT NULL COMMENT '药物名称, List<Map>',
  `alias` json DEFAULT NULL COMMENT '别名, List<Map>',
  `dev_code` json DEFAULT NULL COMMENT '研发代码, List<Map>',
  `trade_name` json DEFAULT NULL COMMENT '商品名, List<Map>',
  `generic_name` json DEFAULT NULL COMMENT '通用名称, List<Map>',
  `is_nme` tinyint(1) DEFAULT NULL COMMENT '是否NME, New molecular entity',
  `is_first_in_class` tinyint(1) DEFAULT NULL COMMENT '是否First-in-class',
  `is_qidp` tinyint(1) DEFAULT NULL COMMENT '是否 Qualified Infectious Disease Product 合格传染病产品资格',
  `is_compound_medicine` tinyint(1) DEFAULT NULL COMMENT '是否复方',
  `biological_drug_source` varchar(32) DEFAULT NULL COMMENT '生物药来源 dict_type= BIOLOGICAL_DRUG_SOURCE',
  `express_system` varchar(32) DEFAULT NULL COMMENT '表达体系 dict_type=EXPRESS_SYSTEM',
  `registered_classification_cn` varchar(32) DEFAULT NULL COMMENT '中国注册分类',
  `null_target_reason` varchar(32) DEFAULT NULL COMMENT '无靶点原因 NOT_AVAILABLE/UNDEFINED',
  `wiki_link` varchar(1500) DEFAULT NULL COMMENT 'wiki 地址',
  `drugbank_id` json DEFAULT NULL COMMENT 'drugbank_id, List<String>',
  `kegg_id` json DEFAULT NULL COMMENT 'kegg_id, List<String>',
  `related_component` json DEFAULT NULL COMMENT '复方药的相关组分, List<String>',
  `drug_type` json DEFAULT NULL COMMENT '药物类型, List<String>',
  `originator_org_master_entity_id` json DEFAULT NULL COMMENT '原研机构, List<String>',
  `mechanism_action_id` json DEFAULT NULL COMMENT '作用机制 ID, List<String>',
  `target_id` json DEFAULT NULL COMMENT '靶点 id, List<String>',
  `atc_code` json DEFAULT NULL COMMENT 'ATC 代码，WHO发布的药物分类系统, List<String>',
  `antibody_drug_id` varchar(32) DEFAULT NULL COMMENT '抗体 ID',
  `antibody_type` varchar(32) DEFAULT NULL COMMENT '抗体类型',
  `linker_id` varchar(32) DEFAULT NULL COMMENT '连接子 id',
  `linker_number` varchar(32) DEFAULT NULL COMMENT '连接子数量',
  `payload_id` varchar(32) DEFAULT NULL COMMENT '载荷id',
  `dar` json DEFAULT NULL COMMENT '药物抗体比',
  `specific_site` tinyint(1) DEFAULT NULL COMMENT '是否定点偶联',
  `site_id` varchar(32) DEFAULT NULL COMMENT '位点id',
  `adc_reference` json DEFAULT NULL COMMENT 'ADC 参考信息',
  `target_moiety_type` json DEFAULT NULL COMMENT '靶向药物类型',
  `data_source` int(3) DEFAULT NULL COMMENT '数据来源',
  `genetic_material` varchar(32) DEFAULT NULL COMMENT '遗传物质, dict_type = V_GENETIC_MATERIAL',
  `delivery_system` json DEFAULT NULL COMMENT '递送系统, dict_type = V_DELIVERY_SYSTEM',
  `targeted_tissue` json DEFAULT NULL COMMENT '靶向组织, dict_type = V_TARGETED_TISSUE',
  `paired_region` json DEFAULT NULL COMMENT '识别区域, dict_type = V_PAIRED_REGION',
  `regulation_type` json DEFAULT NULL COMMENT '调控机制, dict_type = V_REGULATION_TYPE',
  `tech_platform` json DEFAULT NULL COMMENT '技术平台, dict_type = TECH_PLATFORM',
  `source_info_xna` json DEFAULT NULL COMMENT '核酸药物来源信息',
  `if_speculate` tinyint(1) DEFAULT NULL COMMENT '是否含有推测信息, 比如利用 WHO INN 推测药物结构',
  `profile` json DEFAULT NULL COMMENT '描述',
  `is_pathway` tinyint(1) DEFAULT NULL COMMENT '是否 pathway',
  `special_review` json DEFAULT NULL COMMENT '特殊审评 List<String>',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID List<String>',
  `active_org_master_entity_id` json DEFAULT NULL COMMENT '在研机构 List<String>',
  `global_highest_dev_status` varchar(32) DEFAULT NULL COMMENT '全球最高研发状态',
  `global_highest_dev_status_before_termination` varchar(32) DEFAULT NULL COMMENT '终止前全球最高研发状态',
  `highest_dev_status_cn` varchar(32) DEFAULT NULL COMMENT '中国最高研发状态',
  `highest_dev_status_before_termination_cn` varchar(32) DEFAULT NULL COMMENT '终止前中国最高研发状态',
  `first_approved_date` bigint(20) DEFAULT NULL COMMENT '首批时间',
  `first_approved_country` json DEFAULT NULL COMMENT '首批国家, List<String>',
  `first_approved_indication` json DEFAULT NULL COMMENT '首批适应症, List<String>',
  `research_disease` json DEFAULT NULL COMMENT '在研适应症, List<String>',
  `non_research_disease` json DEFAULT NULL COMMENT '非在研适应症, List<String>',
  `inactive_org_master_entity_id` json DEFAULT NULL COMMENT '非在研机构 ,List<String>',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域, List<String>',
  `approval_country` json DEFAULT NULL COMMENT '获批国家, List<String>',
  `research_country` json DEFAULT NULL COMMENT '研发国家, List<String>',
  `rnk` int(11) DEFAULT NULL COMMENT '同靶点药物排名',
  `disease_phase` json DEFAULT NULL COMMENT '药物适应症 pahse, List<Map>',
  `adc_count` int(11) DEFAULT NULL COMMENT 'adc 药物被关联的次数',
  `target_extend_id` varchar(32) DEFAULT NULL COMMENT '多靶点表ID  生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `has_leading_org_involved` tinyint(1) DEFAULT NULL COMMENT '是否有头部企业参与',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `data_status` varchar(10) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `original_drug_id` json DEFAULT NULL COMMENT '生物类似药',
  `created_by` varchar(255) DEFAULT NULL,
  `updated_by` varchar(255) DEFAULT NULL,
  `deal_related_org` json DEFAULT NULL COMMENT '交易涉及机构',
  `first_approved_date_cn` bigint(20) DEFAULT NULL COMMENT '中国首批时间',
  `moiety_target_id` json DEFAULT NULL COMMENT '抗体靶点ID',
  `payload_target_id` json DEFAULT NULL COMMENT '载荷靶点ID',
  `moiety_mechanism_action_id` json DEFAULT NULL COMMENT '抗体作用机制ID',
  `payload_mechanism_action_id` json DEFAULT NULL COMMENT '载荷作用机制D',
  `moiety_target_extend_id` varchar(32) DEFAULT NULL COMMENT '抗体靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `payload_target_extend_id` varchar(32) DEFAULT NULL COMMENT '载荷靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  PRIMARY KEY (`drug_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `docid` (`docid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='药物业务表'
示例数据：[{'drug_id': '0000717d1e7143dc94fd46c1755cd8e3', 'is_qidp': 'false', 'global_highest_dev_status': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'is_first_in_class': 'false', 'non_research_disease': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'originator_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]', 'created_ts': '1677735049000', 'drug_type': '["1151dbc710f64a85923dc05d4a5a0ba9"]', 'data_status': 'ACTIVE', 'drug_name': '[{"lang": "EN", "name": "JM023", "status": "ACTIVE"}]', 'research_country': '[{"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "c9e8fce7eb6b4bbd9cc66dc356017aab", "dev_status_time": {"time_trust_code": 7, "time_ts": 1669766400000}}]', 'created_by': 'data@patsnap.com', 'data_source': '10', 'updated_by': 'data@patsnap.com', 'dev_code': '[{"name": "AD20190509", "status": "ACTIVE"}]', 'is_pathway': 'false', 'disease_phase': '[{"disease_id": "25aa9dbd25714b36b8bcb9347d1b91d1", "highest_phase_cn": "c9e8fce7eb6b4bbd9cc66dc356017aab", "highest_phase_global": "c9e8fce7eb6b4bbd9cc66dc356017aab"}]', 'therapeutic_area': '["042cbe45c973477b957717ded29ef7b6"]', 'is_nme': 'false', 'updated_ts': '1735604387000', 'is_compound_medicine': 'false', 'docid': '36127', 'null_target_reason': 'UNDEFINED', 'highest_dev_status_cn': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'disease_id': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'inactive_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]'}, {'drug_id': '0000d4a23502459386f511f0dfdad0df', 'is_qidp': 'false', 'global_highest_dev_status': 'efd6215835394b07b046125e3175d3fe', 'is_first_in_class': 'false', 'first_approved_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be"]', 'drugbank_id': '["DB11606"]', 'non_research_disease': '["e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'originator_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'created_ts': '1633704418000', 'drug_type': '["4d2dcd3fc8b644db955f8cccefca280b"]', 'target_extend_id': '450cd6ab529c38d4b0ad05aaff0d5fd7', 'data_status': 'ACTIVE', 'first_approved_indication': '["07d4cf59dafc4a35840dbf53e136394a"]', 'drug_name': '[{"lang": "CN", "name": "舒索凝血素α", "source_info": [{"code": "国药准字SJ20240009", "normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "patsnap_id": "ea95955e04de20edd2a022ee3882a984", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"normalized_source_id": "c550fafe5544447091b21ca6c19f70f2", "source": "EMA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "スソクトコグ アルファ（遺伝子組換え）", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'mechanism_action_id': '["979b395f8c612b269b4c98663691de9d"]', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'research_country': '[{"country": "0dc5d896-7408-3c87-84c0-22e3d9b784be", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1414022400000}}, {"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1708387200000}}, {"country": "9a18968a-f130-3a00-80b6-8b9e2eec4838", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "676de5ba-893a-36bb-8683-c93306aaf769", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1711411200000}}, {"country": "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1461888000000}}, {"country": "3d57c904-23bf-3ee0-9924-83496c75b8ee", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "52d1b118-b540-37ba-9cb2-f5aff686bb10", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1679270400000}}, {"country": "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "665d1d12-3d14-3e05-8459-014864489671", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "672807de-6d33-3706-a350-c97e6ed7735e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1620950400000}}, {"country": "cf11da47-6a9f-3948-9d29-8a824f805638", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7cb930b-9b67-3639-97cd-dab2ce82da83", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "0e7802a9-bad3-33a3-98ae-ff755c717809", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "dc266be9-66b5-3c85-af35-ef210568f738", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "1b05c4d2-8156-3854-9898-c71e0077e3c6", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "bf460c70-eac8-3426-baa3-7e6c72bc0889", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "15d3c741-f4c4-35d8-9273-339b5972916e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "4ac42935-7005-3e0d-a0e9-698b15e3986b", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7693298-e9f4-3dfb-ad3e-fda6b7e59658", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "2f753928-f426-3cc1-9ea6-8c25f6a4d330", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1444348800000}}, {"country": "bb1d5b11-d9f8-31c4-872c-65a9fad8d193", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "6d64b019-4f80-31e9-b248-297aa588c950", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "00d7d9ab-3d75-3fa9-9849-2f715d69f010", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "027bd29d-069d-3fdf-aa1a-be891fbaae92", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}]', 'wiki_link': 'https://en.wikipedia.org/wiki/Susoctocog_alfa', 'created_by': 'data@patsnap.com', 'data_source': '10', 'rnk': '9', 'kegg_id': '["D10831"]', 'biological_drug_source': '5763f27b05ac432dafde44df27a4ec76', 'express_system': '6ce3b90730044258a81ab5a3e9288495', 'updated_by': 'youjia@patsnap.com', 'research_disease': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a"]', 'atc_code': '["7319cbc33cb0475a94bf687ed6634978"]', 'dev_code': '[{"name": "BAX 802", "status": "ACTIVE"}, {"name": "BAX-801", "status": "ACTIVE"}, {"name": "BAX-802", "status": "ACTIVE"}, {"name": "BAX801", "status": "ACTIVE"}, {"name": "OBI-1", "status": "ACTIVE"}, {"name": "SHP672", "status": "ACTIVE"}, {"name": "TAK 672", "status": "ACTIVE"}]', 'trade_name': '[{"lang": "EN", "name": "Obizur", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "JP", "name": "オビザー", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "CN", "name": "助因止", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "patsnap_id": "1c1403c1-b1e8-3014-96e8-1939c36cfecb", "patsnap_type": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "http://mp.weixin.qq.com/s?__biz=MzA5Njc0MTAxOQ==&mid=2650027443&idx=1&sn=71b7cef6c2070906937036501e33b9cc"}], "status": "ACTIVE"}, {"lang": "KR", "name": "오비주르주[서스옥토코그알파", "source_info": [{"code": "202300956", "normalized_source_id": "6f08ac4a5ca144f8b59de74187e41886", "source": "MFDS", "source_url": "https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202300956aupdateTs2024-06-10%2018:52:49.0b"}], "status": "ACTIVE"}]', 'active_org_master_entity_id': '["4099573c333dcbc48d8f398aee392060", "ad3caef0a55e98b5fc495d9921bf43e0", "b0b1d828ce0abb09b0567b191f02bb53", "f4bc92165e87f4758502c119ebc15574", "f6b3099a6af884bd6b51c208d8c47644", "3213232cf3774bc734def2420b679bb6"]', 'is_pathway': 'false', 'alias': '[{"lang": "EN", "name": "Antihemophilic Factor (Recombinant), Porcine Sequence", "source_info": [{"code": "BLA125512", "normalized_source_id": "f3bd4fd130ec4588971e9008b5010e32", "patsnap_id": "854204585a22558d8532e5de92e5d898", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "FDA_CBER"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor (recombinant) porcine sequence", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor porcine, B-domain truncated recombinant", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "PFVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine recombinant factor VIII B-domain truncated", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Recombinant porcine factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "RpfVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa (INN)", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'special_review': '["23d3523b7ece48ddacaddac53a66949d", "043a131d85994801b3617e822e7f87b3"]', 'disease_phase': '[{"disease_id": "71d86eb1f39c4e509b8da8fe4343bdd3", "highest_phase_before_ter_global": "9f31233bceb94d9796d3f3556f17ab13", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "e30a25b1033043c4adf00e944889533c", "highest_phase_before_ter_global": "f835774c48404593b64ef05369eb8eba", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "07d4cf59dafc4a35840dbf53e136394a", "highest_phase_cn": "efd6215835394b07b046125e3175d3fe", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "d1e154571f0a46f8b15f8997f3031fd1", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "18795373eb704b16936d51c793bbea01", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}]', 'therapeutic_area': '["c354b2ea74d349da99bef8388390c7d8", "5b1dfc2ca8564662860187aef864467d", "67034410be134e2bbb5b0930595b5e75"]', 'is_nme': 'false', 'updated_ts': '1737614304000', 'is_compound_medicine': 'false', 'docid': '4178', 'first_approved_date_cn': '1708387200000', 'target_id': '["3f888f3938b34a4ca124145b3fa1e229"]', 'highest_dev_status_cn': 'efd6215835394b07b046125e3175d3fe', 'approval_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be", "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "9a18968a-f130-3a00-80b6-8b9e2eec4838", "676de5ba-893a-36bb-8683-c93306aaf769", "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "3d57c904-23bf-3ee0-9924-83496c75b8ee", "52d1b118-b540-37ba-9cb2-f5aff686bb10", "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "665d1d12-3d14-3e05-8459-014864489671"]', 'disease_id': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a", "e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'if_speculate': 'false', 'inactive_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'first_approved_date': '1414022400000'}]
2025-02-26 22:31:07,408 - utils.logger - INFO - Structure for table ads_phs_ct retrieved: 表名：ads_phs_ct
表结构：CREATE TABLE `ads_phs_ct` (
  `clinical_trial_id` varchar(40) NOT NULL COMMENT '临床主键ID',
  `register_number` varchar(40) NOT NULL COMMENT '临床注册号',
  `data_source` varchar(20) NOT NULL COMMENT '数据源',
  `url` varchar(16383) NOT NULL COMMENT '临床链接URL',
  `org_master_entity_id` json DEFAULT NULL COMMENT '机构ID',
  `dev_status_org_master_entity_id` json DEFAULT NULL COMMENT '研发状态表机构ID',
  `sponsor_org_master_entity_id` json DEFAULT NULL COMMENT '主办机构ID',
  `collaborator_org_master_entity_id` json DEFAULT NULL COMMENT '合作机构ID',
  `drug_id` json DEFAULT NULL COMMENT '药物ID',
  `main_experimentation_drug_id` json DEFAULT NULL COMMENT '主要试验药物ID',
  `control_drug_id` json DEFAULT NULL COMMENT '对照药物ID',
  `dev_status_drug_id` json DEFAULT NULL COMMENT '研发状态表药物ID',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID',
  `condition_disease_id` json DEFAULT NULL COMMENT '疾病适应症ID',
  `dev_status_disease_id` json DEFAULT NULL COMMENT '研发状态表适应症ID',
  `target_id` json DEFAULT NULL COMMENT '靶点ID',
  `drug_target_id` json DEFAULT NULL COMMENT '药物靶点ID',
  `non_drug_target_id` json DEFAULT NULL COMMENT '非药物靶点ID',
  `endpoint_id` json DEFAULT NULL COMMENT '终点指标ID',
  `facility_id` json DEFAULT NULL COMMENT 'facility ID',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域',
  `brief_summary` text DEFAULT NULL COMMENT '方案摘要',
  `brief_title` text DEFAULT NULL COMMENT '标题',
  `brief_title_with_acronym` text DEFAULT NULL COMMENT '标题_acronym',
  `official_title` text DEFAULT NULL COMMENT '官方标题',
  `phase` json DEFAULT NULL COMMENT '临床阶段',
  `study_purpose` text DEFAULT NULL COMMENT '研究目的',
  `study_type` json DEFAULT NULL COMMENT '研究类型',
  `study_design` json DEFAULT NULL COMMENT '研究设计方案',
  `study_result` json DEFAULT NULL COMMENT '研究结果',
  `study_reference` json DEFAULT NULL COMMENT '研究引用',
  `study_identifier` json DEFAULT NULL COMMENT '研究identifier',
  `f_condition` json DEFAULT NULL COMMENT '适应症',
  `condition_text` text DEFAULT NULL COMMENT '适应症文本',
  `intervention` json DEFAULT NULL COMMENT '干预措施',
  `intervention_text` text DEFAULT NULL COMMENT '干预措施文本',
  `arm_intervention` json DEFAULT NULL COMMENT '分组干预措施',
  `arm_intervention_count` int(11) DEFAULT NULL COMMENT '分组数量',
  `single_or_multi` varchar(100) DEFAULT NULL COMMENT 'single_drug/multiple_drugs',
  `recruitment_status` json DEFAULT NULL COMMENT '招募状态',
  `expanded_access_status` json DEFAULT NULL COMMENT '招募状态：Available, No longer available, Temporarily not available, Approved for marketing',
  `recruitment_status_history` json DEFAULT NULL COMMENT '历史招募状态',
  `eligibility` json DEFAULT NULL COMMENT '实验要求的条件',
  `min_age` json DEFAULT NULL COMMENT '实验要求的最小年纪',
  `max_age` json DEFAULT NULL COMMENT '实验要求的最大年纪',
  `enrollment` json DEFAULT NULL COMMENT '受试者数目',
  `secondary_id` json DEFAULT NULL COMMENT 'secondary id',
  `normalized_secondary_id` json DEFAULT NULL COMMENT '标准化的secondary_id',
  `trial_registry` varchar(255) DEFAULT NULL COMMENT '实验注册号',
  `facility` json DEFAULT NULL COMMENT 'facility',
  `facility_count` int(11) DEFAULT NULL COMMENT 'facility count',
  `country` json DEFAULT NULL COMMENT '国家',
  `first_posted_date` json DEFAULT NULL COMMENT '首次公示日期',
  `last_update_posted_date` json DEFAULT NULL COMMENT '最近修改日期',
  `last_updated_at` json DEFAULT NULL COMMENT '数据更新日期',
  `start_date` json DEFAULT NULL COMMENT '实验开始日期',
  `completion_date` json DEFAULT NULL COMMENT '实验完成日期',
  `primary_completion_date` json DEFAULT NULL COMMENT '主要终点完成日期',
  `milestone_date` json DEFAULT NULL COMMENT '试验各项重要时间',
  `duration` bigint(20) DEFAULT NULL COMMENT '实验持续毫秒数 completion_date-start_date',
  `sponsor` json DEFAULT NULL COMMENT '申办/合作机构',
  `sponsor_funder_type` json DEFAULT NULL COMMENT '机构类型',
  `responsible_party` json DEFAULT NULL COMMENT '申办中心',
  `ethic_committee` json DEFAULT NULL COMMENT '法律伦理委员会',
  `central_contact` json DEFAULT NULL COMMENT '实验中心信息',
  `central_investigator` json DEFAULT NULL COMMENT '实验中心调查人信息',
  `result_contact` json DEFAULT NULL COMMENT 'result contact',
  `nih_funded_research_id` json DEFAULT NULL COMMENT '相关的NIH',
  `if_ct_result` int(11) DEFAULT NULL COMMENT '是否有临床结果',
  `if_iit` int(11) DEFAULT NULL COMMENT '是否iit公司',
  `if_primary_id` int(11) DEFAULT NULL COMMENT '是否主试验号',
  `primary_group_id` varchar(40) DEFAULT NULL COMMENT '主试验号',
  `group_id` json DEFAULT NULL COMMENT '多中心试验ID',
  `group_normalized_secondary_id` json DEFAULT NULL COMMENT '多中心试验secondary id',
  `group_registry` json DEFAULT NULL COMMENT '多中心registry',
  `group_country_code` json DEFAULT NULL COMMENT '多中心国家code',
  `group_country_count` int(11) DEFAULT NULL COMMENT '多中心国家数量',
  `why_stopped` text DEFAULT NULL COMMENT '终止原因',
  `outcome` json DEFAULT NULL COMMENT '终点指标',
  `adverse_event` json DEFAULT NULL COMMENT '不良事件',
  `link` json DEFAULT NULL COMMENT '相关链接',
  `keyword` json DEFAULT NULL COMMENT '关键字',
  `detailed_description` text DEFAULT NULL COMMENT '实验详情',
  `related_id` json DEFAULT NULL COMMENT '相关登记号',
  `record_number` varchar(255) DEFAULT NULL COMMENT '备案号',
  `acceptance_number` varchar(255) DEFAULT NULL COMMENT '临床申请受理号',
  `study_number` varchar(255) DEFAULT NULL COMMENT '试验方案编号',
  `study_version` varchar(255) DEFAULT NULL COMMENT '方案最新版本号',
  `version_date` json DEFAULT NULL COMMENT '版本日期',
  `if_combined_medication` varchar(255) DEFAULT NULL COMMENT '方案是否为联合用药',
  `has_dmc` int(11) DEFAULT NULL COMMENT '数据安全监查委员会（DMC）',
  `injury_insurance` int(11) DEFAULT NULL COMMENT '为受试者购买试验伤害保险',
  `if_dev_status_trial` tinyint(1) DEFAULT NULL COMMENT '是否进入研发状态表',
  `trial_tag` json DEFAULT NULL COMMENT '试验标签',
  `if_validation` tinyint(4) NOT NULL COMMENT '是否可用',
  `docid` int(11) NOT NULL AUTO_INCREMENT COMMENT '数字主键',
  `lang` varchar(10) NOT NULL COMMENT '语言',
  `data_status` varchar(20) NOT NULL COMMENT 'ACTIVE/DELETE',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `created_by` varchar(100) DEFAULT NULL COMMENT '创建人',
  `updated_by` varchar(100) DEFAULT NULL COMMENT '修改人',
  PRIMARY KEY (`clinical_trial_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `uk_docid` (`docid`),
  KEY `ads_phs_ct_rn_index` (`register_number`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin AUTO_INCREMENT=5665516 COMMENT='临床业务表'
示例数据：[{'drug_id': '["af371b70e86d416d9511a121dcdc703f", "46453eee210b4a859b10545f4fc28b73"]', 'main_experimentation_drug_id': '["af371b70e86d416d9511a121dcdc703f", "46453eee210b4a859b10545f4fc28b73"]', 'eligibility': '{"exclusion_criteria": "Exclusion criteria: Patients were excluded if they had any active concomitant malignancies,  symptomatic brain metastases, past history of severe allergic reactions to drugs,  interstitial pneumonia identified by chest X-ray, superior vena cava syndrome, or other serious complications, such as uncontrolled angina pectoris, myocardial infarction within 3 months, heart failure,  uncontrolled diabetes mellitus or hypertension, uncontrolled massive pleural  effusion or ascites.", "gender": "Both", "inclusion_criteria": "Inclusion criteria:"}', 'if_validation': '1', 'phase': '{"highest_normalized_phase_id": "7b79728539354f189772a4eab9cc9fff", "name": "Phase II", "normalized_phase_id": "7b79728539354f189772a4eab9cc9fff"}', 'last_update_posted_date': '{"time_trust_code": 7, "time_ts": 1697500800000}', 'recruitment_status_history': '[{"name": "Complete: follow-up complete", "name_text": "Complete: follow-up complete", "normalized_status": "Completed", "time_ts": 1692921600000}]', 'first_posted_date': '{"time_trust_code": 7, "time_ts": 1209600000000}', 'data_source': 'WHO', 'study_type': '{"name": "Interventional", "normalized_study_type": "Interventional", "normalized_study_type_id": "dad53f8616ce4e39ab0c6f4a6237e565"}', 'intervention_text': 'Patients  will receive an infusion of gemcitabine on days 1 and  8. They will also receive an infusion of carboplatin on day 8.', 'updated_by': 'data@patsnap.com', 'ethic_committee': '[{"status": "YES"}]', 'recruitment_status': '{"name": "Complete: follow-up complete", "name_text": "Complete: follow-up complete", "normalized_status": "Completed"}', 'outcome': '[{"description": "Response rate", "outcome_type": "Primary"}, {"description": "Safety,survival,toxicity, QOL", "outcome_type": "Secondary"}]', 'start_date': '{"date": {"time_trust_code": 7, "time_ts": 1093996800000}, "date_type": "Actual"}', 'condition_text': 'Non-small cell lung cancer', 'url': 'https://center6.umin.ac.jp/cgi-open-bin/ctr_e/ctr_view.cgi?recptno=R000001376', 'if_ct_result': '0', 'disease_id': '["e2fd9bda4aeb4a7b9fa53a2560126d24", "3beea980d93a4cc0abc864e27514601c", "6c9886cb25eb45faba70292cee1f5518"]', 'group_registry': '["JPRN"]', 'completion_date': '{"date": {"time_trust_code": 7, "time_ts": 1222819200000}, "date_type": "Actual"}', 'group_country_code': '["JP"]', 'country': '[{"country_code": "JP", "name": "Japan", "normalized_id": "676de5ba-893a-36bb-8683-c93306aaf769"}]', 'f_condition': '["Non-small cell lung cancer"]', 'official_title': 'Gemcitabine-carboplatin for elderly patients with advanced non-small cell lung cancer : a phase II study of the Niigata Lung Cancer Treatment Group - Gemcitabine-carboplatin for elderly patients with advanced non-small cell lung cancer : a phase II study of the Niigata Lung Cancer Treatment Group', 'created_ts': '1716295374000', 'data_status': 'ACTIVE', 'group_country_count': '1', 'central_contact': '[{"address": "1-754 Asahimachi-Dori,Niigata City, Niigata 951-8520", "affiliation": "Niigata University Medical and Dental Hospital Bioscience Medical Research Center", "email": "hy0522@med.niigata-u.ac.jp", "lastname": "Hirohisa Yoshizawa", "phone": "025-227-2517"}]', 'created_by': 'data@patsnap.com', 'study_result': '[{"date_completed": "2008-10-01", "date_first_publication": "1900-01-01", "yes_no": "Yes"}]', 'last_updated_at': '{"time_trust_code": 7, "time_ts": 1697500800000}', 'register_number': 'JPRN-UMIN000001131', 'intervention': '[{"name": "Patients will receive an infusion of gemcitabine on days 1 and 8. They will also receive an infusion of carboplatin on day 8.", "type": "drug"}]', 'if_primary_id': '1', 'sponsor': '[{"name": "Niigata Lung Cancer Treatment Group", "sponsor_type": "Primary"}]', 'primary_group_id': 'JPRN-UMIN000001131', 'if_iit': '1', 'brief_title': 'Gemcitabine-carboplatin for elderly patients with advanced non-small cell lung cancer : a phase II study of the Niigata Lung Cancer Treatment Group', 'duration': '128822400000', 'clinical_trial_id': '00000a4e3d8e528444ddeaa22a3e4a55', 'therapeutic_area': '["62eaee6d9ee44410b8aca59dfc7408e9", "948c9548c2ed46b5865b8693f7f96604"]', 'lang': 'EN', 'trial_registry': 'JPRN', 'updated_ts': '1721428211000', 'condition_disease_id': '["3beea980d93a4cc0abc864e27514601c"]', 'docid': '272226', 'group_normalized_secondary_id': '[{"id_type": "secondary_id", "id_value": "JPRN-UMIN000001131", "url": "https://center6.umin.ac.jp/cgi-open-bin/ctr_e/ctr_view.cgi?recptno=R000001376"}]', 'enrollment': '[{"enrollment": "35"}]', 'max_age': '{"age_text": "Not applicable"}', 'arm_intervention_count': '0', 'group_id': '["JPRN-UMIN000001131"]', 'study_design': '{"allocation": "Non-randomized", "allocation_normalized_id": "f2deb94314e73728bc13bedb47273b6b", "intervention_model": "Single arm", "intervention_model_normalized_id": "db8f0c23aeab3b7492d2e2619bff6fc7", "other": "Single arm Non-randomized"}', 'min_age': '{"age": "70", "age_text": "70years-old", "age_unit": "years-old"}'}, {'drug_id': '["bd5ef80602de4f9499e91dff50374a83"]', 'main_experimentation_drug_id': '["bd5ef80602de4f9499e91dff50374a83"]', 'eligibility': '{"exclusion_criteria": "Exclusion criteria: <br>1. Subject with anemia from cause other than MPN-associated MF or JAK2 inhibitor therapy (eg, iron deficiency, vitamin B12 and/or folate deficiencies, autoimmune or hemolytic anemia, infection, or any type of known clinically significant bleeding or sequestration).<br>2. Subject use of hydroxyurea, immunomodulatory compounds such as pomalidomide, thalidomide, ESAs, androgenic steroids or other drugs with potential effects on hematopoiesis = 8 weeks immediately up to the date of randomization.<br>a. Systemic corticosteroids are permitted for nonhematological conditions providing the subject is receiving a constant dose equivalent to = 10 mg prednisone for the 4 weeks immediately up to randomization.<br>b. Iron chelation therapy (ICT) is permitted providing the subject is receiving a stable dose for the 8 weeks immediately up to randomization.<br>3. Subject with any of the following laboratory abnormalities at screening:<br>a. Neutrophils: < 1 x 10^9/L<br>b. White blood count (WBC): > 100 x 10^9/L<br>c. Platelets: the lowest allowable level as approved for the concomitant JAK2 inhibitor but not < 25 x 10^9/L or > 1000 x 10^9/L<br>d. Peripheral blood myeloblasts: > 5%<br>e. Estimated glomerular filtration rate: < 30 mL/min/1.73 m2 (via the 4-variable modification of diet in renal disease [MDRD] formula) or nephrotic subjects (eg, urine albumin-to-creatinine ratio > 3500 mg/g)<br>f. Aspartate aminotransferase (AST) or alanine aminotransferase: (ALT) > 3.0 x upper limit of normal (ULN)<br>g. Direct bilirubin: = 2 x ULN<br>   - Higher levels are acceptable if these can be attributed to active red blood cell precursor destruction within the bone marrow (eg, ineffective erythropoiesis)<br>4. Subject with uncontrolled hypertension, defined as repeated elevations of systolic blood pressure = 140 mmHg or diastolic blood pressure = 90 mmHg, that is not resolved at the time of randomization.<br>5. Subject with prior history of malignancies, other than disease under study, unless the subject has been free of the disease for = 3 years. However, subject with the following history/concurrent conditions is allowed:<br>a. Basal or squamous cell carcinoma of the skin<br>b. Carcinoma in situ of the cervix<br>c. Carcinoma in situ of the breast<br>d. Incidental histologic finding of prostate cancer (T1a or T1b using the tumor, nodes, metastasis [TNM] clinical staging system)<br>6. Subject with prior hematopoietic cell transplant or subject anticipated to receive a hematopoietic cell transplant during the 24 weeks from the date of randomization.<br>7. Subject with stroke, myocardial infarction, deep venous thrombosis, pulmonary or arterial embolism within 6 months immediately up to the date of randomization.<br>8. Subject with major surgery within 2 months up to the date of randomization. Subject must have completely recovered from any previous surgery immediately up to the date of randomization.<br>9. Subject with a major bleeding event (defined as symptomatic bleeding in a critical area or organ and/or bleeding causing a decrease in Hgb of = 2 g/dL or leading to transfusion of = 2 units of packed red cells) in the last 6 months prior to the date of randomization.<br>10. Subject with inadequately controlled heart disease and/or have a known left ventricular ejection fraction < 35%.<br>11. Subject with uncontrolled systemic fungal, bacterial, or viral infection (defined as ongoing signs/symptoms related to the infection without improvement despite appropriate antibiotics, antiviral therapy, and/or other treatment).<br>12. Subject wi", "gender": "Both", "inclusion_criteria": "Inclusion criteria: <br>1. Subject is =18 years of age at the time of signing the informed consent form (ICF).<br>2. Subject has a diagnosis of primary myelofibrosis (PMF) according to the 2016 World Health Organization (WHO) criteria or diagnosis of post-ET or post-PV myelofibrosis according to the IWG-MRT 2007 criteria, confirmed by the most recent local pathology report.<br>3. Subject is requiring RBC transfusions as defined as:<br>a. Average RBC-transfusion frequency: 4 to 12 RBC units/12 weeks immediately up to randomization. There must be no interval > 6 weeks (42 days) without = 1 RBC transfusion.<br>b. RBC transfusions are scored in determining eligibility when given for treatment of:<br>- Symptomatic (ie, fatigue or shortness of breath) anemia with a pretransfusion Hgb = 9.5 g/dL or<br>- Asymptomatic anemia with a pretransfusion Hgb = 7 g/dL<br>c. RBC transfusions given for worsening of anemia due to bleeding or infections are not scored in determining eligibility.<br>4. Subjects on continuous (eg, absent of dose interruptions lasting = 2 consecutive weeks) JAK2 inhibitor therapy as approved in the country of the study site for the treatment for MPN-associated MF as part of their standard-of-care therapy for at least 32 weeks, on stable daily dose for at least 16 weeks immediately up to the date of randomization and anticipated to be on a stable daily dose of that JAK2 inhibitor for at least 24 weeks after randomization.<br>5. Subject has an Eastern Cooperative Oncology Group (ECOG) performance score of = 2.<br>6. A female of childbearing potential (FCBP) for this study is defined as a female who: 1) has achieved menarche at some point, 2) has not undergone a hysterectomy or bilateral oophorectomy or 3) has not been naturally postmenopausal (amenorrhea following cancer therapy does not rule out childbearing potential) for at least 24 consecutive months (eg, has had menses at any time in the preceding 24 consecutive months). FCBP participating in the study must:<br>a. Have 2 negative pregnancy tests as verified by the Investigator prior to starting study therapy. She must agree to ongoing pregnancy testing during the study, and after end of IP. This applies even if the subject practices true abstinence* from heterosexual contact.<br>b. Either commit to true abstinence* from heterosexual contact (which must be reviewed on a monthly basis and source documented) or agree to use, and be able to comply with, effective contraception** without interruption, 28 days prior to starting IP, during the study therapy (including dose interruptions), and for 12 weeks (approximately 5 times the mean terminal half-life of IP based on multiple-dose  pharmacokinetics [PK] data) after discontinuation of study therapy.<br>7. Male subjects must:<br>Practice true abstinence* (which must be reviewed on a monthly basis) or agree to use a condom during sexual contact with a pregnant female or a female of childbearing potential** while participating in the study, during dose interruptions and for at least 12 weeks (approximately 5 times the mean terminal half-life of IP based on multiple-dose PK data) following IP discontinuation, even if he has undergone a successful vasectomy<br>* True abstinence is acceptable when it is in line with the preferred and usual lifestyle of the subject. [Periodic abstinence (eg, calendar, ovulation, symptothermal, postovulation methods) and withdrawal are not acceptable methods of contraception.]<br>** Agreement to use highly effective methods of contraception that alone or in combination resu"}', 'if_validation': '1', 'secondary_id': '[{"id_field": "secondary_id", "id_value": ["ACE-536-MF-002;2020-000607-36-DE"]}, {"id_field": "bridge_id", "id_value": ["EUCTR2020-000607-36-DE"]}]', 'phase': '{"highest_normalized_phase_id": "f835774c48404593b64ef05369eb8eba", "name": "Human pharmacology (Phase I): noTherapeutic exploratory (Phase II): noTherapeutic confirmatory - (Phase III): yesTherapeutic use (Phase IV): no", "normalized_phase_id": "f835774c48404593b64ef05369eb8eba"}', 'last_update_posted_date': '{"time_trust_code": 7, "time_ts": 1710201600000}', 'recruitment_status_history': '[{"name": "Not Recruiting", "name_text": "Not Recruiting", "normalized_status": "Not yet recruiting"}]', 'first_posted_date': '{"time_trust_code": 7, "time_ts": 1610064000000}', 'data_source': 'WHO', 'normalized_secondary_id': '[{"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-DE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}]', 'study_type': '{"name": "Interventional clinical trial of medicinal product", "normalized_study_type": "Interventional", "normalized_study_type_id": "dad53f8616ce4e39ab0c6f4a6237e565"}', 'intervention_text': '<br>Trade Name: Reblozyl<br>Product Name: Luspatercept<br>Product Code: ACE-536 (BMS-986346)<br>Pharmaceutical Form: Powder for solution for injection<br>INN or Proposed INN: Luspatercept<br>CAS Number: 1373715-00-4<br>Current Sponsor code: ACE-536<br>Other descriptive name: LUSPATERCEPT<br>Concentration unit: mg milligram(s)<br>Concentration type: equal<br>Concentration number: 25-<br>Pharmaceutical form of the placebo: Solution for injection<br>Route of administration of the placebo: Subcutaneous use<br><br>Trade Name: Reblozyl<br>Product Name: Luspatercept <br>Product Code: ACE-536 (BMS-986346)<br>Pharmaceutical Form: Powder for solution for injection<br>INN or Proposed INN: Luspatercept<br>CAS Number: 1373715-00-4<br>Current Sponsor code: ACE-536<br>Other descriptive name: LUSPATERCEPT<br>Concentration unit: mg milligram(s)<br>Concentration type: equal<br>Concentration number: 75-<br>Pharmaceutical form of the placebo: Solution for injection<br>Route of administration of the placebo: Subcutaneous use<br><br>', 'updated_by': 'data@patsnap.com', 'org_master_entity_id': '["8eca2b1e039c19dfb9a0bf168b2f667c"]', 'ethic_committee': '[{"status": "Approved"}]', 'recruitment_status': '{"name": "Not Recruiting", "name_text": "Not Recruiting", "normalized_status": "Not yet recruiting"}', 'single_or_multi': 'single_drug', 'outcome': '[{"description": "Main Objective: To evaluate the efficacy of luspatercept compared with placebo for the treatment of anemia in subjects with myeloproliferative neoplasm (MPN)-associated myelofibrosis (MF) with concomitant JAK2 inhibitor therapy and who require red blood cell transfusions.;Secondary Objective: - To evaluate additional efficacy parameters of luspatercept compared with placebo;<br>- To evaluate the the safety of luspatercept compared to placebo in subjects with MPN-associated MF as measured by the frequency and severity of  adverse events (AEs), serious adverse events (SAEs), antidrug antibodies (ADA), and transformation to blast phase;<br>- To evaluate pharmacokinetics (PK) for luspatercept in MPN-associated MF.;Primary end point(s): Proportion of subjects who become RBC transfusion free during any consecutive 12-week period <br>;Timepoint(s) of evaluation of this end point: Any consecutive rolling” 12-week period starting from randomization up to and including Week 24", "outcome_type": "Primary"}, {"description": "Secondary end point(s): 1) Proportion of subjects who become RBC-transfusion free over any consecutive 16-week period<br>2) Maximum duration of RBC-TI response<br>3) Proportion of subjects who reduce their transfusion burden by = 50% and by = 4 units from baseline over any consecutive 12-week period <br>4) Maximum duration of when subjects reduce their transfusion burden by = 50% and by = 4 units from baseline over any consecutive 12-week period <br>5)Proportion of subjects who become RBC-transfusion free over any consecutive 12-week period<br>6) Proportion of subjects who become RBC-transfusion free over any consecutive 16-week period <br>7) Mean change in transfusion burden (RBC units) from baseline <br>8) Cumulative response duration for subjects achieving multiple episodes of RBC-TI 12<br>9) Proportion of subjects achieving a mean Hgb increase = 1 g/dL from baseline over any consecutive 12-week period in absence of RBC transfusions<br>10) Change in serum ferritin from baseline.;Timepoint(s) of evaluation of this end point: 1)Any consecutive rolling” 16-week period starting from randomization up to and including Week 24<br>2)Randomization up to end of treatment<br>3)Randomization up to and including Week 24<br>4)Randomization up to end of treatment<br>5)Any consecutive rolling” 12-week period from randomization up to end of treatment<br>6)Any consecutive rolling” 16-week period from randomization up to end of treatment<br>7)Randomization up to and including Week 24<br>8)Randomization up to end of treatment<br>9)Any consecutive rolling” 12-week period starting from randomization up to and including Week 24; Randomization up to end<br>of treatment<br>10)Randomization up to and including Week 24; Randomization up to end of treatment", "outcome_type": "Secondary"}]', 'start_date': '{"date": {"time_trust_code": 7, "time_ts": 1622678400000}, "date_type": "Actual"}', 'condition_text': 'Anemia associated with myeloproliferative neoplasm (MPN)-associated myelofibrosis (MF) <br>MedDRA version: 20.0Level: PTClassification code 10077161Term: Primary myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.0Level: LLTClassification code 10074689Term: Post polycythemia vera myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.0Level: LLTClassification code 10074690Term: Post essential thrombocythemia myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.0Level: LLTClassification code 10074692Term: Post essential thrombocythaemia myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.1Level: LLTClassification code 10074691Term: Post polycythaemia vera myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 20.0Level: PTClassification code 10028537Term: MyelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps);Therapeutic area: Diseases [C] - Blood and lymphatic diseases [C15]', 'url': 'https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36', 'if_ct_result': '1', 'disease_id': '["1779aedf6a9744f2a29ddc1feb89f231", "fd6b927bd92044d7b240e09317dac79c", "91e18b79318b46699a0d70e6957aaa76"]', 'group_registry': '["CTIS", "ClinicalTrials.gov", "EUCTR", "JPRN"]', 'group_country_code': '["AR", "AT", "AU", "BE", "CA", "CH", "CL", "CN", "CO", "CZ", "DE", "ES", "FR", "GB", "GR", "HK,CN", "HU", "IE", "IL", "IT", "JP", "KR", "LB", "NL", "PL", "RO", "RU", "US"]', 'country': '[{"country_code": "RU", "name": "Russian Federation", "normalized_id": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312"}, {"country_code": "RO", "name": "Romania", "normalized_id": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766"}, {"country_code": "HK,CN", "name": "Hong Kong", "normalized_id": "ee96fb71-2762-3fed-a869-ba2761ce8cc3"}, {"country_code": "HU", "name": "Hungary", "normalized_id": "184959bf-87b7-3479-827e-d53d6c70ebd4"}, {"country_code": "US", "name": "United States", "normalized_id": "0dc5d896-7408-3c87-84c0-22e3d9b784be"}, {"country_code": "CZ", "name": "Czechia", "normalized_id": "bf2107a8-40c7-303a-b4d5-7c28d3903f02"}, {"country_code": "JP", "name": "Japan", "normalized_id": "676de5ba-893a-36bb-8683-c93306aaf769"}, {"country_code": "GB", "name": "United Kingdom", "normalized_id": "672807de-6d33-3706-a350-c97e6ed7735e"}, {"country_code": "ES", "name": "Spain", "normalized_id": "dc266be9-66b5-3c85-af35-ef210568f738"}, {"country_code": "GR", "name": "Greece", "normalized_id": "a9ac313e-6b2c-39ce-b83b-3ec5bf1760ff"}, {"country_code": "CA", "name": "Canada", "normalized_id": "cf11da47-6a9f-3948-9d29-8a824f805638"}, {"country_code": "AT", "name": "Austria", "normalized_id": "6efc9b0c-3cae-3f31-997d-ad35651f6e74"}, {"country_code": "NL", "name": "Netherlands", "normalized_id": "bf460c70-eac8-3426-baa3-7e6c72bc0889"}, {"country_code": "CZ", "name": "Czech Republic", "normalized_id": "bf2107a8-40c7-303a-b4d5-7c28d3903f02"}, {"country_code": "BE", "name": "Belgium", "normalized_id": "61238041-bc83-3404-a7b4-d7d38443f6b5"}, {"country_code": "IE", "name": "Ireland", "normalized_id": "b7fd90b0-e7ac-3861-bfdb-762da5fc20be"}, {"country_code": "KR", "name": "Korea, Republic of", "normalized_id": "52d1b118-b540-37ba-9cb2-f5aff686bb10"}, {"country_code": "PL", "name": "Poland", "normalized_id": "15d3c741-f4c4-35d8-9273-339b5972916e"}, {"country_code": "IT", "name": "Italy", "normalized_id": "1b05c4d2-8156-3854-9898-c71e0077e3c6"}, {"country_code": "IL", "name": "Israel", "normalized_id": "95c67304-766d-3248-a52e-759791c1118b"}, {"country_code": "AU", "name": "Australia", "normalized_id": "ecc919b1-c2b7-3740-bfa7-7cda77176d07"}, {"country_code": "FR", "name": "France", "normalized_id": "d75944da-2a69-3c58-82a0-c8138ec47d50"}, {"country_code": "DE", "name": "Germany", "normalized_id": "0e7802a9-bad3-33a3-98ae-ff755c717809"}]', 'f_condition': '["Anemia associated with myeloproliferative neoplasm (MPN)-associated myelofibrosis (MF)"]', 'official_title': 'A PHASE 3, DOUBLE-BLIND, RANDOMIZED STUDY TO COMPARE THE EFFICACY AND SAFETY OF LUSPATERCEPT (ACE-536) VERSUS PLACEBO IN SUBJECTS WITH MYELOPROLIFERATIVE NEOPLASM-ASSOCIATED MYELOFIBROSIS ON CONCOMITANT JAK2 INHIBITOR THERAPY AND WHO REQUIRE RED BLOOD CELL TRANSFUSIONS - INDEPENDENCE', 'created_ts': '1716313995000', 'data_status': 'ACTIVE', 'group_country_count': '28', 'central_contact': '[{"address": "Parc de l\'Alliance - Avenue de Finlande, 4", "affiliation": "Bristol-Myers Squibb International Corporation", "email": "Clinical.Trials@bms.com", "firstname": "GSM-CT"}]', 'created_by': 'data@patsnap.com', 'sponsor_org_master_entity_id': '["8eca2b1e039c19dfb9a0bf168b2f667c"]', 'study_result': '[{"adverse_event": "No results available", "baseline_char": "No results available", "date_first_publication": "1900-01-01", "outcome_measure": "No results available", "participant_flow": "No results available", "summary": "A PHASE 3, DOUBLE-BLIND, RANDOMIZED STUDY TO COMPARE THE EFFICACY AND SAFETY OF LUSPATERCEPT (ACE-536) VERSUS PLACEBO IN SUBJECTS WITH MYELOPROLIFERATIVE NEOPLASM-ASSOCIATED MYELOFIBROSIS ON CONCOMITANT JAK2 INHIBITOR THERAPY AND WHO REQUIRE RED BLOOD CELL TRANSFUSIONS"}]', 'last_updated_at': '{"time_trust_code": 7, "time_ts": 1710201600000}', 'register_number': 'EUCTR2020-000607-36-BE', 'intervention': '[{"other_name": ["LUSPATERCEPT", "ACE-536", "ACE-536 (BMS-986346)", "Luspatercept", "Reblozyl"], "single_or_multi": "single_drug", "type": "drug"}, {"other_name": ["LUSPATERCEPT", "ACE-536", "ACE-536 (BMS-986346)", "Luspatercept", "Reblozyl"], "single_or_multi": "single_drug", "type": "drug"}]', 'if_primary_id': '0', 'sponsor': '[{"name": "Celgene Corporation", "sponsor_type": "Primary"}]', 'primary_group_id': 'NCT04717414', 'if_iit': '0', 'brief_title': 'A study to evaluate the benefit and safety of Luspatercept (ACE-536) in adults with myeloproliferative neoplasm-associated myelofibrosis on concomitant JAK2 inhibitor therapy and who require red blood cell transfusions', 'adverse_event': '[{"description": "No results available"}]', 'clinical_trial_id': '00000dae8054234e332255832ed29e23', 'therapeutic_area': '["5b1dfc2ca8564662860187aef864467d"]', 'lang': 'EN', 'trial_registry': 'EUCTR', 'updated_ts': '1716556724000', 'condition_disease_id': '["91e18b79318b46699a0d70e6957aaa76"]', 'docid': '1017978', 'group_normalized_secondary_id': '[{"id_type": "secondary_id", "id_value": "CTIS2023-507890-17-00", "url": "https://euclinicaltrials.eu/search-for-clinical-trials/?lang=en&EUCT=2023-507890-17-00"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-AT", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-BE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-CZ", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-DE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-FR", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-GR", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-HU", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-IE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-IT", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-RO", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "JPRN-jRCT2071200083", "url": "https://jrct.niph.go.jp/latest-detail/jRCT2071200083"}, {"id_type": "secondary_id", "id_value": "NCT04717414", "url": "https://clinicaltrials.gov/study/NCT04717414"}]', 'target_id': '["471b7ac440a64d3cbf2d5d01f274f7b5"]', 'enrollment': '[{"enrollment": "309", "enrollment_type": "Date trial authorised"}]', 'arm_intervention_count': '0', 'group_id': '["CTIS2023-507890-17-00", "EUCTR2020-000607-36-AT", "EUCTR2020-000607-36-BE", "EUCTR2020-000607-36-CZ", "EUCTR2020-000607-36-DE", "EUCTR2020-000607-36-FR", "EUCTR2020-000607-36-GR", "EUCTR2020-000607-36-HU", "EUCTR2020-000607-36-IE", "EUCTR2020-000607-36-IT", "EUCTR2020-000607-36-RO", "JPRN-jRCT2071200083", "NCT04717414"]', 'study_design': '{"allocation": "Randomised", "allocation_normalized_id": "d0bcdd909ab63ff9a996ccd91f90d2bb", "intervention_model": "Parallel group", "intervention_model_normalized_id": "c028a05a817a3315a9784fa1f0d815dd", "masking": "Double blind", "masking_normalized_id": "d909d38d705c375386dd86e611a82f5b", "other": "Controlled: yes Randomised: yes Open: no Single blind: no Double blind: yes Parallel group: yes Cross over: no Other: no If controlled, specify comparator, Other Medicinial Product: no Placebo: yes Other: no Number of treatment arms in the trial: 2"}'}]
2025-02-26 22:33:19,368 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:33:19,369 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:33:22,753 - utils.logger - INFO - No similar question found
2025-02-26 22:33:22,754 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:33:22,756 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}}
2025-02-26 22:33:22,758 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:33:22,759 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'answer': ''}
2025-02-26 22:33:22,762 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 22:33:29,390 - utils.logger - INFO - Analyzed user intent: {'intent': '查询药物索托拉西布的药物ID，然后使用该药物ID查询临床试验记录，返回临床试验ID', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:33:29,391 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:33:29,393 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:33:29,393 - utils.logger - INFO - generate_sql input: {'intent': '查询药物索托拉西布的药物ID，然后使用该药物ID查询临床试验记录，返回临床试验ID', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？'}
2025-02-26 22:33:29,396 - utils.logger - INFO - Structure for table ads_phs_drug retrieved: 表名：ads_phs_drug
表结构：CREATE TABLE `ads_phs_drug` (
  `drug_id` varchar(32) NOT NULL COMMENT '药物 ID',
  `docid` int(11) DEFAULT NULL COMMENT '数字主键',
  `drug_name` json NOT NULL COMMENT '药物名称, List<Map>',
  `alias` json DEFAULT NULL COMMENT '别名, List<Map>',
  `dev_code` json DEFAULT NULL COMMENT '研发代码, List<Map>',
  `trade_name` json DEFAULT NULL COMMENT '商品名, List<Map>',
  `generic_name` json DEFAULT NULL COMMENT '通用名称, List<Map>',
  `is_nme` tinyint(1) DEFAULT NULL COMMENT '是否NME, New molecular entity',
  `is_first_in_class` tinyint(1) DEFAULT NULL COMMENT '是否First-in-class',
  `is_qidp` tinyint(1) DEFAULT NULL COMMENT '是否 Qualified Infectious Disease Product 合格传染病产品资格',
  `is_compound_medicine` tinyint(1) DEFAULT NULL COMMENT '是否复方',
  `biological_drug_source` varchar(32) DEFAULT NULL COMMENT '生物药来源 dict_type= BIOLOGICAL_DRUG_SOURCE',
  `express_system` varchar(32) DEFAULT NULL COMMENT '表达体系 dict_type=EXPRESS_SYSTEM',
  `registered_classification_cn` varchar(32) DEFAULT NULL COMMENT '中国注册分类',
  `null_target_reason` varchar(32) DEFAULT NULL COMMENT '无靶点原因 NOT_AVAILABLE/UNDEFINED',
  `wiki_link` varchar(1500) DEFAULT NULL COMMENT 'wiki 地址',
  `drugbank_id` json DEFAULT NULL COMMENT 'drugbank_id, List<String>',
  `kegg_id` json DEFAULT NULL COMMENT 'kegg_id, List<String>',
  `related_component` json DEFAULT NULL COMMENT '复方药的相关组分, List<String>',
  `drug_type` json DEFAULT NULL COMMENT '药物类型, List<String>',
  `originator_org_master_entity_id` json DEFAULT NULL COMMENT '原研机构, List<String>',
  `mechanism_action_id` json DEFAULT NULL COMMENT '作用机制 ID, List<String>',
  `target_id` json DEFAULT NULL COMMENT '靶点 id, List<String>',
  `atc_code` json DEFAULT NULL COMMENT 'ATC 代码，WHO发布的药物分类系统, List<String>',
  `antibody_drug_id` varchar(32) DEFAULT NULL COMMENT '抗体 ID',
  `antibody_type` varchar(32) DEFAULT NULL COMMENT '抗体类型',
  `linker_id` varchar(32) DEFAULT NULL COMMENT '连接子 id',
  `linker_number` varchar(32) DEFAULT NULL COMMENT '连接子数量',
  `payload_id` varchar(32) DEFAULT NULL COMMENT '载荷id',
  `dar` json DEFAULT NULL COMMENT '药物抗体比',
  `specific_site` tinyint(1) DEFAULT NULL COMMENT '是否定点偶联',
  `site_id` varchar(32) DEFAULT NULL COMMENT '位点id',
  `adc_reference` json DEFAULT NULL COMMENT 'ADC 参考信息',
  `target_moiety_type` json DEFAULT NULL COMMENT '靶向药物类型',
  `data_source` int(3) DEFAULT NULL COMMENT '数据来源',
  `genetic_material` varchar(32) DEFAULT NULL COMMENT '遗传物质, dict_type = V_GENETIC_MATERIAL',
  `delivery_system` json DEFAULT NULL COMMENT '递送系统, dict_type = V_DELIVERY_SYSTEM',
  `targeted_tissue` json DEFAULT NULL COMMENT '靶向组织, dict_type = V_TARGETED_TISSUE',
  `paired_region` json DEFAULT NULL COMMENT '识别区域, dict_type = V_PAIRED_REGION',
  `regulation_type` json DEFAULT NULL COMMENT '调控机制, dict_type = V_REGULATION_TYPE',
  `tech_platform` json DEFAULT NULL COMMENT '技术平台, dict_type = TECH_PLATFORM',
  `source_info_xna` json DEFAULT NULL COMMENT '核酸药物来源信息',
  `if_speculate` tinyint(1) DEFAULT NULL COMMENT '是否含有推测信息, 比如利用 WHO INN 推测药物结构',
  `profile` json DEFAULT NULL COMMENT '描述',
  `is_pathway` tinyint(1) DEFAULT NULL COMMENT '是否 pathway',
  `special_review` json DEFAULT NULL COMMENT '特殊审评 List<String>',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID List<String>',
  `active_org_master_entity_id` json DEFAULT NULL COMMENT '在研机构 List<String>',
  `global_highest_dev_status` varchar(32) DEFAULT NULL COMMENT '全球最高研发状态',
  `global_highest_dev_status_before_termination` varchar(32) DEFAULT NULL COMMENT '终止前全球最高研发状态',
  `highest_dev_status_cn` varchar(32) DEFAULT NULL COMMENT '中国最高研发状态',
  `highest_dev_status_before_termination_cn` varchar(32) DEFAULT NULL COMMENT '终止前中国最高研发状态',
  `first_approved_date` bigint(20) DEFAULT NULL COMMENT '首批时间',
  `first_approved_country` json DEFAULT NULL COMMENT '首批国家, List<String>',
  `first_approved_indication` json DEFAULT NULL COMMENT '首批适应症, List<String>',
  `research_disease` json DEFAULT NULL COMMENT '在研适应症, List<String>',
  `non_research_disease` json DEFAULT NULL COMMENT '非在研适应症, List<String>',
  `inactive_org_master_entity_id` json DEFAULT NULL COMMENT '非在研机构 ,List<String>',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域, List<String>',
  `approval_country` json DEFAULT NULL COMMENT '获批国家, List<String>',
  `research_country` json DEFAULT NULL COMMENT '研发国家, List<String>',
  `rnk` int(11) DEFAULT NULL COMMENT '同靶点药物排名',
  `disease_phase` json DEFAULT NULL COMMENT '药物适应症 pahse, List<Map>',
  `adc_count` int(11) DEFAULT NULL COMMENT 'adc 药物被关联的次数',
  `target_extend_id` varchar(32) DEFAULT NULL COMMENT '多靶点表ID  生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `has_leading_org_involved` tinyint(1) DEFAULT NULL COMMENT '是否有头部企业参与',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `data_status` varchar(10) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `original_drug_id` json DEFAULT NULL COMMENT '生物类似药',
  `created_by` varchar(255) DEFAULT NULL,
  `updated_by` varchar(255) DEFAULT NULL,
  `deal_related_org` json DEFAULT NULL COMMENT '交易涉及机构',
  `first_approved_date_cn` bigint(20) DEFAULT NULL COMMENT '中国首批时间',
  `moiety_target_id` json DEFAULT NULL COMMENT '抗体靶点ID',
  `payload_target_id` json DEFAULT NULL COMMENT '载荷靶点ID',
  `moiety_mechanism_action_id` json DEFAULT NULL COMMENT '抗体作用机制ID',
  `payload_mechanism_action_id` json DEFAULT NULL COMMENT '载荷作用机制D',
  `moiety_target_extend_id` varchar(32) DEFAULT NULL COMMENT '抗体靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `payload_target_extend_id` varchar(32) DEFAULT NULL COMMENT '载荷靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  PRIMARY KEY (`drug_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `docid` (`docid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='药物业务表'
示例数据：[{'drug_id': '0000717d1e7143dc94fd46c1755cd8e3', 'is_qidp': 'false', 'global_highest_dev_status': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'is_first_in_class': 'false', 'non_research_disease': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'originator_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]', 'created_ts': '1677735049000', 'drug_type': '["1151dbc710f64a85923dc05d4a5a0ba9"]', 'data_status': 'ACTIVE', 'drug_name': '[{"lang": "EN", "name": "JM023", "status": "ACTIVE"}]', 'research_country': '[{"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "c9e8fce7eb6b4bbd9cc66dc356017aab", "dev_status_time": {"time_trust_code": 7, "time_ts": 1669766400000}}]', 'created_by': 'data@patsnap.com', 'data_source': '10', 'updated_by': 'data@patsnap.com', 'dev_code': '[{"name": "AD20190509", "status": "ACTIVE"}]', 'is_pathway': 'false', 'disease_phase': '[{"disease_id": "25aa9dbd25714b36b8bcb9347d1b91d1", "highest_phase_cn": "c9e8fce7eb6b4bbd9cc66dc356017aab", "highest_phase_global": "c9e8fce7eb6b4bbd9cc66dc356017aab"}]', 'therapeutic_area': '["042cbe45c973477b957717ded29ef7b6"]', 'is_nme': 'false', 'updated_ts': '1735604387000', 'is_compound_medicine': 'false', 'docid': '36127', 'null_target_reason': 'UNDEFINED', 'highest_dev_status_cn': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'disease_id': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'inactive_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]'}, {'drug_id': '0000d4a23502459386f511f0dfdad0df', 'is_qidp': 'false', 'global_highest_dev_status': 'efd6215835394b07b046125e3175d3fe', 'is_first_in_class': 'false', 'first_approved_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be"]', 'drugbank_id': '["DB11606"]', 'non_research_disease': '["e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'originator_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'created_ts': '1633704418000', 'drug_type': '["4d2dcd3fc8b644db955f8cccefca280b"]', 'target_extend_id': '450cd6ab529c38d4b0ad05aaff0d5fd7', 'data_status': 'ACTIVE', 'first_approved_indication': '["07d4cf59dafc4a35840dbf53e136394a"]', 'drug_name': '[{"lang": "CN", "name": "舒索凝血素α", "source_info": [{"code": "国药准字SJ20240009", "normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "patsnap_id": "ea95955e04de20edd2a022ee3882a984", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"normalized_source_id": "c550fafe5544447091b21ca6c19f70f2", "source": "EMA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "スソクトコグ アルファ（遺伝子組換え）", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'mechanism_action_id': '["979b395f8c612b269b4c98663691de9d"]', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'research_country': '[{"country": "0dc5d896-7408-3c87-84c0-22e3d9b784be", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1414022400000}}, {"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1708387200000}}, {"country": "9a18968a-f130-3a00-80b6-8b9e2eec4838", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "676de5ba-893a-36bb-8683-c93306aaf769", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1711411200000}}, {"country": "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1461888000000}}, {"country": "3d57c904-23bf-3ee0-9924-83496c75b8ee", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "52d1b118-b540-37ba-9cb2-f5aff686bb10", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1679270400000}}, {"country": "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "665d1d12-3d14-3e05-8459-014864489671", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "672807de-6d33-3706-a350-c97e6ed7735e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1620950400000}}, {"country": "cf11da47-6a9f-3948-9d29-8a824f805638", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7cb930b-9b67-3639-97cd-dab2ce82da83", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "0e7802a9-bad3-33a3-98ae-ff755c717809", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "dc266be9-66b5-3c85-af35-ef210568f738", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "1b05c4d2-8156-3854-9898-c71e0077e3c6", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "bf460c70-eac8-3426-baa3-7e6c72bc0889", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "15d3c741-f4c4-35d8-9273-339b5972916e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "4ac42935-7005-3e0d-a0e9-698b15e3986b", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7693298-e9f4-3dfb-ad3e-fda6b7e59658", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "2f753928-f426-3cc1-9ea6-8c25f6a4d330", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1444348800000}}, {"country": "bb1d5b11-d9f8-31c4-872c-65a9fad8d193", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "6d64b019-4f80-31e9-b248-297aa588c950", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "00d7d9ab-3d75-3fa9-9849-2f715d69f010", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "027bd29d-069d-3fdf-aa1a-be891fbaae92", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}]', 'wiki_link': 'https://en.wikipedia.org/wiki/Susoctocog_alfa', 'created_by': 'data@patsnap.com', 'data_source': '10', 'rnk': '9', 'kegg_id': '["D10831"]', 'biological_drug_source': '5763f27b05ac432dafde44df27a4ec76', 'express_system': '6ce3b90730044258a81ab5a3e9288495', 'updated_by': 'youjia@patsnap.com', 'research_disease': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a"]', 'atc_code': '["7319cbc33cb0475a94bf687ed6634978"]', 'dev_code': '[{"name": "BAX 802", "status": "ACTIVE"}, {"name": "BAX-801", "status": "ACTIVE"}, {"name": "BAX-802", "status": "ACTIVE"}, {"name": "BAX801", "status": "ACTIVE"}, {"name": "OBI-1", "status": "ACTIVE"}, {"name": "SHP672", "status": "ACTIVE"}, {"name": "TAK 672", "status": "ACTIVE"}]', 'trade_name': '[{"lang": "EN", "name": "Obizur", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "JP", "name": "オビザー", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "CN", "name": "助因止", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "patsnap_id": "1c1403c1-b1e8-3014-96e8-1939c36cfecb", "patsnap_type": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "http://mp.weixin.qq.com/s?__biz=MzA5Njc0MTAxOQ==&mid=2650027443&idx=1&sn=71b7cef6c2070906937036501e33b9cc"}], "status": "ACTIVE"}, {"lang": "KR", "name": "오비주르주[서스옥토코그알파", "source_info": [{"code": "202300956", "normalized_source_id": "6f08ac4a5ca144f8b59de74187e41886", "source": "MFDS", "source_url": "https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202300956aupdateTs2024-06-10%2018:52:49.0b"}], "status": "ACTIVE"}]', 'active_org_master_entity_id': '["4099573c333dcbc48d8f398aee392060", "ad3caef0a55e98b5fc495d9921bf43e0", "b0b1d828ce0abb09b0567b191f02bb53", "f4bc92165e87f4758502c119ebc15574", "f6b3099a6af884bd6b51c208d8c47644", "3213232cf3774bc734def2420b679bb6"]', 'is_pathway': 'false', 'alias': '[{"lang": "EN", "name": "Antihemophilic Factor (Recombinant), Porcine Sequence", "source_info": [{"code": "BLA125512", "normalized_source_id": "f3bd4fd130ec4588971e9008b5010e32", "patsnap_id": "854204585a22558d8532e5de92e5d898", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "FDA_CBER"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor (recombinant) porcine sequence", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor porcine, B-domain truncated recombinant", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "PFVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine recombinant factor VIII B-domain truncated", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Recombinant porcine factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "RpfVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa (INN)", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'special_review': '["23d3523b7ece48ddacaddac53a66949d", "043a131d85994801b3617e822e7f87b3"]', 'disease_phase': '[{"disease_id": "71d86eb1f39c4e509b8da8fe4343bdd3", "highest_phase_before_ter_global": "9f31233bceb94d9796d3f3556f17ab13", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "e30a25b1033043c4adf00e944889533c", "highest_phase_before_ter_global": "f835774c48404593b64ef05369eb8eba", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "07d4cf59dafc4a35840dbf53e136394a", "highest_phase_cn": "efd6215835394b07b046125e3175d3fe", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "d1e154571f0a46f8b15f8997f3031fd1", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "18795373eb704b16936d51c793bbea01", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}]', 'therapeutic_area': '["c354b2ea74d349da99bef8388390c7d8", "5b1dfc2ca8564662860187aef864467d", "67034410be134e2bbb5b0930595b5e75"]', 'is_nme': 'false', 'updated_ts': '1737614304000', 'is_compound_medicine': 'false', 'docid': '4178', 'first_approved_date_cn': '1708387200000', 'target_id': '["3f888f3938b34a4ca124145b3fa1e229"]', 'highest_dev_status_cn': 'efd6215835394b07b046125e3175d3fe', 'approval_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be", "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "9a18968a-f130-3a00-80b6-8b9e2eec4838", "676de5ba-893a-36bb-8683-c93306aaf769", "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "3d57c904-23bf-3ee0-9924-83496c75b8ee", "52d1b118-b540-37ba-9cb2-f5aff686bb10", "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "665d1d12-3d14-3e05-8459-014864489671"]', 'disease_id': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a", "e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'if_speculate': 'false', 'inactive_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'first_approved_date': '1414022400000'}]
2025-02-26 22:33:29,398 - utils.logger - INFO - Structure for table ads_phs_ct retrieved: 表名：ads_phs_ct
表结构：CREATE TABLE `ads_phs_ct` (
  `clinical_trial_id` varchar(40) NOT NULL COMMENT '临床主键ID',
  `register_number` varchar(40) NOT NULL COMMENT '临床注册号',
  `data_source` varchar(20) NOT NULL COMMENT '数据源',
  `url` varchar(16383) NOT NULL COMMENT '临床链接URL',
  `org_master_entity_id` json DEFAULT NULL COMMENT '机构ID',
  `dev_status_org_master_entity_id` json DEFAULT NULL COMMENT '研发状态表机构ID',
  `sponsor_org_master_entity_id` json DEFAULT NULL COMMENT '主办机构ID',
  `collaborator_org_master_entity_id` json DEFAULT NULL COMMENT '合作机构ID',
  `drug_id` json DEFAULT NULL COMMENT '药物ID',
  `main_experimentation_drug_id` json DEFAULT NULL COMMENT '主要试验药物ID',
  `control_drug_id` json DEFAULT NULL COMMENT '对照药物ID',
  `dev_status_drug_id` json DEFAULT NULL COMMENT '研发状态表药物ID',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID',
  `condition_disease_id` json DEFAULT NULL COMMENT '疾病适应症ID',
  `dev_status_disease_id` json DEFAULT NULL COMMENT '研发状态表适应症ID',
  `target_id` json DEFAULT NULL COMMENT '靶点ID',
  `drug_target_id` json DEFAULT NULL COMMENT '药物靶点ID',
  `non_drug_target_id` json DEFAULT NULL COMMENT '非药物靶点ID',
  `endpoint_id` json DEFAULT NULL COMMENT '终点指标ID',
  `facility_id` json DEFAULT NULL COMMENT 'facility ID',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域',
  `brief_summary` text DEFAULT NULL COMMENT '方案摘要',
  `brief_title` text DEFAULT NULL COMMENT '标题',
  `brief_title_with_acronym` text DEFAULT NULL COMMENT '标题_acronym',
  `official_title` text DEFAULT NULL COMMENT '官方标题',
  `phase` json DEFAULT NULL COMMENT '临床阶段',
  `study_purpose` text DEFAULT NULL COMMENT '研究目的',
  `study_type` json DEFAULT NULL COMMENT '研究类型',
  `study_design` json DEFAULT NULL COMMENT '研究设计方案',
  `study_result` json DEFAULT NULL COMMENT '研究结果',
  `study_reference` json DEFAULT NULL COMMENT '研究引用',
  `study_identifier` json DEFAULT NULL COMMENT '研究identifier',
  `f_condition` json DEFAULT NULL COMMENT '适应症',
  `condition_text` text DEFAULT NULL COMMENT '适应症文本',
  `intervention` json DEFAULT NULL COMMENT '干预措施',
  `intervention_text` text DEFAULT NULL COMMENT '干预措施文本',
  `arm_intervention` json DEFAULT NULL COMMENT '分组干预措施',
  `arm_intervention_count` int(11) DEFAULT NULL COMMENT '分组数量',
  `single_or_multi` varchar(100) DEFAULT NULL COMMENT 'single_drug/multiple_drugs',
  `recruitment_status` json DEFAULT NULL COMMENT '招募状态',
  `expanded_access_status` json DEFAULT NULL COMMENT '招募状态：Available, No longer available, Temporarily not available, Approved for marketing',
  `recruitment_status_history` json DEFAULT NULL COMMENT '历史招募状态',
  `eligibility` json DEFAULT NULL COMMENT '实验要求的条件',
  `min_age` json DEFAULT NULL COMMENT '实验要求的最小年纪',
  `max_age` json DEFAULT NULL COMMENT '实验要求的最大年纪',
  `enrollment` json DEFAULT NULL COMMENT '受试者数目',
  `secondary_id` json DEFAULT NULL COMMENT 'secondary id',
  `normalized_secondary_id` json DEFAULT NULL COMMENT '标准化的secondary_id',
  `trial_registry` varchar(255) DEFAULT NULL COMMENT '实验注册号',
  `facility` json DEFAULT NULL COMMENT 'facility',
  `facility_count` int(11) DEFAULT NULL COMMENT 'facility count',
  `country` json DEFAULT NULL COMMENT '国家',
  `first_posted_date` json DEFAULT NULL COMMENT '首次公示日期',
  `last_update_posted_date` json DEFAULT NULL COMMENT '最近修改日期',
  `last_updated_at` json DEFAULT NULL COMMENT '数据更新日期',
  `start_date` json DEFAULT NULL COMMENT '实验开始日期',
  `completion_date` json DEFAULT NULL COMMENT '实验完成日期',
  `primary_completion_date` json DEFAULT NULL COMMENT '主要终点完成日期',
  `milestone_date` json DEFAULT NULL COMMENT '试验各项重要时间',
  `duration` bigint(20) DEFAULT NULL COMMENT '实验持续毫秒数 completion_date-start_date',
  `sponsor` json DEFAULT NULL COMMENT '申办/合作机构',
  `sponsor_funder_type` json DEFAULT NULL COMMENT '机构类型',
  `responsible_party` json DEFAULT NULL COMMENT '申办中心',
  `ethic_committee` json DEFAULT NULL COMMENT '法律伦理委员会',
  `central_contact` json DEFAULT NULL COMMENT '实验中心信息',
  `central_investigator` json DEFAULT NULL COMMENT '实验中心调查人信息',
  `result_contact` json DEFAULT NULL COMMENT 'result contact',
  `nih_funded_research_id` json DEFAULT NULL COMMENT '相关的NIH',
  `if_ct_result` int(11) DEFAULT NULL COMMENT '是否有临床结果',
  `if_iit` int(11) DEFAULT NULL COMMENT '是否iit公司',
  `if_primary_id` int(11) DEFAULT NULL COMMENT '是否主试验号',
  `primary_group_id` varchar(40) DEFAULT NULL COMMENT '主试验号',
  `group_id` json DEFAULT NULL COMMENT '多中心试验ID',
  `group_normalized_secondary_id` json DEFAULT NULL COMMENT '多中心试验secondary id',
  `group_registry` json DEFAULT NULL COMMENT '多中心registry',
  `group_country_code` json DEFAULT NULL COMMENT '多中心国家code',
  `group_country_count` int(11) DEFAULT NULL COMMENT '多中心国家数量',
  `why_stopped` text DEFAULT NULL COMMENT '终止原因',
  `outcome` json DEFAULT NULL COMMENT '终点指标',
  `adverse_event` json DEFAULT NULL COMMENT '不良事件',
  `link` json DEFAULT NULL COMMENT '相关链接',
  `keyword` json DEFAULT NULL COMMENT '关键字',
  `detailed_description` text DEFAULT NULL COMMENT '实验详情',
  `related_id` json DEFAULT NULL COMMENT '相关登记号',
  `record_number` varchar(255) DEFAULT NULL COMMENT '备案号',
  `acceptance_number` varchar(255) DEFAULT NULL COMMENT '临床申请受理号',
  `study_number` varchar(255) DEFAULT NULL COMMENT '试验方案编号',
  `study_version` varchar(255) DEFAULT NULL COMMENT '方案最新版本号',
  `version_date` json DEFAULT NULL COMMENT '版本日期',
  `if_combined_medication` varchar(255) DEFAULT NULL COMMENT '方案是否为联合用药',
  `has_dmc` int(11) DEFAULT NULL COMMENT '数据安全监查委员会（DMC）',
  `injury_insurance` int(11) DEFAULT NULL COMMENT '为受试者购买试验伤害保险',
  `if_dev_status_trial` tinyint(1) DEFAULT NULL COMMENT '是否进入研发状态表',
  `trial_tag` json DEFAULT NULL COMMENT '试验标签',
  `if_validation` tinyint(4) NOT NULL COMMENT '是否可用',
  `docid` int(11) NOT NULL AUTO_INCREMENT COMMENT '数字主键',
  `lang` varchar(10) NOT NULL COMMENT '语言',
  `data_status` varchar(20) NOT NULL COMMENT 'ACTIVE/DELETE',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `created_by` varchar(100) DEFAULT NULL COMMENT '创建人',
  `updated_by` varchar(100) DEFAULT NULL COMMENT '修改人',
  PRIMARY KEY (`clinical_trial_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `uk_docid` (`docid`),
  KEY `ads_phs_ct_rn_index` (`register_number`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin AUTO_INCREMENT=5665516 COMMENT='临床业务表'
示例数据：[{'drug_id': '["af371b70e86d416d9511a121dcdc703f", "46453eee210b4a859b10545f4fc28b73"]', 'main_experimentation_drug_id': '["af371b70e86d416d9511a121dcdc703f", "46453eee210b4a859b10545f4fc28b73"]', 'eligibility': '{"exclusion_criteria": "Exclusion criteria: Patients were excluded if they had any active concomitant malignancies,  symptomatic brain metastases, past history of severe allergic reactions to drugs,  interstitial pneumonia identified by chest X-ray, superior vena cava syndrome, or other serious complications, such as uncontrolled angina pectoris, myocardial infarction within 3 months, heart failure,  uncontrolled diabetes mellitus or hypertension, uncontrolled massive pleural  effusion or ascites.", "gender": "Both", "inclusion_criteria": "Inclusion criteria:"}', 'if_validation': '1', 'phase': '{"highest_normalized_phase_id": "7b79728539354f189772a4eab9cc9fff", "name": "Phase II", "normalized_phase_id": "7b79728539354f189772a4eab9cc9fff"}', 'last_update_posted_date': '{"time_trust_code": 7, "time_ts": 1697500800000}', 'recruitment_status_history': '[{"name": "Complete: follow-up complete", "name_text": "Complete: follow-up complete", "normalized_status": "Completed", "time_ts": 1692921600000}]', 'first_posted_date': '{"time_trust_code": 7, "time_ts": 1209600000000}', 'data_source': 'WHO', 'study_type': '{"name": "Interventional", "normalized_study_type": "Interventional", "normalized_study_type_id": "dad53f8616ce4e39ab0c6f4a6237e565"}', 'intervention_text': 'Patients  will receive an infusion of gemcitabine on days 1 and  8. They will also receive an infusion of carboplatin on day 8.', 'updated_by': 'data@patsnap.com', 'ethic_committee': '[{"status": "YES"}]', 'recruitment_status': '{"name": "Complete: follow-up complete", "name_text": "Complete: follow-up complete", "normalized_status": "Completed"}', 'outcome': '[{"description": "Response rate", "outcome_type": "Primary"}, {"description": "Safety,survival,toxicity, QOL", "outcome_type": "Secondary"}]', 'start_date': '{"date": {"time_trust_code": 7, "time_ts": 1093996800000}, "date_type": "Actual"}', 'condition_text': 'Non-small cell lung cancer', 'url': 'https://center6.umin.ac.jp/cgi-open-bin/ctr_e/ctr_view.cgi?recptno=R000001376', 'if_ct_result': '0', 'disease_id': '["e2fd9bda4aeb4a7b9fa53a2560126d24", "3beea980d93a4cc0abc864e27514601c", "6c9886cb25eb45faba70292cee1f5518"]', 'group_registry': '["JPRN"]', 'completion_date': '{"date": {"time_trust_code": 7, "time_ts": 1222819200000}, "date_type": "Actual"}', 'group_country_code': '["JP"]', 'country': '[{"country_code": "JP", "name": "Japan", "normalized_id": "676de5ba-893a-36bb-8683-c93306aaf769"}]', 'f_condition': '["Non-small cell lung cancer"]', 'official_title': 'Gemcitabine-carboplatin for elderly patients with advanced non-small cell lung cancer : a phase II study of the Niigata Lung Cancer Treatment Group - Gemcitabine-carboplatin for elderly patients with advanced non-small cell lung cancer : a phase II study of the Niigata Lung Cancer Treatment Group', 'created_ts': '1716295374000', 'data_status': 'ACTIVE', 'group_country_count': '1', 'central_contact': '[{"address": "1-754 Asahimachi-Dori,Niigata City, Niigata 951-8520", "affiliation": "Niigata University Medical and Dental Hospital Bioscience Medical Research Center", "email": "hy0522@med.niigata-u.ac.jp", "lastname": "Hirohisa Yoshizawa", "phone": "025-227-2517"}]', 'created_by': 'data@patsnap.com', 'study_result': '[{"date_completed": "2008-10-01", "date_first_publication": "1900-01-01", "yes_no": "Yes"}]', 'last_updated_at': '{"time_trust_code": 7, "time_ts": 1697500800000}', 'register_number': 'JPRN-UMIN000001131', 'intervention': '[{"name": "Patients will receive an infusion of gemcitabine on days 1 and 8. They will also receive an infusion of carboplatin on day 8.", "type": "drug"}]', 'if_primary_id': '1', 'sponsor': '[{"name": "Niigata Lung Cancer Treatment Group", "sponsor_type": "Primary"}]', 'primary_group_id': 'JPRN-UMIN000001131', 'if_iit': '1', 'brief_title': 'Gemcitabine-carboplatin for elderly patients with advanced non-small cell lung cancer : a phase II study of the Niigata Lung Cancer Treatment Group', 'duration': '128822400000', 'clinical_trial_id': '00000a4e3d8e528444ddeaa22a3e4a55', 'therapeutic_area': '["62eaee6d9ee44410b8aca59dfc7408e9", "948c9548c2ed46b5865b8693f7f96604"]', 'lang': 'EN', 'trial_registry': 'JPRN', 'updated_ts': '1721428211000', 'condition_disease_id': '["3beea980d93a4cc0abc864e27514601c"]', 'docid': '272226', 'group_normalized_secondary_id': '[{"id_type": "secondary_id", "id_value": "JPRN-UMIN000001131", "url": "https://center6.umin.ac.jp/cgi-open-bin/ctr_e/ctr_view.cgi?recptno=R000001376"}]', 'enrollment': '[{"enrollment": "35"}]', 'max_age': '{"age_text": "Not applicable"}', 'arm_intervention_count': '0', 'group_id': '["JPRN-UMIN000001131"]', 'study_design': '{"allocation": "Non-randomized", "allocation_normalized_id": "f2deb94314e73728bc13bedb47273b6b", "intervention_model": "Single arm", "intervention_model_normalized_id": "db8f0c23aeab3b7492d2e2619bff6fc7", "other": "Single arm Non-randomized"}', 'min_age': '{"age": "70", "age_text": "70years-old", "age_unit": "years-old"}'}, {'drug_id': '["bd5ef80602de4f9499e91dff50374a83"]', 'main_experimentation_drug_id': '["bd5ef80602de4f9499e91dff50374a83"]', 'eligibility': '{"exclusion_criteria": "Exclusion criteria: <br>1. Subject with anemia from cause other than MPN-associated MF or JAK2 inhibitor therapy (eg, iron deficiency, vitamin B12 and/or folate deficiencies, autoimmune or hemolytic anemia, infection, or any type of known clinically significant bleeding or sequestration).<br>2. Subject use of hydroxyurea, immunomodulatory compounds such as pomalidomide, thalidomide, ESAs, androgenic steroids or other drugs with potential effects on hematopoiesis = 8 weeks immediately up to the date of randomization.<br>a. Systemic corticosteroids are permitted for nonhematological conditions providing the subject is receiving a constant dose equivalent to = 10 mg prednisone for the 4 weeks immediately up to randomization.<br>b. Iron chelation therapy (ICT) is permitted providing the subject is receiving a stable dose for the 8 weeks immediately up to randomization.<br>3. Subject with any of the following laboratory abnormalities at screening:<br>a. Neutrophils: < 1 x 10^9/L<br>b. White blood count (WBC): > 100 x 10^9/L<br>c. Platelets: the lowest allowable level as approved for the concomitant JAK2 inhibitor but not < 25 x 10^9/L or > 1000 x 10^9/L<br>d. Peripheral blood myeloblasts: > 5%<br>e. Estimated glomerular filtration rate: < 30 mL/min/1.73 m2 (via the 4-variable modification of diet in renal disease [MDRD] formula) or nephrotic subjects (eg, urine albumin-to-creatinine ratio > 3500 mg/g)<br>f. Aspartate aminotransferase (AST) or alanine aminotransferase: (ALT) > 3.0 x upper limit of normal (ULN)<br>g. Direct bilirubin: = 2 x ULN<br>   - Higher levels are acceptable if these can be attributed to active red blood cell precursor destruction within the bone marrow (eg, ineffective erythropoiesis)<br>4. Subject with uncontrolled hypertension, defined as repeated elevations of systolic blood pressure = 140 mmHg or diastolic blood pressure = 90 mmHg, that is not resolved at the time of randomization.<br>5. Subject with prior history of malignancies, other than disease under study, unless the subject has been free of the disease for = 3 years. However, subject with the following history/concurrent conditions is allowed:<br>a. Basal or squamous cell carcinoma of the skin<br>b. Carcinoma in situ of the cervix<br>c. Carcinoma in situ of the breast<br>d. Incidental histologic finding of prostate cancer (T1a or T1b using the tumor, nodes, metastasis [TNM] clinical staging system)<br>6. Subject with prior hematopoietic cell transplant or subject anticipated to receive a hematopoietic cell transplant during the 24 weeks from the date of randomization.<br>7. Subject with stroke, myocardial infarction, deep venous thrombosis, pulmonary or arterial embolism within 6 months immediately up to the date of randomization.<br>8. Subject with major surgery within 2 months up to the date of randomization. Subject must have completely recovered from any previous surgery immediately up to the date of randomization.<br>9. Subject with a major bleeding event (defined as symptomatic bleeding in a critical area or organ and/or bleeding causing a decrease in Hgb of = 2 g/dL or leading to transfusion of = 2 units of packed red cells) in the last 6 months prior to the date of randomization.<br>10. Subject with inadequately controlled heart disease and/or have a known left ventricular ejection fraction < 35%.<br>11. Subject with uncontrolled systemic fungal, bacterial, or viral infection (defined as ongoing signs/symptoms related to the infection without improvement despite appropriate antibiotics, antiviral therapy, and/or other treatment).<br>12. Subject wi", "gender": "Both", "inclusion_criteria": "Inclusion criteria: <br>1. Subject is =18 years of age at the time of signing the informed consent form (ICF).<br>2. Subject has a diagnosis of primary myelofibrosis (PMF) according to the 2016 World Health Organization (WHO) criteria or diagnosis of post-ET or post-PV myelofibrosis according to the IWG-MRT 2007 criteria, confirmed by the most recent local pathology report.<br>3. Subject is requiring RBC transfusions as defined as:<br>a. Average RBC-transfusion frequency: 4 to 12 RBC units/12 weeks immediately up to randomization. There must be no interval > 6 weeks (42 days) without = 1 RBC transfusion.<br>b. RBC transfusions are scored in determining eligibility when given for treatment of:<br>- Symptomatic (ie, fatigue or shortness of breath) anemia with a pretransfusion Hgb = 9.5 g/dL or<br>- Asymptomatic anemia with a pretransfusion Hgb = 7 g/dL<br>c. RBC transfusions given for worsening of anemia due to bleeding or infections are not scored in determining eligibility.<br>4. Subjects on continuous (eg, absent of dose interruptions lasting = 2 consecutive weeks) JAK2 inhibitor therapy as approved in the country of the study site for the treatment for MPN-associated MF as part of their standard-of-care therapy for at least 32 weeks, on stable daily dose for at least 16 weeks immediately up to the date of randomization and anticipated to be on a stable daily dose of that JAK2 inhibitor for at least 24 weeks after randomization.<br>5. Subject has an Eastern Cooperative Oncology Group (ECOG) performance score of = 2.<br>6. A female of childbearing potential (FCBP) for this study is defined as a female who: 1) has achieved menarche at some point, 2) has not undergone a hysterectomy or bilateral oophorectomy or 3) has not been naturally postmenopausal (amenorrhea following cancer therapy does not rule out childbearing potential) for at least 24 consecutive months (eg, has had menses at any time in the preceding 24 consecutive months). FCBP participating in the study must:<br>a. Have 2 negative pregnancy tests as verified by the Investigator prior to starting study therapy. She must agree to ongoing pregnancy testing during the study, and after end of IP. This applies even if the subject practices true abstinence* from heterosexual contact.<br>b. Either commit to true abstinence* from heterosexual contact (which must be reviewed on a monthly basis and source documented) or agree to use, and be able to comply with, effective contraception** without interruption, 28 days prior to starting IP, during the study therapy (including dose interruptions), and for 12 weeks (approximately 5 times the mean terminal half-life of IP based on multiple-dose  pharmacokinetics [PK] data) after discontinuation of study therapy.<br>7. Male subjects must:<br>Practice true abstinence* (which must be reviewed on a monthly basis) or agree to use a condom during sexual contact with a pregnant female or a female of childbearing potential** while participating in the study, during dose interruptions and for at least 12 weeks (approximately 5 times the mean terminal half-life of IP based on multiple-dose PK data) following IP discontinuation, even if he has undergone a successful vasectomy<br>* True abstinence is acceptable when it is in line with the preferred and usual lifestyle of the subject. [Periodic abstinence (eg, calendar, ovulation, symptothermal, postovulation methods) and withdrawal are not acceptable methods of contraception.]<br>** Agreement to use highly effective methods of contraception that alone or in combination resu"}', 'if_validation': '1', 'secondary_id': '[{"id_field": "secondary_id", "id_value": ["ACE-536-MF-002;2020-000607-36-DE"]}, {"id_field": "bridge_id", "id_value": ["EUCTR2020-000607-36-DE"]}]', 'phase': '{"highest_normalized_phase_id": "f835774c48404593b64ef05369eb8eba", "name": "Human pharmacology (Phase I): noTherapeutic exploratory (Phase II): noTherapeutic confirmatory - (Phase III): yesTherapeutic use (Phase IV): no", "normalized_phase_id": "f835774c48404593b64ef05369eb8eba"}', 'last_update_posted_date': '{"time_trust_code": 7, "time_ts": 1710201600000}', 'recruitment_status_history': '[{"name": "Not Recruiting", "name_text": "Not Recruiting", "normalized_status": "Not yet recruiting"}]', 'first_posted_date': '{"time_trust_code": 7, "time_ts": 1610064000000}', 'data_source': 'WHO', 'normalized_secondary_id': '[{"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-DE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}]', 'study_type': '{"name": "Interventional clinical trial of medicinal product", "normalized_study_type": "Interventional", "normalized_study_type_id": "dad53f8616ce4e39ab0c6f4a6237e565"}', 'intervention_text': '<br>Trade Name: Reblozyl<br>Product Name: Luspatercept<br>Product Code: ACE-536 (BMS-986346)<br>Pharmaceutical Form: Powder for solution for injection<br>INN or Proposed INN: Luspatercept<br>CAS Number: 1373715-00-4<br>Current Sponsor code: ACE-536<br>Other descriptive name: LUSPATERCEPT<br>Concentration unit: mg milligram(s)<br>Concentration type: equal<br>Concentration number: 25-<br>Pharmaceutical form of the placebo: Solution for injection<br>Route of administration of the placebo: Subcutaneous use<br><br>Trade Name: Reblozyl<br>Product Name: Luspatercept <br>Product Code: ACE-536 (BMS-986346)<br>Pharmaceutical Form: Powder for solution for injection<br>INN or Proposed INN: Luspatercept<br>CAS Number: 1373715-00-4<br>Current Sponsor code: ACE-536<br>Other descriptive name: LUSPATERCEPT<br>Concentration unit: mg milligram(s)<br>Concentration type: equal<br>Concentration number: 75-<br>Pharmaceutical form of the placebo: Solution for injection<br>Route of administration of the placebo: Subcutaneous use<br><br>', 'updated_by': 'data@patsnap.com', 'org_master_entity_id': '["8eca2b1e039c19dfb9a0bf168b2f667c"]', 'ethic_committee': '[{"status": "Approved"}]', 'recruitment_status': '{"name": "Not Recruiting", "name_text": "Not Recruiting", "normalized_status": "Not yet recruiting"}', 'single_or_multi': 'single_drug', 'outcome': '[{"description": "Main Objective: To evaluate the efficacy of luspatercept compared with placebo for the treatment of anemia in subjects with myeloproliferative neoplasm (MPN)-associated myelofibrosis (MF) with concomitant JAK2 inhibitor therapy and who require red blood cell transfusions.;Secondary Objective: - To evaluate additional efficacy parameters of luspatercept compared with placebo;<br>- To evaluate the the safety of luspatercept compared to placebo in subjects with MPN-associated MF as measured by the frequency and severity of  adverse events (AEs), serious adverse events (SAEs), antidrug antibodies (ADA), and transformation to blast phase;<br>- To evaluate pharmacokinetics (PK) for luspatercept in MPN-associated MF.;Primary end point(s): Proportion of subjects who become RBC transfusion free during any consecutive 12-week period <br>;Timepoint(s) of evaluation of this end point: Any consecutive rolling” 12-week period starting from randomization up to and including Week 24", "outcome_type": "Primary"}, {"description": "Secondary end point(s): 1) Proportion of subjects who become RBC-transfusion free over any consecutive 16-week period<br>2) Maximum duration of RBC-TI response<br>3) Proportion of subjects who reduce their transfusion burden by = 50% and by = 4 units from baseline over any consecutive 12-week period <br>4) Maximum duration of when subjects reduce their transfusion burden by = 50% and by = 4 units from baseline over any consecutive 12-week period <br>5)Proportion of subjects who become RBC-transfusion free over any consecutive 12-week period<br>6) Proportion of subjects who become RBC-transfusion free over any consecutive 16-week period <br>7) Mean change in transfusion burden (RBC units) from baseline <br>8) Cumulative response duration for subjects achieving multiple episodes of RBC-TI 12<br>9) Proportion of subjects achieving a mean Hgb increase = 1 g/dL from baseline over any consecutive 12-week period in absence of RBC transfusions<br>10) Change in serum ferritin from baseline.;Timepoint(s) of evaluation of this end point: 1)Any consecutive rolling” 16-week period starting from randomization up to and including Week 24<br>2)Randomization up to end of treatment<br>3)Randomization up to and including Week 24<br>4)Randomization up to end of treatment<br>5)Any consecutive rolling” 12-week period from randomization up to end of treatment<br>6)Any consecutive rolling” 16-week period from randomization up to end of treatment<br>7)Randomization up to and including Week 24<br>8)Randomization up to end of treatment<br>9)Any consecutive rolling” 12-week period starting from randomization up to and including Week 24; Randomization up to end<br>of treatment<br>10)Randomization up to and including Week 24; Randomization up to end of treatment", "outcome_type": "Secondary"}]', 'start_date': '{"date": {"time_trust_code": 7, "time_ts": 1622678400000}, "date_type": "Actual"}', 'condition_text': 'Anemia associated with myeloproliferative neoplasm (MPN)-associated myelofibrosis (MF) <br>MedDRA version: 20.0Level: PTClassification code 10077161Term: Primary myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.0Level: LLTClassification code 10074689Term: Post polycythemia vera myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.0Level: LLTClassification code 10074690Term: Post essential thrombocythemia myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.0Level: LLTClassification code 10074692Term: Post essential thrombocythaemia myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 21.1Level: LLTClassification code 10074691Term: Post polycythaemia vera myelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps) <br>MedDRA version: 20.0Level: PTClassification code 10028537Term: MyelofibrosisSystem Organ Class: 10029104 - Neoplasms benign, malignant and unspecified (incl cysts and polyps);Therapeutic area: Diseases [C] - Blood and lymphatic diseases [C15]', 'url': 'https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36', 'if_ct_result': '1', 'disease_id': '["1779aedf6a9744f2a29ddc1feb89f231", "fd6b927bd92044d7b240e09317dac79c", "91e18b79318b46699a0d70e6957aaa76"]', 'group_registry': '["CTIS", "ClinicalTrials.gov", "EUCTR", "JPRN"]', 'group_country_code': '["AR", "AT", "AU", "BE", "CA", "CH", "CL", "CN", "CO", "CZ", "DE", "ES", "FR", "GB", "GR", "HK,CN", "HU", "IE", "IL", "IT", "JP", "KR", "LB", "NL", "PL", "RO", "RU", "US"]', 'country': '[{"country_code": "RU", "name": "Russian Federation", "normalized_id": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312"}, {"country_code": "RO", "name": "Romania", "normalized_id": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766"}, {"country_code": "HK,CN", "name": "Hong Kong", "normalized_id": "ee96fb71-2762-3fed-a869-ba2761ce8cc3"}, {"country_code": "HU", "name": "Hungary", "normalized_id": "184959bf-87b7-3479-827e-d53d6c70ebd4"}, {"country_code": "US", "name": "United States", "normalized_id": "0dc5d896-7408-3c87-84c0-22e3d9b784be"}, {"country_code": "CZ", "name": "Czechia", "normalized_id": "bf2107a8-40c7-303a-b4d5-7c28d3903f02"}, {"country_code": "JP", "name": "Japan", "normalized_id": "676de5ba-893a-36bb-8683-c93306aaf769"}, {"country_code": "GB", "name": "United Kingdom", "normalized_id": "672807de-6d33-3706-a350-c97e6ed7735e"}, {"country_code": "ES", "name": "Spain", "normalized_id": "dc266be9-66b5-3c85-af35-ef210568f738"}, {"country_code": "GR", "name": "Greece", "normalized_id": "a9ac313e-6b2c-39ce-b83b-3ec5bf1760ff"}, {"country_code": "CA", "name": "Canada", "normalized_id": "cf11da47-6a9f-3948-9d29-8a824f805638"}, {"country_code": "AT", "name": "Austria", "normalized_id": "6efc9b0c-3cae-3f31-997d-ad35651f6e74"}, {"country_code": "NL", "name": "Netherlands", "normalized_id": "bf460c70-eac8-3426-baa3-7e6c72bc0889"}, {"country_code": "CZ", "name": "Czech Republic", "normalized_id": "bf2107a8-40c7-303a-b4d5-7c28d3903f02"}, {"country_code": "BE", "name": "Belgium", "normalized_id": "61238041-bc83-3404-a7b4-d7d38443f6b5"}, {"country_code": "IE", "name": "Ireland", "normalized_id": "b7fd90b0-e7ac-3861-bfdb-762da5fc20be"}, {"country_code": "KR", "name": "Korea, Republic of", "normalized_id": "52d1b118-b540-37ba-9cb2-f5aff686bb10"}, {"country_code": "PL", "name": "Poland", "normalized_id": "15d3c741-f4c4-35d8-9273-339b5972916e"}, {"country_code": "IT", "name": "Italy", "normalized_id": "1b05c4d2-8156-3854-9898-c71e0077e3c6"}, {"country_code": "IL", "name": "Israel", "normalized_id": "95c67304-766d-3248-a52e-759791c1118b"}, {"country_code": "AU", "name": "Australia", "normalized_id": "ecc919b1-c2b7-3740-bfa7-7cda77176d07"}, {"country_code": "FR", "name": "France", "normalized_id": "d75944da-2a69-3c58-82a0-c8138ec47d50"}, {"country_code": "DE", "name": "Germany", "normalized_id": "0e7802a9-bad3-33a3-98ae-ff755c717809"}]', 'f_condition': '["Anemia associated with myeloproliferative neoplasm (MPN)-associated myelofibrosis (MF)"]', 'official_title': 'A PHASE 3, DOUBLE-BLIND, RANDOMIZED STUDY TO COMPARE THE EFFICACY AND SAFETY OF LUSPATERCEPT (ACE-536) VERSUS PLACEBO IN SUBJECTS WITH MYELOPROLIFERATIVE NEOPLASM-ASSOCIATED MYELOFIBROSIS ON CONCOMITANT JAK2 INHIBITOR THERAPY AND WHO REQUIRE RED BLOOD CELL TRANSFUSIONS - INDEPENDENCE', 'created_ts': '1716313995000', 'data_status': 'ACTIVE', 'group_country_count': '28', 'central_contact': '[{"address": "Parc de l\'Alliance - Avenue de Finlande, 4", "affiliation": "Bristol-Myers Squibb International Corporation", "email": "Clinical.Trials@bms.com", "firstname": "GSM-CT"}]', 'created_by': 'data@patsnap.com', 'sponsor_org_master_entity_id': '["8eca2b1e039c19dfb9a0bf168b2f667c"]', 'study_result': '[{"adverse_event": "No results available", "baseline_char": "No results available", "date_first_publication": "1900-01-01", "outcome_measure": "No results available", "participant_flow": "No results available", "summary": "A PHASE 3, DOUBLE-BLIND, RANDOMIZED STUDY TO COMPARE THE EFFICACY AND SAFETY OF LUSPATERCEPT (ACE-536) VERSUS PLACEBO IN SUBJECTS WITH MYELOPROLIFERATIVE NEOPLASM-ASSOCIATED MYELOFIBROSIS ON CONCOMITANT JAK2 INHIBITOR THERAPY AND WHO REQUIRE RED BLOOD CELL TRANSFUSIONS"}]', 'last_updated_at': '{"time_trust_code": 7, "time_ts": 1710201600000}', 'register_number': 'EUCTR2020-000607-36-BE', 'intervention': '[{"other_name": ["LUSPATERCEPT", "ACE-536", "ACE-536 (BMS-986346)", "Luspatercept", "Reblozyl"], "single_or_multi": "single_drug", "type": "drug"}, {"other_name": ["LUSPATERCEPT", "ACE-536", "ACE-536 (BMS-986346)", "Luspatercept", "Reblozyl"], "single_or_multi": "single_drug", "type": "drug"}]', 'if_primary_id': '0', 'sponsor': '[{"name": "Celgene Corporation", "sponsor_type": "Primary"}]', 'primary_group_id': 'NCT04717414', 'if_iit': '0', 'brief_title': 'A study to evaluate the benefit and safety of Luspatercept (ACE-536) in adults with myeloproliferative neoplasm-associated myelofibrosis on concomitant JAK2 inhibitor therapy and who require red blood cell transfusions', 'adverse_event': '[{"description": "No results available"}]', 'clinical_trial_id': '00000dae8054234e332255832ed29e23', 'therapeutic_area': '["5b1dfc2ca8564662860187aef864467d"]', 'lang': 'EN', 'trial_registry': 'EUCTR', 'updated_ts': '1716556724000', 'condition_disease_id': '["91e18b79318b46699a0d70e6957aaa76"]', 'docid': '1017978', 'group_normalized_secondary_id': '[{"id_type": "secondary_id", "id_value": "CTIS2023-507890-17-00", "url": "https://euclinicaltrials.eu/search-for-clinical-trials/?lang=en&EUCT=2023-507890-17-00"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-AT", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-BE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-CZ", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-DE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-FR", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-GR", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-HU", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-IE", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-IT", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "EUCTR2020-000607-36-RO", "url": "https://www.clinicaltrialsregister.eu/ctr-search/search?query=eudract_number:2020-000607-36"}, {"id_type": "secondary_id", "id_value": "JPRN-jRCT2071200083", "url": "https://jrct.niph.go.jp/latest-detail/jRCT2071200083"}, {"id_type": "secondary_id", "id_value": "NCT04717414", "url": "https://clinicaltrials.gov/study/NCT04717414"}]', 'target_id': '["471b7ac440a64d3cbf2d5d01f274f7b5"]', 'enrollment': '[{"enrollment": "309", "enrollment_type": "Date trial authorised"}]', 'arm_intervention_count': '0', 'group_id': '["CTIS2023-507890-17-00", "EUCTR2020-000607-36-AT", "EUCTR2020-000607-36-BE", "EUCTR2020-000607-36-CZ", "EUCTR2020-000607-36-DE", "EUCTR2020-000607-36-FR", "EUCTR2020-000607-36-GR", "EUCTR2020-000607-36-HU", "EUCTR2020-000607-36-IE", "EUCTR2020-000607-36-IT", "EUCTR2020-000607-36-RO", "JPRN-jRCT2071200083", "NCT04717414"]', 'study_design': '{"allocation": "Randomised", "allocation_normalized_id": "d0bcdd909ab63ff9a996ccd91f90d2bb", "intervention_model": "Parallel group", "intervention_model_normalized_id": "c028a05a817a3315a9784fa1f0d815dd", "masking": "Double blind", "masking_normalized_id": "d909d38d705c375386dd86e611a82f5b", "other": "Controlled: yes Randomised: yes Open: no Single blind: no Double blind: yes Parallel group: yes Cross over: no Other: no If controlled, specify comparator, Other Medicinial Product: no Placebo: yes Other: no Number of treatment arms in the trial: 2"}'}]
2025-02-26 22:33:50,070 - utils.logger - INFO - Generated SQL Response: content="SELECT \n  ct.clinical_trial_id\nFROM ads_phs_drug AS d\nJOIN ads_phs_ct AS ct \n  ON JSON_CONTAINS(ct.drug_id, JSON_QUOTE(d.drug_id)) = 1\nWHERE JSON_SEARCH(d.drug_name, 'one', '索托拉西布', NULL, '$[*].name') IS NOT NULL\nORDER BY ct.created_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1189, 'prompt_tokens': 18897, 'total_tokens': 20086, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 1088, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-bb86245c-f241-4ebf-83a0-3f8396aa53e5-0' usage_metadata={'input_tokens': 18897, 'output_tokens': 1189, 'total_tokens': 20086, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1088}}
2025-02-26 22:33:50,073 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'sql': "SELECT    ct.clinical_trial_id FROM ads_phs_drug AS d JOIN ads_phs_ct AS ct    ON JSON_CONTAINS(ct.drug_id, JSON_QUOTE(d.drug_id)) = 1 WHERE JSON_SEARCH(d.drug_name, 'one', '索托拉西布', NULL, '$[*].name') IS NOT NULL ORDER BY ct.created_ts DESC LIMIT 5"}
2025-02-26 22:33:50,074 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:33:50,075 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:33:50,076 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'tables': ['ads_phs_drug', 'ads_phs_ct'], 'sql': "SELECT    ct.clinical_trial_id FROM ads_phs_drug AS d JOIN ads_phs_ct AS ct    ON JSON_CONTAINS(ct.drug_id, JSON_QUOTE(d.drug_id)) = 1 WHERE JSON_SEARCH(d.drug_name, 'one', '索托拉西布', NULL, '$[*].name') IS NOT NULL ORDER BY ct.created_ts DESC LIMIT 5"}
2025-02-26 22:33:50,078 - utils.logger - INFO - Executing query: SELECT    ct.clinical_trial_id FROM ads_phs_drug AS d JOIN ads_phs_ct AS ct    ON JSON_CONTAINS(ct.drug_id, JSON_QUOTE(d.drug_id)) = 1 WHERE JSON_SEARCH(d.drug_name, 'one', '索托拉西布', NULL, '$[*].name') IS NOT NULL ORDER BY ct.created_ts DESC LIMIT 5
2025-02-26 22:33:53,889 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'sql': "SELECT    ct.clinical_trial_id FROM ads_phs_drug AS d JOIN ads_phs_ct AS ct    ON JSON_CONTAINS(ct.drug_id, JSON_QUOTE(d.drug_id)) = 1 WHERE JSON_SEARCH(d.drug_name, 'one', '索托拉西布', NULL, '$[*].name') IS NOT NULL ORDER BY ct.created_ts DESC LIMIT 5", 'query_result': [{'clinical_trial_id': '5e9559585a25839a5a5e88a93229983a'}, {'clinical_trial_id': '25a802a35a5849ed85032e889a5d425d'}, {'clinical_trial_id': '2529ad048e2029d5aea5e5e9402805e3'}, {'clinical_trial_id': '0a2092e22e99e38aa028d2452222d098'}, {'clinical_trial_id': '92d43a9ee28a9a9452535e4e025922a5'}]}
2025-02-26 22:33:53,890 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:33:53,892 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:33:53,893 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'sql': "SELECT    ct.clinical_trial_id FROM ads_phs_drug AS d JOIN ads_phs_ct AS ct    ON JSON_CONTAINS(ct.drug_id, JSON_QUOTE(d.drug_id)) = 1 WHERE JSON_SEARCH(d.drug_name, 'one', '索托拉西布', NULL, '$[*].name') IS NOT NULL ORDER BY ct.created_ts DESC LIMIT 5", 'query_result': [{'clinical_trial_id': '5e9559585a25839a5a5e88a93229983a'}, {'clinical_trial_id': '25a802a35a5849ed85032e889a5d425d'}, {'clinical_trial_id': '2529ad048e2029d5aea5e5e9402805e3'}, {'clinical_trial_id': '0a2092e22e99e38aa028d2452222d098'}, {'clinical_trial_id': '92d43a9ee28a9a9452535e4e025922a5'}]}
2025-02-26 22:34:00,721 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？', 'sql': "SELECT    ct.clinical_trial_id FROM ads_phs_drug AS d JOIN ads_phs_ct AS ct    ON JSON_CONTAINS(ct.drug_id, JSON_QUOTE(d.drug_id)) = 1 WHERE JSON_SEARCH(d.drug_name, 'one', '索托拉西布', NULL, '$[*].name') IS NOT NULL ORDER BY ct.created_ts DESC LIMIT 5", 'answer': '以下是整理后的临床试验ID列表：\n\n1. 5e9559585a25839a5a5e88a93229983a  \n2. 25a802a35a5849ed85032e889a5d425d  \n3. 2529ad048e2029d5aea5e5e9402805e3  \n4. 0a2092e22e99e38aa028d2452222d098  \n5. 92d43a9ee28a9a9452535e4e025922a5'}
2025-02-26 22:34:00,722 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:35:30,344 - utils.logger - INFO - 更新QA对: 帮我查下药物索托拉西布的ID，并通过药物ID查找临床试验中试验药物是所托拉西部的临床记录，返回临床试验ID？
2025-02-26 22:38:20,962 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:38:20,963 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}
2025-02-26 22:38:23,473 - utils.logger - INFO - No similar question found
2025-02-26 22:38:23,475 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:38:23,476 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'answer': ''}}
2025-02-26 22:38:23,478 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:38:23,478 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'answer': ''}
2025-02-26 22:38:23,481 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 22:38:39,947 - utils.logger - INFO - JSON解析失败: Expecting ',' delimiter: line 2 column 36 (char 37)
2025-02-26 22:38:39,948 - utils.logger - INFO - 原始内容: {
  "intent": "查询专利延期记录，其中需要筛选出延长类型为"PTE"并且关联的药物字段不为空的记录，返回的字段包括专利ID、关联的药物ID以及延长类型。",
  "tables": ["ads_phs_patent_extension"]
}
2025-02-26 22:38:39,949 - utils.logger - INFO - Analyzed user intent: {'error': '无法解析LLM响应', 'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}
2025-02-26 22:38:39,950 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:38:39,951 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:38:39,952 - utils.logger - INFO - generate_sql input: {'error': '无法解析LLM响应', 'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}
2025-02-26 22:38:39,954 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:38:39,955 - utils.logger - INFO - execute_sql input: {'error': '未找到相关表'}
2025-02-26 22:38:39,956 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:38:39,957 - utils.logger - INFO - summarize_sql_result input: {'error': '无有效的SQL语句'}
2025-02-26 22:38:47,983 - utils.logger - INFO - Summarized SQL result: {'original_input': '', 'sql': '', 'answer': '以下是整理后的查询结果展示：\n\n─────────────────────────────  \n查询结果：无数据  \n─────────────────────────────\n\n没有查询到任何数据。'}
2025-02-26 22:38:47,984 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:40:02,464 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:40:02,465 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}
2025-02-26 22:40:04,637 - utils.logger - INFO - No similar question found
2025-02-26 22:40:04,638 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:40:04,640 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'answer': ''}}
2025-02-26 22:40:04,642 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:40:04,642 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'answer': ''}
2025-02-26 22:40:04,645 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 22:41:15,884 - utils.logger - INFO - Analyzed user intent: {'intent': '查询专利延期数据，筛选出那些延期类型为PTE并且其关联药物不为空的专利记录，返回专利ID、关联的药物ID以及延期类型', 'tables': ['ads_phs_patent_extension', 'ads_phs_patent_entity_rel'], 'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}
2025-02-26 22:41:15,886 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:41:30,598 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:41:31,318 - utils.logger - INFO - generate_sql input: {'intent': '查询专利延期数据，筛选出那些延期类型为PTE并且其关联药物不为空的专利记录，返回专利ID、关联的药物ID以及延期类型', 'tables': ['ads_phs_patent_extension', 'ads_phs_patent_entity_rel'], 'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}
2025-02-26 22:43:01,978 - utils.logger - INFO - Structure for table ads_phs_patent_extension retrieved: 表名：ads_phs_patent_extension
表结构：CREATE TABLE `ads_phs_patent_extension` (
  `patent_id` varchar(64) NOT NULL COMMENT '专利id',
  `extension_id` varchar(64) NOT NULL COMMENT '专利延期id',
  `extension_apno` varchar(64) NOT NULL COMMENT 'spc/us_pte/us_pte_app/jp_pte,jp的apno号',
  `applicant` text DEFAULT NULL COMMENT '申请机构名称',
  `authority_country` varchar(64) DEFAULT NULL COMMENT '受理国家',
  `authority_region_id` varchar(64) DEFAULT NULL COMMENT '申请国家 对应的region_id',
  `drug_id` json DEFAULT NULL COMMENT '药物id',
  `product` json DEFAULT NULL COMMENT 'product文本',
  `indication` text DEFAULT NULL COMMENT '特定用途',
  `extension_status` json DEFAULT NULL COMMENT '延期状态',
  `maximum_expiry_date` varchar(32) DEFAULT NULL COMMENT '最晚到期日',
  `extension_time` json DEFAULT NULL COMMENT '授予的延长时间',
  `filing_date` varchar(64) DEFAULT NULL COMMENT 'spc申请日期',
  `in_force_date` varchar(32) DEFAULT NULL COMMENT '授予延长/补偿的生效日',
  `actual_expiry_date` varchar(32) DEFAULT NULL COMMENT '实际到期日',
  `invalid_date` varchar(32) DEFAULT NULL COMMENT '延长失效日期',
  `lapsed_date` varchar(32) DEFAULT NULL COMMENT '延长终止日',
  `granted_date` varchar(32) DEFAULT NULL COMMENT '延长授权日',
  `refused_date` varchar(32) DEFAULT NULL COMMENT '延长驳回日',
  `revoked_date` varchar(32) DEFAULT NULL COMMENT '延长撤销日',
  `ped` int(1) DEFAULT NULL COMMENT ' 是否儿科实验的6个月延长',
  `url` varchar(255) DEFAULT NULL COMMENT '详情页地址',
  `pdf_url` json DEFAULT NULL COMMENT '爬取的pdf的s3地址',
  `extension_type` varchar(32) DEFAULT NULL COMMENT '数据来源',
  `inpadoc_number` varchar(64) DEFAULT NULL COMMENT 'inpadoc_number',
  `ped_expiry_date` varchar(32) DEFAULT NULL COMMENT 'ped 过期时间',
  `ped_status` json DEFAULT NULL COMMENT 'ped 状态',
  `ped_filling_date` varchar(32) DEFAULT NULL COMMENT 'ped 申请日期',
  `ped_granted_date` varchar(32) DEFAULT NULL COMMENT 'ped 申请日期',
  `ped_refused_date` varchar(32) DEFAULT NULL COMMENT 'ped 延长驳回日',
  `ped_revoked_date` varchar(32) DEFAULT NULL COMMENT 'ped 延长撤销日',
  `authorization_des` json DEFAULT NULL COMMENT '药物批准号和获批日期',
  `data_status` varchar(64) NOT NULL DEFAULT 'ACTIVE' COMMENT '数据状态',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP,
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`patent_id`,`extension_id`) /*T![clustered_index] CLUSTERED */,
  KEY `idx_extension_id` (`extension_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='专利延期业务表'
示例数据：[{'extension_status': '["LAPSED"]', 'drug_id': '["836b5d60fa984b3fa4af638bf0fdf9d0"]', 'authorization_des': '[{"authorization_date": "20090515", "authorization_number": "EU/1/09/522"}]', 'extension_apno': 'spc', 'ped': '0', 'created_ts': '1733223672000', 'authority_country': 'AT', 'data_status': 'ACTIVE', 'extension_id': '18/2009', 'updated_ts': '1733223672000', 'patent_id': '0000bd07-b6b3-44fc-9b4c-951686a701aa', 'product': '[{"lang": "AT", "name": "ULIPRISTAL-ACETAT"}]', 'maximum_expiry_date': '20140623', 'extension_type': 'SPC'}, {'extension_status': '["GRANTED"]', 'drug_id': '["093e34ca7fc84af38142e5e3774251ef"]', 'authorization_des': '[{"authorization_date": "20200810", "authorization_number": "EU/1/20/1455"}]', 'extension_apno': 'spc', 'ped': '0', 'created_ts': '1720611311000', 'authority_country': 'NO', 'data_status': 'ACTIVE', 'extension_id': '2020037', 'updated_ts': '1733223615000', 'patent_id': '00064a80-2b4e-45a6-96f4-bcf60fb925ca', 'product': '[{"lang": "NO", "name": "ALPELISIB ELLER ET FARMASOEYTISK AKSEPTABELT SALT DERAV"}]', 'filing_date': '20201116', 'maximum_expiry_date': '20340908', 'extension_type': 'SPC'}]
2025-02-26 22:43:17,795 - utils.logger - INFO - Structure for table ads_phs_patent_entity_rel retrieved: 表名：ads_phs_patent_entity_rel
表结构：CREATE TABLE `ads_phs_patent_entity_rel` (
  `patent_id` varchar(64) NOT NULL COMMENT '专利id',
  `drug_id` json DEFAULT NULL COMMENT '药物id',
  `target_id` json DEFAULT NULL COMMENT '靶点id',
  `disease_id` json DEFAULT NULL COMMENT '疾病id',
  `patent_type` json DEFAULT NULL COMMENT 'patent_type',
  `patent_type_drug_id` json DEFAULT NULL COMMENT 'patent_type_drug_id',
  `is_curation` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否人工标注过的专利',
  `rel_org_ans` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否ans_org',
  `rel_strategic` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否战略新兴',
  `rel_cde` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否cde',
  `rel_fda` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否fda',
  `rel_nih` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否nih',
  `rel_extend` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否扩展',
  `rel_spc_pte` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否spc_pte',
  `rel_cas_no` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否cas_no',
  `rel_seq_no` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否seq_no',
  `rel_manual` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否人工标注',
  `rel_retrieve` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否捞回',
  `annotation` json DEFAULT NULL COMMENT 'annotation信息',
  `seq_drug_id` json DEFAULT NULL COMMENT 'seq number mapping 逻辑产生的药物 ID',
  `cas_drug_id` json DEFAULT NULL COMMENT 'cas number mapping 逻辑产生的药物 ID',
  `non_ls` tinyint(1) DEFAULT NULL COMMENT '是否是非生物医药专利',
  `data_status` varchar(64) NOT NULL DEFAULT 'ACTIVE' COMMENT '数据状态',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '数据创建时间',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '数据更新时间',
  `created_by` varchar(64) DEFAULT NULL COMMENT '创建人',
  `updated_by` varchar(64) DEFAULT NULL COMMENT '更新人',
  PRIMARY KEY (`patent_id`) /*T![clustered_index] CLUSTERED */
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='专利关系业务表'
示例数据：[{'rel_cde': 'false', 'rel_manual': 'false', 'rel_fda': 'false', 'rel_spc_pte': 'false', 'rel_extend': 'false', 'rel_cas_no': 'false', 'created_ts': '1646652839000', 'rel_org_ans': 'false', 'rel_nih': 'false', 'data_status': 'DELETE', 'rel_retrieve': 'false', 'updated_ts': '1660210779000', 'patent_id': '00000055-f2e3-48b9-af6c-eb81afbd3de8', 'rel_seq_no': 'false', 'rel_strategic': 'false', 'is_curation': 'false', 'non_ls': 'true'}, {'rel_cde': 'false', 'rel_manual': 'false', 'rel_fda': 'false', 'rel_spc_pte': 'false', 'rel_extend': 'false', 'rel_cas_no': 'false', 'created_ts': '1708841901000', 'rel_org_ans': 'false', 'rel_nih': 'false', 'data_status': 'DELETE', 'rel_retrieve': 'false', 'updated_ts': '1708842091000', 'patent_id': '0000006e-d968-45a3-bd78-7c5b657fb736', 'rel_seq_no': 'false', 'rel_strategic': 'false', 'is_curation': 'false', 'non_ls': 'true'}]
2025-02-26 22:43:39,071 - utils.logger - INFO - Generated SQL Response: content="SELECT \n  patent_id,\n  drug_id,\n  extension_type\nFROM ads_phs_patent_extension\nWHERE extension_type = 'PTE'\n  AND drug_id IS NOT NULL\n  AND JSON_LENGTH(drug_id) > 0\nORDER BY created_ts DESC\nLIMIT 5;" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1095, 'prompt_tokens': 2557, 'total_tokens': 3652, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 1024, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-3c754059-7f5c-4cf9-a49b-fa3a52850849-0' usage_metadata={'input_tokens': 2557, 'output_tokens': 1095, 'total_tokens': 3652, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1024}}
2025-02-26 22:43:39,073 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'tables': ['ads_phs_patent_extension', 'ads_phs_patent_entity_rel'], 'sql': "SELECT    patent_id,   drug_id,   extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5"}
2025-02-26 22:43:39,074 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:43:39,076 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:43:39,077 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'tables': ['ads_phs_patent_extension', 'ads_phs_patent_entity_rel'], 'sql': "SELECT    patent_id,   drug_id,   extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5"}
2025-02-26 22:43:39,078 - utils.logger - INFO - Executing query: SELECT    patent_id,   drug_id,   extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5
2025-02-26 22:43:39,819 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'sql': "SELECT    patent_id,   drug_id,   extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'query_result': [{'patent_id': 'ff181981-057b-41c0-b613-2df3b70ae978', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': 'b5f128ac-1d73-4f6c-a015-ef2b41f71055', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': '3c425356-acf3-4d8f-bc8f-344c1931c6a0', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': 'd4bb9e39-bd66-4b27-92c1-2d254ded24a9', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': '937b93b6-c383-45a9-a905-49eb05ad5759', 'drug_id': '["cc12b0ab972347fa97dd8a38d5c9fa54"]', 'extension_type': 'PTE'}]}
2025-02-26 22:43:39,820 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:43:39,821 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:43:39,822 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'sql': "SELECT    patent_id,   drug_id,   extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'query_result': [{'patent_id': 'ff181981-057b-41c0-b613-2df3b70ae978', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': 'b5f128ac-1d73-4f6c-a015-ef2b41f71055', 'drug_id': '["d367fa50d1d74df1a3b012e10f7408d5"]', 'extension_type': 'PTE'}, {'patent_id': '3c425356-acf3-4d8f-bc8f-344c1931c6a0', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': 'd4bb9e39-bd66-4b27-92c1-2d254ded24a9', 'drug_id': '["3977a18e334b47a58108a0df2161d768"]', 'extension_type': 'PTE'}, {'patent_id': '937b93b6-c383-45a9-a905-49eb05ad5759', 'drug_id': '["cc12b0ab972347fa97dd8a38d5c9fa54"]', 'extension_type': 'PTE'}]}
2025-02-26 22:43:56,140 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？', 'sql': "SELECT    patent_id,   drug_id,   extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'answer': '以下是整理后的查询结果，采用表格方式展示，以便快速查阅各字段信息：\n\n------------------------------------------------------------\nPatents ID                           | Drug ID                                  | Extension Type\n---------------------------------------------------------------------------------------\nff181981-057b-41c0-b613-2df3b70ae978   | ["d367fa50d1d74df1a3b012e10f7408d5"]       | PTE\nb5f128ac-1d73-4f6c-a015-ef2b41f71055   | ["d367fa50d1d74df1a3b012e10f7408d5"]       | PTE\n3c425356-acf3-4d8f-bc8f-344c1931c6a0   | ["3977a18e334b47a58108a0df2161d768"]       | PTE\nd4bb9e39-bd66-4b27-92c1-2d254ded24a9   | ["3977a18e334b47a58108a0df2161d768"]       | PTE\n937b93b6-c383-45a9-a905-49eb05ad5759   | ["cc12b0ab972347fa97dd8a38d5c9fa54"]       | PTE\n------------------------------------------------------------\n\n注意：\n1. Drug ID 字段中数据以字符串形式保存的列表格式显示（例如："[ ... ]"）。\n2. 此处每一行为一个查询结果记录，方便快速查找对应的专利编号、药物编号及扩展类型。'}
2025-02-26 22:43:56,141 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:43:56,194 - utils.logger - INFO - 更新QA对: 帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？
2025-02-26 22:44:48,776 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:44:48,777 - utils.logger - INFO - find_similar_question input: {'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}
2025-02-26 22:44:51,813 - utils.logger - INFO - Found similar question: 帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？
2025-02-26 22:44:51,814 - utils.logger - INFO - Similarity score: 0.0
2025-02-26 22:44:51,815 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:44:51,816 - utils.logger - INFO - Route after similar question: {'result': {'sql': "SELECT    patent_id,   drug_id,   extension_type FROM ads_phs_patent_extension WHERE extension_type = 'PTE'   AND drug_id IS NOT NULL   AND JSON_LENGTH(drug_id) > 0 ORDER BY created_ts DESC LIMIT 5", 'answer': '以下是整理后的查询结果，采用表格方式展示，以便快速查阅各字段信息：\n\n------------------------------------------------------------\nPatents ID                           | Drug ID                                  | Extension Type\n---------------------------------------------------------------------------------------\nff181981-057b-41c0-b613-2df3b70ae978   | ["d367fa50d1d74df1a3b012e10f7408d5"]       | PTE\nb5f128ac-1d73-4f6c-a015-ef2b41f71055   | ["d367fa50d1d74df1a3b012e10f7408d5"]       | PTE\n3c425356-acf3-4d8f-bc8f-344c1931c6a0   | ["3977a18e334b47a58108a0df2161d768"]       | PTE\nd4bb9e39-bd66-4b27-92c1-2d254ded24a9   | ["3977a18e334b47a58108a0df2161d768"]       | PTE\n937b93b6-c383-45a9-a905-49eb05ad5759   | ["cc12b0ab972347fa97dd8a38d5c9fa54"]       | PTE\n------------------------------------------------------------\n\n注意：\n1. Drug ID 字段中数据以字符串形式保存的列表格式显示（例如："[ ... ]"）。\n2. 此处每一行为一个查询结果记录，方便快速查找对应的专利编号、药物编号及扩展类型。', 'question': '帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？'}}
2025-02-26 22:44:51,836 - utils.logger - INFO - 更新QA对: 帮我找几条专利延长类型为PTE，并且关联的药物不为空，返回专利id及关联的药物ID，延长类型？
2025-02-26 22:50:47,226 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:50:47,227 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 22:50:50,121 - utils.logger - INFO - No similar question found
2025-02-26 22:50:50,122 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:50:50,123 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}}
2025-02-26 22:50:50,125 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:50:50,125 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}
2025-02-26 22:50:50,128 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 22:53:01,080 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:53:01,080 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 22:53:03,699 - utils.logger - INFO - No similar question found
2025-02-26 22:53:03,700 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:53:03,701 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}}
2025-02-26 22:53:03,704 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:53:03,704 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}
2025-02-26 22:53:03,707 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 22:53:54,248 - utils.logger - INFO - Analyzed user intent: {'intent': '查询药物索托拉西布的别名信息', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 22:53:56,267 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:54:07,360 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:54:10,048 - utils.logger - INFO - generate_sql input: {'intent': '查询药物索托拉西布的别名信息', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 22:54:11,689 - utils.logger - INFO - Structure for table ads_phs_drug retrieved: 表名：ads_phs_drug
表结构：CREATE TABLE `ads_phs_drug` (
  `drug_id` varchar(32) NOT NULL COMMENT '药物 ID',
  `docid` int(11) DEFAULT NULL COMMENT '数字主键',
  `drug_name` json NOT NULL COMMENT '药物名称, List<Map>',
  `alias` json DEFAULT NULL COMMENT '别名, List<Map>',
  `dev_code` json DEFAULT NULL COMMENT '研发代码, List<Map>',
  `trade_name` json DEFAULT NULL COMMENT '商品名, List<Map>',
  `generic_name` json DEFAULT NULL COMMENT '通用名称, List<Map>',
  `is_nme` tinyint(1) DEFAULT NULL COMMENT '是否NME, New molecular entity',
  `is_first_in_class` tinyint(1) DEFAULT NULL COMMENT '是否First-in-class',
  `is_qidp` tinyint(1) DEFAULT NULL COMMENT '是否 Qualified Infectious Disease Product 合格传染病产品资格',
  `is_compound_medicine` tinyint(1) DEFAULT NULL COMMENT '是否复方',
  `biological_drug_source` varchar(32) DEFAULT NULL COMMENT '生物药来源 dict_type= BIOLOGICAL_DRUG_SOURCE',
  `express_system` varchar(32) DEFAULT NULL COMMENT '表达体系 dict_type=EXPRESS_SYSTEM',
  `registered_classification_cn` varchar(32) DEFAULT NULL COMMENT '中国注册分类',
  `null_target_reason` varchar(32) DEFAULT NULL COMMENT '无靶点原因 NOT_AVAILABLE/UNDEFINED',
  `wiki_link` varchar(1500) DEFAULT NULL COMMENT 'wiki 地址',
  `drugbank_id` json DEFAULT NULL COMMENT 'drugbank_id, List<String>',
  `kegg_id` json DEFAULT NULL COMMENT 'kegg_id, List<String>',
  `related_component` json DEFAULT NULL COMMENT '复方药的相关组分, List<String>',
  `drug_type` json DEFAULT NULL COMMENT '药物类型, List<String>',
  `originator_org_master_entity_id` json DEFAULT NULL COMMENT '原研机构, List<String>',
  `mechanism_action_id` json DEFAULT NULL COMMENT '作用机制 ID, List<String>',
  `target_id` json DEFAULT NULL COMMENT '靶点 id, List<String>',
  `atc_code` json DEFAULT NULL COMMENT 'ATC 代码，WHO发布的药物分类系统, List<String>',
  `antibody_drug_id` varchar(32) DEFAULT NULL COMMENT '抗体 ID',
  `antibody_type` varchar(32) DEFAULT NULL COMMENT '抗体类型',
  `linker_id` varchar(32) DEFAULT NULL COMMENT '连接子 id',
  `linker_number` varchar(32) DEFAULT NULL COMMENT '连接子数量',
  `payload_id` varchar(32) DEFAULT NULL COMMENT '载荷id',
  `dar` json DEFAULT NULL COMMENT '药物抗体比',
  `specific_site` tinyint(1) DEFAULT NULL COMMENT '是否定点偶联',
  `site_id` varchar(32) DEFAULT NULL COMMENT '位点id',
  `adc_reference` json DEFAULT NULL COMMENT 'ADC 参考信息',
  `target_moiety_type` json DEFAULT NULL COMMENT '靶向药物类型',
  `data_source` int(3) DEFAULT NULL COMMENT '数据来源',
  `genetic_material` varchar(32) DEFAULT NULL COMMENT '遗传物质, dict_type = V_GENETIC_MATERIAL',
  `delivery_system` json DEFAULT NULL COMMENT '递送系统, dict_type = V_DELIVERY_SYSTEM',
  `targeted_tissue` json DEFAULT NULL COMMENT '靶向组织, dict_type = V_TARGETED_TISSUE',
  `paired_region` json DEFAULT NULL COMMENT '识别区域, dict_type = V_PAIRED_REGION',
  `regulation_type` json DEFAULT NULL COMMENT '调控机制, dict_type = V_REGULATION_TYPE',
  `tech_platform` json DEFAULT NULL COMMENT '技术平台, dict_type = TECH_PLATFORM',
  `source_info_xna` json DEFAULT NULL COMMENT '核酸药物来源信息',
  `if_speculate` tinyint(1) DEFAULT NULL COMMENT '是否含有推测信息, 比如利用 WHO INN 推测药物结构',
  `profile` json DEFAULT NULL COMMENT '描述',
  `is_pathway` tinyint(1) DEFAULT NULL COMMENT '是否 pathway',
  `special_review` json DEFAULT NULL COMMENT '特殊审评 List<String>',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID List<String>',
  `active_org_master_entity_id` json DEFAULT NULL COMMENT '在研机构 List<String>',
  `global_highest_dev_status` varchar(32) DEFAULT NULL COMMENT '全球最高研发状态',
  `global_highest_dev_status_before_termination` varchar(32) DEFAULT NULL COMMENT '终止前全球最高研发状态',
  `highest_dev_status_cn` varchar(32) DEFAULT NULL COMMENT '中国最高研发状态',
  `highest_dev_status_before_termination_cn` varchar(32) DEFAULT NULL COMMENT '终止前中国最高研发状态',
  `first_approved_date` bigint(20) DEFAULT NULL COMMENT '首批时间',
  `first_approved_country` json DEFAULT NULL COMMENT '首批国家, List<String>',
  `first_approved_indication` json DEFAULT NULL COMMENT '首批适应症, List<String>',
  `research_disease` json DEFAULT NULL COMMENT '在研适应症, List<String>',
  `non_research_disease` json DEFAULT NULL COMMENT '非在研适应症, List<String>',
  `inactive_org_master_entity_id` json DEFAULT NULL COMMENT '非在研机构 ,List<String>',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域, List<String>',
  `approval_country` json DEFAULT NULL COMMENT '获批国家, List<String>',
  `research_country` json DEFAULT NULL COMMENT '研发国家, List<String>',
  `rnk` int(11) DEFAULT NULL COMMENT '同靶点药物排名',
  `disease_phase` json DEFAULT NULL COMMENT '药物适应症 pahse, List<Map>',
  `adc_count` int(11) DEFAULT NULL COMMENT 'adc 药物被关联的次数',
  `target_extend_id` varchar(32) DEFAULT NULL COMMENT '多靶点表ID  生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `has_leading_org_involved` tinyint(1) DEFAULT NULL COMMENT '是否有头部企业参与',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `data_status` varchar(10) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `original_drug_id` json DEFAULT NULL COMMENT '生物类似药',
  `created_by` varchar(255) DEFAULT NULL,
  `updated_by` varchar(255) DEFAULT NULL,
  `deal_related_org` json DEFAULT NULL COMMENT '交易涉及机构',
  `first_approved_date_cn` bigint(20) DEFAULT NULL COMMENT '中国首批时间',
  `moiety_target_id` json DEFAULT NULL COMMENT '抗体靶点ID',
  `payload_target_id` json DEFAULT NULL COMMENT '载荷靶点ID',
  `moiety_mechanism_action_id` json DEFAULT NULL COMMENT '抗体作用机制ID',
  `payload_mechanism_action_id` json DEFAULT NULL COMMENT '载荷作用机制D',
  `moiety_target_extend_id` varchar(32) DEFAULT NULL COMMENT '抗体靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `payload_target_extend_id` varchar(32) DEFAULT NULL COMMENT '载荷靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  PRIMARY KEY (`drug_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `docid` (`docid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='药物业务表'
示例数据：[{'drug_id': '0000717d1e7143dc94fd46c1755cd8e3', 'is_qidp': 'false', 'global_highest_dev_status': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'is_first_in_class': 'false', 'non_research_disease': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'originator_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]', 'created_ts': '1677735049000', 'drug_type': '["1151dbc710f64a85923dc05d4a5a0ba9"]', 'data_status': 'ACTIVE', 'drug_name': '[{"lang": "EN", "name": "JM023", "status": "ACTIVE"}]', 'research_country': '[{"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "c9e8fce7eb6b4bbd9cc66dc356017aab", "dev_status_time": {"time_trust_code": 7, "time_ts": 1669766400000}}]', 'created_by': 'data@patsnap.com', 'data_source': '10', 'updated_by': 'data@patsnap.com', 'dev_code': '[{"name": "AD20190509", "status": "ACTIVE"}]', 'is_pathway': 'false', 'disease_phase': '[{"disease_id": "25aa9dbd25714b36b8bcb9347d1b91d1", "highest_phase_cn": "c9e8fce7eb6b4bbd9cc66dc356017aab", "highest_phase_global": "c9e8fce7eb6b4bbd9cc66dc356017aab"}]', 'therapeutic_area': '["042cbe45c973477b957717ded29ef7b6"]', 'is_nme': 'false', 'updated_ts': '1735604387000', 'is_compound_medicine': 'false', 'docid': '36127', 'null_target_reason': 'UNDEFINED', 'highest_dev_status_cn': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'disease_id': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'inactive_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]'}, {'drug_id': '0000d4a23502459386f511f0dfdad0df', 'is_qidp': 'false', 'global_highest_dev_status': 'efd6215835394b07b046125e3175d3fe', 'is_first_in_class': 'false', 'first_approved_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be"]', 'drugbank_id': '["DB11606"]', 'non_research_disease': '["e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'originator_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'created_ts': '1633704418000', 'drug_type': '["4d2dcd3fc8b644db955f8cccefca280b"]', 'target_extend_id': '450cd6ab529c38d4b0ad05aaff0d5fd7', 'data_status': 'ACTIVE', 'first_approved_indication': '["07d4cf59dafc4a35840dbf53e136394a"]', 'drug_name': '[{"lang": "CN", "name": "舒索凝血素α", "source_info": [{"code": "国药准字SJ20240009", "normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "patsnap_id": "ea95955e04de20edd2a022ee3882a984", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"normalized_source_id": "c550fafe5544447091b21ca6c19f70f2", "source": "EMA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "スソクトコグ アルファ（遺伝子組換え）", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'mechanism_action_id': '["979b395f8c612b269b4c98663691de9d"]', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'research_country': '[{"country": "0dc5d896-7408-3c87-84c0-22e3d9b784be", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1414022400000}}, {"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1708387200000}}, {"country": "9a18968a-f130-3a00-80b6-8b9e2eec4838", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "676de5ba-893a-36bb-8683-c93306aaf769", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1711411200000}}, {"country": "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1461888000000}}, {"country": "3d57c904-23bf-3ee0-9924-83496c75b8ee", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "52d1b118-b540-37ba-9cb2-f5aff686bb10", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1679270400000}}, {"country": "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "665d1d12-3d14-3e05-8459-014864489671", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "672807de-6d33-3706-a350-c97e6ed7735e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1620950400000}}, {"country": "cf11da47-6a9f-3948-9d29-8a824f805638", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7cb930b-9b67-3639-97cd-dab2ce82da83", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "0e7802a9-bad3-33a3-98ae-ff755c717809", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "dc266be9-66b5-3c85-af35-ef210568f738", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "1b05c4d2-8156-3854-9898-c71e0077e3c6", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "bf460c70-eac8-3426-baa3-7e6c72bc0889", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "15d3c741-f4c4-35d8-9273-339b5972916e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "4ac42935-7005-3e0d-a0e9-698b15e3986b", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7693298-e9f4-3dfb-ad3e-fda6b7e59658", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "2f753928-f426-3cc1-9ea6-8c25f6a4d330", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1444348800000}}, {"country": "bb1d5b11-d9f8-31c4-872c-65a9fad8d193", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "6d64b019-4f80-31e9-b248-297aa588c950", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "00d7d9ab-3d75-3fa9-9849-2f715d69f010", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "027bd29d-069d-3fdf-aa1a-be891fbaae92", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}]', 'wiki_link': 'https://en.wikipedia.org/wiki/Susoctocog_alfa', 'created_by': 'data@patsnap.com', 'data_source': '10', 'rnk': '9', 'kegg_id': '["D10831"]', 'biological_drug_source': '5763f27b05ac432dafde44df27a4ec76', 'express_system': '6ce3b90730044258a81ab5a3e9288495', 'updated_by': 'youjia@patsnap.com', 'research_disease': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a"]', 'atc_code': '["7319cbc33cb0475a94bf687ed6634978"]', 'dev_code': '[{"name": "BAX 802", "status": "ACTIVE"}, {"name": "BAX-801", "status": "ACTIVE"}, {"name": "BAX-802", "status": "ACTIVE"}, {"name": "BAX801", "status": "ACTIVE"}, {"name": "OBI-1", "status": "ACTIVE"}, {"name": "SHP672", "status": "ACTIVE"}, {"name": "TAK 672", "status": "ACTIVE"}]', 'trade_name': '[{"lang": "EN", "name": "Obizur", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "JP", "name": "オビザー", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "CN", "name": "助因止", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "patsnap_id": "1c1403c1-b1e8-3014-96e8-1939c36cfecb", "patsnap_type": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "http://mp.weixin.qq.com/s?__biz=MzA5Njc0MTAxOQ==&mid=2650027443&idx=1&sn=71b7cef6c2070906937036501e33b9cc"}], "status": "ACTIVE"}, {"lang": "KR", "name": "오비주르주[서스옥토코그알파", "source_info": [{"code": "202300956", "normalized_source_id": "6f08ac4a5ca144f8b59de74187e41886", "source": "MFDS", "source_url": "https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202300956aupdateTs2024-06-10%2018:52:49.0b"}], "status": "ACTIVE"}]', 'active_org_master_entity_id': '["4099573c333dcbc48d8f398aee392060", "ad3caef0a55e98b5fc495d9921bf43e0", "b0b1d828ce0abb09b0567b191f02bb53", "f4bc92165e87f4758502c119ebc15574", "f6b3099a6af884bd6b51c208d8c47644", "3213232cf3774bc734def2420b679bb6"]', 'is_pathway': 'false', 'alias': '[{"lang": "EN", "name": "Antihemophilic Factor (Recombinant), Porcine Sequence", "source_info": [{"code": "BLA125512", "normalized_source_id": "f3bd4fd130ec4588971e9008b5010e32", "patsnap_id": "854204585a22558d8532e5de92e5d898", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "FDA_CBER"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor (recombinant) porcine sequence", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor porcine, B-domain truncated recombinant", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "PFVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine recombinant factor VIII B-domain truncated", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Recombinant porcine factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "RpfVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa (INN)", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'special_review': '["23d3523b7ece48ddacaddac53a66949d", "043a131d85994801b3617e822e7f87b3"]', 'disease_phase': '[{"disease_id": "71d86eb1f39c4e509b8da8fe4343bdd3", "highest_phase_before_ter_global": "9f31233bceb94d9796d3f3556f17ab13", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "e30a25b1033043c4adf00e944889533c", "highest_phase_before_ter_global": "f835774c48404593b64ef05369eb8eba", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "07d4cf59dafc4a35840dbf53e136394a", "highest_phase_cn": "efd6215835394b07b046125e3175d3fe", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "d1e154571f0a46f8b15f8997f3031fd1", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "18795373eb704b16936d51c793bbea01", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}]', 'therapeutic_area': '["c354b2ea74d349da99bef8388390c7d8", "5b1dfc2ca8564662860187aef864467d", "67034410be134e2bbb5b0930595b5e75"]', 'is_nme': 'false', 'updated_ts': '1737614304000', 'is_compound_medicine': 'false', 'docid': '4178', 'first_approved_date_cn': '1708387200000', 'target_id': '["3f888f3938b34a4ca124145b3fa1e229"]', 'highest_dev_status_cn': 'efd6215835394b07b046125e3175d3fe', 'approval_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be", "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "9a18968a-f130-3a00-80b6-8b9e2eec4838", "676de5ba-893a-36bb-8683-c93306aaf769", "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "3d57c904-23bf-3ee0-9924-83496c75b8ee", "52d1b118-b540-37ba-9cb2-f5aff686bb10", "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "665d1d12-3d14-3e05-8459-014864489671"]', 'disease_id': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a", "e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'if_speculate': 'false', 'inactive_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'first_approved_date': '1414022400000'}]
2025-02-26 22:54:13,445 - utils.logger - INFO - Structure for table ads_phs_pub_name retrieved: 表名：ads_phs_pub_name
表结构：CREATE TABLE `ads_phs_pub_name` (
  `data_id` varchar(36) NOT NULL COMMENT 'ID',
  `data_type` varchar(32) NOT NULL COMMENT '数据类型，如 DRUG/TARGET/DISEASE',
  `name_type` varchar(64) NOT NULL COMMENT '名称类型',
  `name` varchar(604) NOT NULL COMMENT '名称',
  `lang` varchar(32) NOT NULL COMMENT '名称语言',
  `match_type` json DEFAULT NULL COMMENT 'NOR 时需匹配的字段',
  `source_info` json DEFAULT NULL COMMENT '来源信息 List<String>',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `status` varchar(6) NOT NULL COMMENT 'dmp数据状态 DELETE/ACTIVE',
  `data_status` varchar(6) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `created_by` varchar(255) DEFAULT NULL COMMENT '创建人',
  `updated_by` varchar(255) DEFAULT NULL COMMENT '更新人',
  `version` int(11) DEFAULT NULL COMMENT '数据版本',
  `uuid` varchar(32) NOT NULL COMMENT '根据联合主键生成UUID',
  PRIMARY KEY (`data_id`,`data_type`,`name_type`,`name`,`lang`) /*T![clustered_index] CLUSTERED */,
  KEY `idx_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='PHS名称明细表'
示例数据：[{'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'c30e89f559c238d69a83a889903eb161', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formyl Furan', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}, {'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'eeffaee758fe3ae3929d321806deb8df', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formylofuran', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}]
2025-02-26 22:55:03,384 - utils.logger - INFO - Generated SQL Response: content='{\n  "sql": "SELECT drug_id, alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, \'one\', \'索托拉西布\') IS NOT NULL AND data_status = \'ACTIVE\' LIMIT 5;"\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1596, 'prompt_tokens': 9014, 'total_tokens': 10610, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 1536, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-8fb60810-7dd6-4ff7-aba4-cc16e03a45fb-0' usage_metadata={'input_tokens': 9014, 'output_tokens': 1596, 'total_tokens': 10610, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1536}}
2025-02-26 22:57:21,933 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:57:21,934 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 22:57:24,654 - utils.logger - INFO - No similar question found
2025-02-26 22:57:24,655 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:57:24,656 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}}
2025-02-26 22:57:24,658 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:57:24,658 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}
2025-02-26 22:57:24,661 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 22:57:53,525 - utils.logger - INFO - Analyzed user intent: {'intent': '用户希望查询药物“索托拉西布”的别名信息，即获取该药物在系统中记录的不同名称或变体。', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 22:57:53,526 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 22:57:53,530 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 22:57:53,531 - utils.logger - INFO - generate_sql input: {'intent': '用户希望查询药物“索托拉西布”的别名信息，即获取该药物在系统中记录的不同名称或变体。', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 22:57:53,534 - utils.logger - INFO - Structure for table ads_phs_drug retrieved: 表名：ads_phs_drug
表结构：CREATE TABLE `ads_phs_drug` (
  `drug_id` varchar(32) NOT NULL COMMENT '药物 ID',
  `docid` int(11) DEFAULT NULL COMMENT '数字主键',
  `drug_name` json NOT NULL COMMENT '药物名称, List<Map>',
  `alias` json DEFAULT NULL COMMENT '别名, List<Map>',
  `dev_code` json DEFAULT NULL COMMENT '研发代码, List<Map>',
  `trade_name` json DEFAULT NULL COMMENT '商品名, List<Map>',
  `generic_name` json DEFAULT NULL COMMENT '通用名称, List<Map>',
  `is_nme` tinyint(1) DEFAULT NULL COMMENT '是否NME, New molecular entity',
  `is_first_in_class` tinyint(1) DEFAULT NULL COMMENT '是否First-in-class',
  `is_qidp` tinyint(1) DEFAULT NULL COMMENT '是否 Qualified Infectious Disease Product 合格传染病产品资格',
  `is_compound_medicine` tinyint(1) DEFAULT NULL COMMENT '是否复方',
  `biological_drug_source` varchar(32) DEFAULT NULL COMMENT '生物药来源 dict_type= BIOLOGICAL_DRUG_SOURCE',
  `express_system` varchar(32) DEFAULT NULL COMMENT '表达体系 dict_type=EXPRESS_SYSTEM',
  `registered_classification_cn` varchar(32) DEFAULT NULL COMMENT '中国注册分类',
  `null_target_reason` varchar(32) DEFAULT NULL COMMENT '无靶点原因 NOT_AVAILABLE/UNDEFINED',
  `wiki_link` varchar(1500) DEFAULT NULL COMMENT 'wiki 地址',
  `drugbank_id` json DEFAULT NULL COMMENT 'drugbank_id, List<String>',
  `kegg_id` json DEFAULT NULL COMMENT 'kegg_id, List<String>',
  `related_component` json DEFAULT NULL COMMENT '复方药的相关组分, List<String>',
  `drug_type` json DEFAULT NULL COMMENT '药物类型, List<String>',
  `originator_org_master_entity_id` json DEFAULT NULL COMMENT '原研机构, List<String>',
  `mechanism_action_id` json DEFAULT NULL COMMENT '作用机制 ID, List<String>',
  `target_id` json DEFAULT NULL COMMENT '靶点 id, List<String>',
  `atc_code` json DEFAULT NULL COMMENT 'ATC 代码，WHO发布的药物分类系统, List<String>',
  `antibody_drug_id` varchar(32) DEFAULT NULL COMMENT '抗体 ID',
  `antibody_type` varchar(32) DEFAULT NULL COMMENT '抗体类型',
  `linker_id` varchar(32) DEFAULT NULL COMMENT '连接子 id',
  `linker_number` varchar(32) DEFAULT NULL COMMENT '连接子数量',
  `payload_id` varchar(32) DEFAULT NULL COMMENT '载荷id',
  `dar` json DEFAULT NULL COMMENT '药物抗体比',
  `specific_site` tinyint(1) DEFAULT NULL COMMENT '是否定点偶联',
  `site_id` varchar(32) DEFAULT NULL COMMENT '位点id',
  `adc_reference` json DEFAULT NULL COMMENT 'ADC 参考信息',
  `target_moiety_type` json DEFAULT NULL COMMENT '靶向药物类型',
  `data_source` int(3) DEFAULT NULL COMMENT '数据来源',
  `genetic_material` varchar(32) DEFAULT NULL COMMENT '遗传物质, dict_type = V_GENETIC_MATERIAL',
  `delivery_system` json DEFAULT NULL COMMENT '递送系统, dict_type = V_DELIVERY_SYSTEM',
  `targeted_tissue` json DEFAULT NULL COMMENT '靶向组织, dict_type = V_TARGETED_TISSUE',
  `paired_region` json DEFAULT NULL COMMENT '识别区域, dict_type = V_PAIRED_REGION',
  `regulation_type` json DEFAULT NULL COMMENT '调控机制, dict_type = V_REGULATION_TYPE',
  `tech_platform` json DEFAULT NULL COMMENT '技术平台, dict_type = TECH_PLATFORM',
  `source_info_xna` json DEFAULT NULL COMMENT '核酸药物来源信息',
  `if_speculate` tinyint(1) DEFAULT NULL COMMENT '是否含有推测信息, 比如利用 WHO INN 推测药物结构',
  `profile` json DEFAULT NULL COMMENT '描述',
  `is_pathway` tinyint(1) DEFAULT NULL COMMENT '是否 pathway',
  `special_review` json DEFAULT NULL COMMENT '特殊审评 List<String>',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID List<String>',
  `active_org_master_entity_id` json DEFAULT NULL COMMENT '在研机构 List<String>',
  `global_highest_dev_status` varchar(32) DEFAULT NULL COMMENT '全球最高研发状态',
  `global_highest_dev_status_before_termination` varchar(32) DEFAULT NULL COMMENT '终止前全球最高研发状态',
  `highest_dev_status_cn` varchar(32) DEFAULT NULL COMMENT '中国最高研发状态',
  `highest_dev_status_before_termination_cn` varchar(32) DEFAULT NULL COMMENT '终止前中国最高研发状态',
  `first_approved_date` bigint(20) DEFAULT NULL COMMENT '首批时间',
  `first_approved_country` json DEFAULT NULL COMMENT '首批国家, List<String>',
  `first_approved_indication` json DEFAULT NULL COMMENT '首批适应症, List<String>',
  `research_disease` json DEFAULT NULL COMMENT '在研适应症, List<String>',
  `non_research_disease` json DEFAULT NULL COMMENT '非在研适应症, List<String>',
  `inactive_org_master_entity_id` json DEFAULT NULL COMMENT '非在研机构 ,List<String>',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域, List<String>',
  `approval_country` json DEFAULT NULL COMMENT '获批国家, List<String>',
  `research_country` json DEFAULT NULL COMMENT '研发国家, List<String>',
  `rnk` int(11) DEFAULT NULL COMMENT '同靶点药物排名',
  `disease_phase` json DEFAULT NULL COMMENT '药物适应症 pahse, List<Map>',
  `adc_count` int(11) DEFAULT NULL COMMENT 'adc 药物被关联的次数',
  `target_extend_id` varchar(32) DEFAULT NULL COMMENT '多靶点表ID  生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `has_leading_org_involved` tinyint(1) DEFAULT NULL COMMENT '是否有头部企业参与',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `data_status` varchar(10) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `original_drug_id` json DEFAULT NULL COMMENT '生物类似药',
  `created_by` varchar(255) DEFAULT NULL,
  `updated_by` varchar(255) DEFAULT NULL,
  `deal_related_org` json DEFAULT NULL COMMENT '交易涉及机构',
  `first_approved_date_cn` bigint(20) DEFAULT NULL COMMENT '中国首批时间',
  `moiety_target_id` json DEFAULT NULL COMMENT '抗体靶点ID',
  `payload_target_id` json DEFAULT NULL COMMENT '载荷靶点ID',
  `moiety_mechanism_action_id` json DEFAULT NULL COMMENT '抗体作用机制ID',
  `payload_mechanism_action_id` json DEFAULT NULL COMMENT '载荷作用机制D',
  `moiety_target_extend_id` varchar(32) DEFAULT NULL COMMENT '抗体靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `payload_target_extend_id` varchar(32) DEFAULT NULL COMMENT '载荷靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  PRIMARY KEY (`drug_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `docid` (`docid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='药物业务表'
示例数据：[{'drug_id': '0000717d1e7143dc94fd46c1755cd8e3', 'is_qidp': 'false', 'global_highest_dev_status': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'is_first_in_class': 'false', 'non_research_disease': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'originator_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]', 'created_ts': '1677735049000', 'drug_type': '["1151dbc710f64a85923dc05d4a5a0ba9"]', 'data_status': 'ACTIVE', 'drug_name': '[{"lang": "EN", "name": "JM023", "status": "ACTIVE"}]', 'research_country': '[{"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "c9e8fce7eb6b4bbd9cc66dc356017aab", "dev_status_time": {"time_trust_code": 7, "time_ts": 1669766400000}}]', 'created_by': 'data@patsnap.com', 'data_source': '10', 'updated_by': 'data@patsnap.com', 'dev_code': '[{"name": "AD20190509", "status": "ACTIVE"}]', 'is_pathway': 'false', 'disease_phase': '[{"disease_id": "25aa9dbd25714b36b8bcb9347d1b91d1", "highest_phase_cn": "c9e8fce7eb6b4bbd9cc66dc356017aab", "highest_phase_global": "c9e8fce7eb6b4bbd9cc66dc356017aab"}]', 'therapeutic_area': '["042cbe45c973477b957717ded29ef7b6"]', 'is_nme': 'false', 'updated_ts': '1735604387000', 'is_compound_medicine': 'false', 'docid': '36127', 'null_target_reason': 'UNDEFINED', 'highest_dev_status_cn': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'disease_id': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'inactive_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]'}, {'drug_id': '0000d4a23502459386f511f0dfdad0df', 'is_qidp': 'false', 'global_highest_dev_status': 'efd6215835394b07b046125e3175d3fe', 'is_first_in_class': 'false', 'first_approved_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be"]', 'drugbank_id': '["DB11606"]', 'non_research_disease': '["e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'originator_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'created_ts': '1633704418000', 'drug_type': '["4d2dcd3fc8b644db955f8cccefca280b"]', 'target_extend_id': '450cd6ab529c38d4b0ad05aaff0d5fd7', 'data_status': 'ACTIVE', 'first_approved_indication': '["07d4cf59dafc4a35840dbf53e136394a"]', 'drug_name': '[{"lang": "CN", "name": "舒索凝血素α", "source_info": [{"code": "国药准字SJ20240009", "normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "patsnap_id": "ea95955e04de20edd2a022ee3882a984", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"normalized_source_id": "c550fafe5544447091b21ca6c19f70f2", "source": "EMA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "スソクトコグ アルファ（遺伝子組換え）", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'mechanism_action_id': '["979b395f8c612b269b4c98663691de9d"]', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'research_country': '[{"country": "0dc5d896-7408-3c87-84c0-22e3d9b784be", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1414022400000}}, {"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1708387200000}}, {"country": "9a18968a-f130-3a00-80b6-8b9e2eec4838", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "676de5ba-893a-36bb-8683-c93306aaf769", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1711411200000}}, {"country": "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1461888000000}}, {"country": "3d57c904-23bf-3ee0-9924-83496c75b8ee", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "52d1b118-b540-37ba-9cb2-f5aff686bb10", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1679270400000}}, {"country": "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "665d1d12-3d14-3e05-8459-014864489671", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "672807de-6d33-3706-a350-c97e6ed7735e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1620950400000}}, {"country": "cf11da47-6a9f-3948-9d29-8a824f805638", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7cb930b-9b67-3639-97cd-dab2ce82da83", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "0e7802a9-bad3-33a3-98ae-ff755c717809", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "dc266be9-66b5-3c85-af35-ef210568f738", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "1b05c4d2-8156-3854-9898-c71e0077e3c6", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "bf460c70-eac8-3426-baa3-7e6c72bc0889", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "15d3c741-f4c4-35d8-9273-339b5972916e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "4ac42935-7005-3e0d-a0e9-698b15e3986b", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7693298-e9f4-3dfb-ad3e-fda6b7e59658", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "2f753928-f426-3cc1-9ea6-8c25f6a4d330", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1444348800000}}, {"country": "bb1d5b11-d9f8-31c4-872c-65a9fad8d193", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "6d64b019-4f80-31e9-b248-297aa588c950", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "00d7d9ab-3d75-3fa9-9849-2f715d69f010", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "027bd29d-069d-3fdf-aa1a-be891fbaae92", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}]', 'wiki_link': 'https://en.wikipedia.org/wiki/Susoctocog_alfa', 'created_by': 'data@patsnap.com', 'data_source': '10', 'rnk': '9', 'kegg_id': '["D10831"]', 'biological_drug_source': '5763f27b05ac432dafde44df27a4ec76', 'express_system': '6ce3b90730044258a81ab5a3e9288495', 'updated_by': 'youjia@patsnap.com', 'research_disease': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a"]', 'atc_code': '["7319cbc33cb0475a94bf687ed6634978"]', 'dev_code': '[{"name": "BAX 802", "status": "ACTIVE"}, {"name": "BAX-801", "status": "ACTIVE"}, {"name": "BAX-802", "status": "ACTIVE"}, {"name": "BAX801", "status": "ACTIVE"}, {"name": "OBI-1", "status": "ACTIVE"}, {"name": "SHP672", "status": "ACTIVE"}, {"name": "TAK 672", "status": "ACTIVE"}]', 'trade_name': '[{"lang": "EN", "name": "Obizur", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "JP", "name": "オビザー", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "CN", "name": "助因止", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "patsnap_id": "1c1403c1-b1e8-3014-96e8-1939c36cfecb", "patsnap_type": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "http://mp.weixin.qq.com/s?__biz=MzA5Njc0MTAxOQ==&mid=2650027443&idx=1&sn=71b7cef6c2070906937036501e33b9cc"}], "status": "ACTIVE"}, {"lang": "KR", "name": "오비주르주[서스옥토코그알파", "source_info": [{"code": "202300956", "normalized_source_id": "6f08ac4a5ca144f8b59de74187e41886", "source": "MFDS", "source_url": "https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202300956aupdateTs2024-06-10%2018:52:49.0b"}], "status": "ACTIVE"}]', 'active_org_master_entity_id': '["4099573c333dcbc48d8f398aee392060", "ad3caef0a55e98b5fc495d9921bf43e0", "b0b1d828ce0abb09b0567b191f02bb53", "f4bc92165e87f4758502c119ebc15574", "f6b3099a6af884bd6b51c208d8c47644", "3213232cf3774bc734def2420b679bb6"]', 'is_pathway': 'false', 'alias': '[{"lang": "EN", "name": "Antihemophilic Factor (Recombinant), Porcine Sequence", "source_info": [{"code": "BLA125512", "normalized_source_id": "f3bd4fd130ec4588971e9008b5010e32", "patsnap_id": "854204585a22558d8532e5de92e5d898", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "FDA_CBER"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor (recombinant) porcine sequence", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor porcine, B-domain truncated recombinant", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "PFVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine recombinant factor VIII B-domain truncated", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Recombinant porcine factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "RpfVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa (INN)", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'special_review': '["23d3523b7ece48ddacaddac53a66949d", "043a131d85994801b3617e822e7f87b3"]', 'disease_phase': '[{"disease_id": "71d86eb1f39c4e509b8da8fe4343bdd3", "highest_phase_before_ter_global": "9f31233bceb94d9796d3f3556f17ab13", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "e30a25b1033043c4adf00e944889533c", "highest_phase_before_ter_global": "f835774c48404593b64ef05369eb8eba", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "07d4cf59dafc4a35840dbf53e136394a", "highest_phase_cn": "efd6215835394b07b046125e3175d3fe", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "d1e154571f0a46f8b15f8997f3031fd1", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "18795373eb704b16936d51c793bbea01", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}]', 'therapeutic_area': '["c354b2ea74d349da99bef8388390c7d8", "5b1dfc2ca8564662860187aef864467d", "67034410be134e2bbb5b0930595b5e75"]', 'is_nme': 'false', 'updated_ts': '1737614304000', 'is_compound_medicine': 'false', 'docid': '4178', 'first_approved_date_cn': '1708387200000', 'target_id': '["3f888f3938b34a4ca124145b3fa1e229"]', 'highest_dev_status_cn': 'efd6215835394b07b046125e3175d3fe', 'approval_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be", "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "9a18968a-f130-3a00-80b6-8b9e2eec4838", "676de5ba-893a-36bb-8683-c93306aaf769", "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "3d57c904-23bf-3ee0-9924-83496c75b8ee", "52d1b118-b540-37ba-9cb2-f5aff686bb10", "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "665d1d12-3d14-3e05-8459-014864489671"]', 'disease_id': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a", "e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'if_speculate': 'false', 'inactive_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'first_approved_date': '1414022400000'}]
2025-02-26 22:57:53,537 - utils.logger - INFO - Structure for table ads_phs_pub_name retrieved: 表名：ads_phs_pub_name
表结构：CREATE TABLE `ads_phs_pub_name` (
  `data_id` varchar(36) NOT NULL COMMENT 'ID',
  `data_type` varchar(32) NOT NULL COMMENT '数据类型，如 DRUG/TARGET/DISEASE',
  `name_type` varchar(64) NOT NULL COMMENT '名称类型',
  `name` varchar(604) NOT NULL COMMENT '名称',
  `lang` varchar(32) NOT NULL COMMENT '名称语言',
  `match_type` json DEFAULT NULL COMMENT 'NOR 时需匹配的字段',
  `source_info` json DEFAULT NULL COMMENT '来源信息 List<String>',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `status` varchar(6) NOT NULL COMMENT 'dmp数据状态 DELETE/ACTIVE',
  `data_status` varchar(6) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `created_by` varchar(255) DEFAULT NULL COMMENT '创建人',
  `updated_by` varchar(255) DEFAULT NULL COMMENT '更新人',
  `version` int(11) DEFAULT NULL COMMENT '数据版本',
  `uuid` varchar(32) NOT NULL COMMENT '根据联合主键生成UUID',
  PRIMARY KEY (`data_id`,`data_type`,`name_type`,`name`,`lang`) /*T![clustered_index] CLUSTERED */,
  KEY `idx_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='PHS名称明细表'
示例数据：[{'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'c30e89f559c238d69a83a889903eb161', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formyl Furan', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}, {'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'eeffaee758fe3ae3929d321806deb8df', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formylofuran', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}]
2025-02-26 22:58:19,960 - utils.logger - INFO - Generated SQL Response: content='{\n  "sql": "SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, \'one\', \'索托拉西布\', NULL, \'$[*].name\') IS NOT NULL AND data_status = \'ACTIVE\' ORDER BY updated_ts DESC LIMIT 5;"\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1477, 'prompt_tokens': 9032, 'total_tokens': 10509, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 1408, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-af7434e8-ce9f-456f-a5c4-9003996e05c4-0' usage_metadata={'input_tokens': 9032, 'output_tokens': 1477, 'total_tokens': 10509, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1408}}
2025-02-26 23:00:13,887 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:00:13,888 - utils.logger - INFO - find_similar_question input: {'question': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 23:00:16,917 - utils.logger - INFO - No similar question found
2025-02-26 23:00:16,918 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 23:00:16,919 - utils.logger - INFO - Route after similar question: {'result': {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}}
2025-02-26 23:00:16,921 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:00:16,922 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我查下药物索托拉西布都有哪些别名？', 'answer': ''}
2025-02-26 23:00:16,925 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-26 23:00:41,336 - utils.logger - INFO - Analyzed user intent: {'intent': '用户希望查询药物索托拉西布的别名信息，即获取该药物可能使用的其他名称（别名、同义词等）。', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 23:00:41,337 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 23:00:41,339 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:00:41,339 - utils.logger - INFO - generate_sql input: {'intent': '用户希望查询药物索托拉西布的别名信息，即获取该药物可能使用的其他名称（别名、同义词等）。', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我查下药物索托拉西布都有哪些别名？'}
2025-02-26 23:00:41,341 - utils.logger - INFO - Structure for table ads_phs_drug retrieved: 表名：ads_phs_drug
表结构：CREATE TABLE `ads_phs_drug` (
  `drug_id` varchar(32) NOT NULL COMMENT '药物 ID',
  `docid` int(11) DEFAULT NULL COMMENT '数字主键',
  `drug_name` json NOT NULL COMMENT '药物名称, List<Map>',
  `alias` json DEFAULT NULL COMMENT '别名, List<Map>',
  `dev_code` json DEFAULT NULL COMMENT '研发代码, List<Map>',
  `trade_name` json DEFAULT NULL COMMENT '商品名, List<Map>',
  `generic_name` json DEFAULT NULL COMMENT '通用名称, List<Map>',
  `is_nme` tinyint(1) DEFAULT NULL COMMENT '是否NME, New molecular entity',
  `is_first_in_class` tinyint(1) DEFAULT NULL COMMENT '是否First-in-class',
  `is_qidp` tinyint(1) DEFAULT NULL COMMENT '是否 Qualified Infectious Disease Product 合格传染病产品资格',
  `is_compound_medicine` tinyint(1) DEFAULT NULL COMMENT '是否复方',
  `biological_drug_source` varchar(32) DEFAULT NULL COMMENT '生物药来源 dict_type= BIOLOGICAL_DRUG_SOURCE',
  `express_system` varchar(32) DEFAULT NULL COMMENT '表达体系 dict_type=EXPRESS_SYSTEM',
  `registered_classification_cn` varchar(32) DEFAULT NULL COMMENT '中国注册分类',
  `null_target_reason` varchar(32) DEFAULT NULL COMMENT '无靶点原因 NOT_AVAILABLE/UNDEFINED',
  `wiki_link` varchar(1500) DEFAULT NULL COMMENT 'wiki 地址',
  `drugbank_id` json DEFAULT NULL COMMENT 'drugbank_id, List<String>',
  `kegg_id` json DEFAULT NULL COMMENT 'kegg_id, List<String>',
  `related_component` json DEFAULT NULL COMMENT '复方药的相关组分, List<String>',
  `drug_type` json DEFAULT NULL COMMENT '药物类型, List<String>',
  `originator_org_master_entity_id` json DEFAULT NULL COMMENT '原研机构, List<String>',
  `mechanism_action_id` json DEFAULT NULL COMMENT '作用机制 ID, List<String>',
  `target_id` json DEFAULT NULL COMMENT '靶点 id, List<String>',
  `atc_code` json DEFAULT NULL COMMENT 'ATC 代码，WHO发布的药物分类系统, List<String>',
  `antibody_drug_id` varchar(32) DEFAULT NULL COMMENT '抗体 ID',
  `antibody_type` varchar(32) DEFAULT NULL COMMENT '抗体类型',
  `linker_id` varchar(32) DEFAULT NULL COMMENT '连接子 id',
  `linker_number` varchar(32) DEFAULT NULL COMMENT '连接子数量',
  `payload_id` varchar(32) DEFAULT NULL COMMENT '载荷id',
  `dar` json DEFAULT NULL COMMENT '药物抗体比',
  `specific_site` tinyint(1) DEFAULT NULL COMMENT '是否定点偶联',
  `site_id` varchar(32) DEFAULT NULL COMMENT '位点id',
  `adc_reference` json DEFAULT NULL COMMENT 'ADC 参考信息',
  `target_moiety_type` json DEFAULT NULL COMMENT '靶向药物类型',
  `data_source` int(3) DEFAULT NULL COMMENT '数据来源',
  `genetic_material` varchar(32) DEFAULT NULL COMMENT '遗传物质, dict_type = V_GENETIC_MATERIAL',
  `delivery_system` json DEFAULT NULL COMMENT '递送系统, dict_type = V_DELIVERY_SYSTEM',
  `targeted_tissue` json DEFAULT NULL COMMENT '靶向组织, dict_type = V_TARGETED_TISSUE',
  `paired_region` json DEFAULT NULL COMMENT '识别区域, dict_type = V_PAIRED_REGION',
  `regulation_type` json DEFAULT NULL COMMENT '调控机制, dict_type = V_REGULATION_TYPE',
  `tech_platform` json DEFAULT NULL COMMENT '技术平台, dict_type = TECH_PLATFORM',
  `source_info_xna` json DEFAULT NULL COMMENT '核酸药物来源信息',
  `if_speculate` tinyint(1) DEFAULT NULL COMMENT '是否含有推测信息, 比如利用 WHO INN 推测药物结构',
  `profile` json DEFAULT NULL COMMENT '描述',
  `is_pathway` tinyint(1) DEFAULT NULL COMMENT '是否 pathway',
  `special_review` json DEFAULT NULL COMMENT '特殊审评 List<String>',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID List<String>',
  `active_org_master_entity_id` json DEFAULT NULL COMMENT '在研机构 List<String>',
  `global_highest_dev_status` varchar(32) DEFAULT NULL COMMENT '全球最高研发状态',
  `global_highest_dev_status_before_termination` varchar(32) DEFAULT NULL COMMENT '终止前全球最高研发状态',
  `highest_dev_status_cn` varchar(32) DEFAULT NULL COMMENT '中国最高研发状态',
  `highest_dev_status_before_termination_cn` varchar(32) DEFAULT NULL COMMENT '终止前中国最高研发状态',
  `first_approved_date` bigint(20) DEFAULT NULL COMMENT '首批时间',
  `first_approved_country` json DEFAULT NULL COMMENT '首批国家, List<String>',
  `first_approved_indication` json DEFAULT NULL COMMENT '首批适应症, List<String>',
  `research_disease` json DEFAULT NULL COMMENT '在研适应症, List<String>',
  `non_research_disease` json DEFAULT NULL COMMENT '非在研适应症, List<String>',
  `inactive_org_master_entity_id` json DEFAULT NULL COMMENT '非在研机构 ,List<String>',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域, List<String>',
  `approval_country` json DEFAULT NULL COMMENT '获批国家, List<String>',
  `research_country` json DEFAULT NULL COMMENT '研发国家, List<String>',
  `rnk` int(11) DEFAULT NULL COMMENT '同靶点药物排名',
  `disease_phase` json DEFAULT NULL COMMENT '药物适应症 pahse, List<Map>',
  `adc_count` int(11) DEFAULT NULL COMMENT 'adc 药物被关联的次数',
  `target_extend_id` varchar(32) DEFAULT NULL COMMENT '多靶点表ID  生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `has_leading_org_involved` tinyint(1) DEFAULT NULL COMMENT '是否有头部企业参与',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `data_status` varchar(10) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `original_drug_id` json DEFAULT NULL COMMENT '生物类似药',
  `created_by` varchar(255) DEFAULT NULL,
  `updated_by` varchar(255) DEFAULT NULL,
  `deal_related_org` json DEFAULT NULL COMMENT '交易涉及机构',
  `first_approved_date_cn` bigint(20) DEFAULT NULL COMMENT '中国首批时间',
  `moiety_target_id` json DEFAULT NULL COMMENT '抗体靶点ID',
  `payload_target_id` json DEFAULT NULL COMMENT '载荷靶点ID',
  `moiety_mechanism_action_id` json DEFAULT NULL COMMENT '抗体作用机制ID',
  `payload_mechanism_action_id` json DEFAULT NULL COMMENT '载荷作用机制D',
  `moiety_target_extend_id` varchar(32) DEFAULT NULL COMMENT '抗体靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `payload_target_extend_id` varchar(32) DEFAULT NULL COMMENT '载荷靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  PRIMARY KEY (`drug_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `docid` (`docid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='药物业务表'
示例数据：[{'drug_id': '0000717d1e7143dc94fd46c1755cd8e3', 'is_qidp': 'false', 'global_highest_dev_status': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'is_first_in_class': 'false', 'non_research_disease': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'originator_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]', 'created_ts': '1677735049000', 'drug_type': '["1151dbc710f64a85923dc05d4a5a0ba9"]', 'data_status': 'ACTIVE', 'drug_name': '[{"lang": "EN", "name": "JM023", "status": "ACTIVE"}]', 'research_country': '[{"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "c9e8fce7eb6b4bbd9cc66dc356017aab", "dev_status_time": {"time_trust_code": 7, "time_ts": 1669766400000}}]', 'created_by': 'data@patsnap.com', 'data_source': '10', 'updated_by': 'data@patsnap.com', 'dev_code': '[{"name": "AD20190509", "status": "ACTIVE"}]', 'is_pathway': 'false', 'disease_phase': '[{"disease_id": "25aa9dbd25714b36b8bcb9347d1b91d1", "highest_phase_cn": "c9e8fce7eb6b4bbd9cc66dc356017aab", "highest_phase_global": "c9e8fce7eb6b4bbd9cc66dc356017aab"}]', 'therapeutic_area': '["042cbe45c973477b957717ded29ef7b6"]', 'is_nme': 'false', 'updated_ts': '1735604387000', 'is_compound_medicine': 'false', 'docid': '36127', 'null_target_reason': 'UNDEFINED', 'highest_dev_status_cn': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'disease_id': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'inactive_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]'}, {'drug_id': '0000d4a23502459386f511f0dfdad0df', 'is_qidp': 'false', 'global_highest_dev_status': 'efd6215835394b07b046125e3175d3fe', 'is_first_in_class': 'false', 'first_approved_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be"]', 'drugbank_id': '["DB11606"]', 'non_research_disease': '["e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'originator_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'created_ts': '1633704418000', 'drug_type': '["4d2dcd3fc8b644db955f8cccefca280b"]', 'target_extend_id': '450cd6ab529c38d4b0ad05aaff0d5fd7', 'data_status': 'ACTIVE', 'first_approved_indication': '["07d4cf59dafc4a35840dbf53e136394a"]', 'drug_name': '[{"lang": "CN", "name": "舒索凝血素α", "source_info": [{"code": "国药准字SJ20240009", "normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "patsnap_id": "ea95955e04de20edd2a022ee3882a984", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"normalized_source_id": "c550fafe5544447091b21ca6c19f70f2", "source": "EMA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "スソクトコグ アルファ（遺伝子組換え）", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'mechanism_action_id': '["979b395f8c612b269b4c98663691de9d"]', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'research_country': '[{"country": "0dc5d896-7408-3c87-84c0-22e3d9b784be", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1414022400000}}, {"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1708387200000}}, {"country": "9a18968a-f130-3a00-80b6-8b9e2eec4838", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "676de5ba-893a-36bb-8683-c93306aaf769", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1711411200000}}, {"country": "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1461888000000}}, {"country": "3d57c904-23bf-3ee0-9924-83496c75b8ee", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "52d1b118-b540-37ba-9cb2-f5aff686bb10", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1679270400000}}, {"country": "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "665d1d12-3d14-3e05-8459-014864489671", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "672807de-6d33-3706-a350-c97e6ed7735e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1620950400000}}, {"country": "cf11da47-6a9f-3948-9d29-8a824f805638", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7cb930b-9b67-3639-97cd-dab2ce82da83", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "0e7802a9-bad3-33a3-98ae-ff755c717809", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "dc266be9-66b5-3c85-af35-ef210568f738", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "1b05c4d2-8156-3854-9898-c71e0077e3c6", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "bf460c70-eac8-3426-baa3-7e6c72bc0889", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "15d3c741-f4c4-35d8-9273-339b5972916e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "4ac42935-7005-3e0d-a0e9-698b15e3986b", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7693298-e9f4-3dfb-ad3e-fda6b7e59658", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "2f753928-f426-3cc1-9ea6-8c25f6a4d330", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1444348800000}}, {"country": "bb1d5b11-d9f8-31c4-872c-65a9fad8d193", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "6d64b019-4f80-31e9-b248-297aa588c950", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "00d7d9ab-3d75-3fa9-9849-2f715d69f010", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "027bd29d-069d-3fdf-aa1a-be891fbaae92", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}]', 'wiki_link': 'https://en.wikipedia.org/wiki/Susoctocog_alfa', 'created_by': 'data@patsnap.com', 'data_source': '10', 'rnk': '9', 'kegg_id': '["D10831"]', 'biological_drug_source': '5763f27b05ac432dafde44df27a4ec76', 'express_system': '6ce3b90730044258a81ab5a3e9288495', 'updated_by': 'youjia@patsnap.com', 'research_disease': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a"]', 'atc_code': '["7319cbc33cb0475a94bf687ed6634978"]', 'dev_code': '[{"name": "BAX 802", "status": "ACTIVE"}, {"name": "BAX-801", "status": "ACTIVE"}, {"name": "BAX-802", "status": "ACTIVE"}, {"name": "BAX801", "status": "ACTIVE"}, {"name": "OBI-1", "status": "ACTIVE"}, {"name": "SHP672", "status": "ACTIVE"}, {"name": "TAK 672", "status": "ACTIVE"}]', 'trade_name': '[{"lang": "EN", "name": "Obizur", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "JP", "name": "オビザー", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "CN", "name": "助因止", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "patsnap_id": "1c1403c1-b1e8-3014-96e8-1939c36cfecb", "patsnap_type": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "http://mp.weixin.qq.com/s?__biz=MzA5Njc0MTAxOQ==&mid=2650027443&idx=1&sn=71b7cef6c2070906937036501e33b9cc"}], "status": "ACTIVE"}, {"lang": "KR", "name": "오비주르주[서스옥토코그알파", "source_info": [{"code": "202300956", "normalized_source_id": "6f08ac4a5ca144f8b59de74187e41886", "source": "MFDS", "source_url": "https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202300956aupdateTs2024-06-10%2018:52:49.0b"}], "status": "ACTIVE"}]', 'active_org_master_entity_id': '["4099573c333dcbc48d8f398aee392060", "ad3caef0a55e98b5fc495d9921bf43e0", "b0b1d828ce0abb09b0567b191f02bb53", "f4bc92165e87f4758502c119ebc15574", "f6b3099a6af884bd6b51c208d8c47644", "3213232cf3774bc734def2420b679bb6"]', 'is_pathway': 'false', 'alias': '[{"lang": "EN", "name": "Antihemophilic Factor (Recombinant), Porcine Sequence", "source_info": [{"code": "BLA125512", "normalized_source_id": "f3bd4fd130ec4588971e9008b5010e32", "patsnap_id": "854204585a22558d8532e5de92e5d898", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "FDA_CBER"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor (recombinant) porcine sequence", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor porcine, B-domain truncated recombinant", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "PFVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine recombinant factor VIII B-domain truncated", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Recombinant porcine factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "RpfVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa (INN)", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'special_review': '["23d3523b7ece48ddacaddac53a66949d", "043a131d85994801b3617e822e7f87b3"]', 'disease_phase': '[{"disease_id": "71d86eb1f39c4e509b8da8fe4343bdd3", "highest_phase_before_ter_global": "9f31233bceb94d9796d3f3556f17ab13", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "e30a25b1033043c4adf00e944889533c", "highest_phase_before_ter_global": "f835774c48404593b64ef05369eb8eba", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "07d4cf59dafc4a35840dbf53e136394a", "highest_phase_cn": "efd6215835394b07b046125e3175d3fe", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "d1e154571f0a46f8b15f8997f3031fd1", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "18795373eb704b16936d51c793bbea01", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}]', 'therapeutic_area': '["c354b2ea74d349da99bef8388390c7d8", "5b1dfc2ca8564662860187aef864467d", "67034410be134e2bbb5b0930595b5e75"]', 'is_nme': 'false', 'updated_ts': '1737614304000', 'is_compound_medicine': 'false', 'docid': '4178', 'first_approved_date_cn': '1708387200000', 'target_id': '["3f888f3938b34a4ca124145b3fa1e229"]', 'highest_dev_status_cn': 'efd6215835394b07b046125e3175d3fe', 'approval_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be", "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "9a18968a-f130-3a00-80b6-8b9e2eec4838", "676de5ba-893a-36bb-8683-c93306aaf769", "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "3d57c904-23bf-3ee0-9924-83496c75b8ee", "52d1b118-b540-37ba-9cb2-f5aff686bb10", "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "665d1d12-3d14-3e05-8459-014864489671"]', 'disease_id': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a", "e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'if_speculate': 'false', 'inactive_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'first_approved_date': '1414022400000'}]
2025-02-26 23:00:41,344 - utils.logger - INFO - Structure for table ads_phs_pub_name retrieved: 表名：ads_phs_pub_name
表结构：CREATE TABLE `ads_phs_pub_name` (
  `data_id` varchar(36) NOT NULL COMMENT 'ID',
  `data_type` varchar(32) NOT NULL COMMENT '数据类型，如 DRUG/TARGET/DISEASE',
  `name_type` varchar(64) NOT NULL COMMENT '名称类型',
  `name` varchar(604) NOT NULL COMMENT '名称',
  `lang` varchar(32) NOT NULL COMMENT '名称语言',
  `match_type` json DEFAULT NULL COMMENT 'NOR 时需匹配的字段',
  `source_info` json DEFAULT NULL COMMENT '来源信息 List<String>',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `status` varchar(6) NOT NULL COMMENT 'dmp数据状态 DELETE/ACTIVE',
  `data_status` varchar(6) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `created_by` varchar(255) DEFAULT NULL COMMENT '创建人',
  `updated_by` varchar(255) DEFAULT NULL COMMENT '更新人',
  `version` int(11) DEFAULT NULL COMMENT '数据版本',
  `uuid` varchar(32) NOT NULL COMMENT '根据联合主键生成UUID',
  PRIMARY KEY (`data_id`,`data_type`,`name_type`,`name`,`lang`) /*T![clustered_index] CLUSTERED */,
  KEY `idx_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='PHS名称明细表'
示例数据：[{'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'c30e89f559c238d69a83a889903eb161', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formyl Furan', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}, {'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'eeffaee758fe3ae3929d321806deb8df', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formylofuran', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}]
2025-02-26 23:01:07,575 - utils.logger - INFO - Generated SQL Response: content='{"sql": "SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, \'one\', \'索托拉西布\') IS NOT NULL AND data_status=\'ACTIVE\' ORDER BY updated_ts DESC LIMIT 5;"}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 699, 'prompt_tokens': 9034, 'total_tokens': 9733, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 640, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-1529b397-192a-4e74-b516-984dd752bd12-0' usage_metadata={'input_tokens': 9034, 'output_tokens': 699, 'total_tokens': 9733, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 640}}
2025-02-26 23:01:19,555 - utils.logger - INFO - Generated SQL: {'original_input': '帮我查下药物索托拉西布都有哪些别名？', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'sql': "SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, 'one', '索托拉西布') IS NOT NULL AND data_status='ACTIVE' ORDER BY updated_ts DESC LIMIT 5;"}
2025-02-26 23:01:20,253 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 23:01:22,791 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:01:22,792 - utils.logger - INFO - execute_sql input: {'original_input': '帮我查下药物索托拉西布都有哪些别名？', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'sql': "SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, 'one', '索托拉西布') IS NOT NULL AND data_status='ACTIVE' ORDER BY updated_ts DESC LIMIT 5;"}
2025-02-26 23:01:22,794 - utils.logger - INFO - Executing query: SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, 'one', '索托拉西布') IS NOT NULL AND data_status='ACTIVE' ORDER BY updated_ts DESC LIMIT 5;
2025-02-26 23:01:24,757 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我查下药物索托拉西布都有哪些别名？', 'sql': "SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, 'one', '索托拉西布') IS NOT NULL AND data_status='ACTIVE' ORDER BY updated_ts DESC LIMIT 5;", 'query_result': [{'alias': '[{"lang": "CN", "name": "索托雷塞", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://mp.weixin.qq.com/s?__biz=MzkzNjIzMTU0Nw==&mid=2247544624&idx=1&sn=2ab6c478dc27ece2d6460b9dc1249cba"}], "status": "ACTIVE"}, {"lang": "CN", "name": "索拖拉西布", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.toutiao.com/article/7327142320594338355/"}], "status": "ACTIVE"}]'}]}
2025-02-26 23:01:24,758 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 23:01:24,760 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:01:24,761 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我查下药物索托拉西布都有哪些别名？', 'sql': "SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, 'one', '索托拉西布') IS NOT NULL AND data_status='ACTIVE' ORDER BY updated_ts DESC LIMIT 5;", 'query_result': [{'alias': '[{"lang": "CN", "name": "索托雷塞", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://mp.weixin.qq.com/s?__biz=MzkzNjIzMTU0Nw==&mid=2247544624&idx=1&sn=2ab6c478dc27ece2d6460b9dc1249cba"}], "status": "ACTIVE"}, {"lang": "CN", "name": "索拖拉西布", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.toutiao.com/article/7327142320594338355/"}], "status": "ACTIVE"}]'}]}
2025-02-26 23:01:35,566 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我查下药物索托拉西布都有哪些别名？', 'sql': "SELECT alias FROM ads_phs_drug WHERE JSON_SEARCH(drug_name, 'one', '索托拉西布') IS NOT NULL AND data_status='ACTIVE' ORDER BY updated_ts DESC LIMIT 5;", 'answer': '下面是对查询结果的整理展示：\n\n记录中的 alias 字段包含两个条目，每个条目都含有语言、名称、状态以及来源信息。整理后的内容如下：\n\n1. 条目 1：\n   • 语言：CN  \n   • 名称：索托雷塞  \n   • 状态：ACTIVE  \n   • 来源信息：  \n\u2003\u2003– normalized_source_id：0b0db149ab6e4a978c1c4e83498d6d5a  \n\u2003\u2003– 来源：NEWS  \n\u2003\u2003– 链接：https://mp.weixin.qq.com/s?__biz=MzkzNjIzMTU0Nw==&mid=2247544624&idx=1&sn=2ab6c478dc27ece2d6460b9dc1249cba\n\n2. 条目 2：\n   • 语言：CN  \n   • 名称：索拖拉西布  \n   • 状态：ACTIVE  \n   • 来源信息：  \n\u2003\u2003– normalized_source_id：0b0db149ab6e4a978c1c4e83498d6d5a  \n\u2003\u2003– 来源：NEWS  \n\u2003\u2003– 链接：https://www.toutiao.com/article/7327142320594338355/\n\n这样，每条信息都一目了然，便于查阅。'}
2025-02-26 23:01:35,567 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-26 23:01:35,618 - utils.logger - INFO - 更新QA对: 帮我查下药物索托拉西布都有哪些别名？
2025-02-26 23:04:12,557 - utils.logger - ERROR - Workflow execution failed: Must provide state_schema or input and output
2025-02-26 23:09:57,130 - utils.logger - ERROR - Workflow execution failed: Must provide state_schema or input and output
2025-02-26 23:19:43,747 - utils.logger - ERROR - Workflow execution failed: 2 validation errors for AgentExecutor
agent
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x00000202B0D6A010>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
tools
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x00000202B0D6A010>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-02-26 23:21:12,189 - utils.logger - ERROR - Workflow execution failed: 2 validation errors for AgentExecutor
agent
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x000001B812C0B590>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
tools
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x000001B812C0B590>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-02-26 23:22:33,851 - utils.logger - ERROR - Workflow execution failed: 2 validation errors for AgentExecutor
agent
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x0000019AE1989910>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
tools
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x0000019AE1989910>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-02-26 23:25:12,351 - utils.logger - ERROR - Workflow execution failed: 2 validation errors for AgentExecutor
agent
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x000002365BF2F0D0>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
tools
  Field required [type=missing, input_value={'state_graph': <langgrap... at 0x000002365BF2F0D0>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-02-26 23:31:19,717 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:31:20,340 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:31:44,467 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 23:31:44,469 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 23:31:44,471 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:31:44,474 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:36:02,098 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:36:02,099 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:36:04,999 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 23:36:05,000 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 23:36:05,001 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:36:05,002 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:38:42,762 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:38:42,763 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:38:46,080 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 23:38:46,081 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 23:38:46,082 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:38:46,083 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:42:55,166 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:42:55,166 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:42:57,890 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 23:42:57,891 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 23:42:57,892 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:43:51,024 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:48:42,947 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:48:42,948 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:48:45,348 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 23:48:45,349 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 23:48:45,350 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:49:00,393 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:49:00,398 - utils.logger - ERROR - Workflow execution failed: 'sql'
2025-02-26 23:51:07,176 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:51:07,178 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:51:13,786 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 23:51:13,788 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 23:51:13,789 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:51:13,791 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:52:24,691 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:52:24,692 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:52:27,313 - utils.logger - INFO - Found similar question: 帮我找几条药物通用名不为空的数据，返回药物ID及通用名
2025-02-26 23:52:27,314 - utils.logger - INFO - Similarity score: 0.09492176
2025-02-26 23:52:27,315 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:52:27,316 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:52:47,115 - utils.logger - INFO - 更新QA对: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
2025-02-26 23:53:08,791 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:53:08,791 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:53:14,110 - utils.logger - INFO - Found similar question: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
2025-02-26 23:53:14,111 - utils.logger - INFO - Similarity score: 0.0
2025-02-26 23:53:14,112 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:53:14,113 - utils.logger - INFO - Routing after similar question: {'result': {'sql': 'SELECT drug_id, generic_name FROM ads_phs_drug WHERE JSON_LENGTH(generic_name) > 0 ORDER BY drug_id LIMIT 5', 'answer': '以下是整理后的查询结果，每条记录均包含药物ID、通用名称（Generic Name）及其相关详细信息：\n\n────────────────────────────\n记录 1\n────────────────────────────\n药物ID: 0000d4a23502459386f511f0dfdad0df\n通用名称: Susoctocog alfa\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: D10831\n  • Normalized Source ID: a07dbc9f94144f609a25c9d343a2ec5b\n  • Source: KEGG\n\n────────────────────────────\n记录 2\n────────────────────────────\n药物ID: 000133a233844135a2994ad3dbd3c76f\n通用名称: Paramethasone\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 3\n────────────────────────────\n药物ID: 00023bcab2274722b9c6cfde9f264576\n通用名称: indinavir\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 9MG78X43ZT\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/ced0adc1-cbb6-4007-a90a-6fc0b7909e1f\n\n────────────────────────────\n记录 4\n────────────────────────────\n药物ID: 00199692457c4721b88795b26b04129b\n通用名称: Trastuzumab\n语言: EN\n状态: ACTIVE\n源码信息: 无\n\n────────────────────────────\n记录 5\n────────────────────────────\n药物ID: 001ab4d02229445bb129a717442d1097\n通用名称: Cefepime\n语言: EN\n状态: ACTIVE\n源码信息:\n  • Code: 807PW4VQE3\n  • Normalized Source ID: a69257a1f6e645e29d7e433ddc094e1d\n  • Source: GSRS\n  • Source URL: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1ea37786-4d7b-4457-8d77-f0ff52eb8f5d\n\n────────────────────────────\n\n以上即为整理后的易于查看的数据库查询结果。', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:53:14,137 - utils.logger - INFO - 更新QA对: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
2025-02-26 23:54:53,303 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:54:53,304 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:57:41,456 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:57:41,457 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-26 23:59:12,110 - utils.logger - INFO - Finding similar question beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-26 23:59:12,111 - utils.logger - INFO - find_similar_question input: {'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-27 00:01:09,686 - utils.logger - INFO - No similar question found
2025-02-27 00:01:15,978 - utils.logger - INFO - Finding similar question end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-27 00:01:18,737 - utils.logger - INFO - Routing after similar question: {'result': {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}, 'input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-27 00:01:42,400 - utils.logger - INFO - Analyzing user intent beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-27 00:01:42,401 - utils.logger - INFO - analyze_user_intent input: {'question': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'answer': ''}
2025-02-27 00:01:42,404 - utils.logger - INFO - Retrieved all available tables: [('ads_phs_patent_text_type', '中英文专利文本分类业务表'), ('ads_phs_drug_deal', '交易业务表'), ('ads_phs_dmp_drug_deal_sub_event', 'dmp交易子事件检索大宽表'), ('ads_phs_da_cde', 'CDE业务表'), ('ads_phs_cr_biomarker', '生物标志物(实体)业务表'), ('ads_phs_drug_special_approval_tuple', '特殊审评二元组业务表'), ('ads_phs_patent_fda', 'fda 专利业务表'), ('ads_phs_patent_technology', '专利技术分类业务表'), ('ads_phs_dmp_drug', '药物检索大宽表'), ('ads_phs_ct', '临床业务表'), ('ads_phs_patent_entity_rel', 'LS 专利关系业务表'), ('ads_phs_cr', '临床结果业务表'), ('ads_phs_tm', '转化医学业务表'), ('ads_phs_dmp_cr', '临床结果检索大宽表'), ('ads_phs_da_cde_special_approval', 'CDE特殊审批品种业务表'), ('ads_phs_dmp_dev_status', '研发状态（业务表）检索大宽表'), ('ads_phs_da_base', '药物审批基础业务表;ads'), ('ads_phs_dmp_ct', '临床检索大宽表'), ('ads_phs_dmp_dev_status_detail', '药物研发状态明细检索表'), ('ads_phs_target', '靶点业务表'), ('ads_phs_pub_name', 'PHS名称明细表'), ('ads_phs_patent_extension', '专利延期业务表'), ('ads_phs_dmp_tm', 'dmp转化医学检索大宽表'), ('ads_phs_drug', '药物业务表'), ('ads_phs_paper_rel', 'pharm 文献关系明细表'), ('ads_phs_drug_deal_translation', '交易业务翻译表'), ('ads_phs_dmp_biomarker', '生物标记物检索大宽表'), ('ads_phs_da_cde_breakthrough_therapy', 'CDE突破性治疗公示业务表'), ('ads_phs_patent_recommend', '专利推荐业务表'), ('ads_phs_da_cde_acceptance_progress', 'CDE受理进度业务表'), ('ads_phs_dmp_drug_deal', 'dmp交易检索大宽表'), ('ads_phs_patent_cde', 'cde 专利业务表'), ('ads_phs_dmp_target', '靶点大宽表'), ('ads_phs_dmp_news', '新闻检索大宽表'), ('ads_phs_drug_mechanism_action', '作用机制业务表'), ('ads_phs_tm_translation', '转化医学业务翻译表'), ('ads_phs_cr_endpoint', '终点指标(实体)业务表'), ('ads_phs_drug_chemical_rel', '药物结构关系业务表'), ('ads_phs_cr_group_list', '临床结果分组业务表'), ('ads_phs_cr_outcome_measure', '临床结果终点指标业务表'), ('ads_phs_pub_multi_source_rel', '公共实体关系表'), ('ads_phs_org', 'pharm机构业务表'), ('ads_phs_da_cde_priority_review', 'CDE优先审评公示业务表'), ('ads_phs_cr_baseline_measure', '临床结果基线业务表'), ('ads_phs_da_cde_trinity_publicity', 'CDE三合一序列公示业务表'), ('ads_phs_patent_dosage_form', 'PHS 专利剂型业务表'), ('ads_phs_report', '报告信息'), ('ads_phs_drug_milestone', '药物Milestone业务表'), ('ads_phs_da_cde_delivery_info', 'CDE送达信息业务表'), ('ads_phs_pub_entity_migration_record', '实体迁移记录业务表'), ('ads_phs_da_product', '药物审批product业务表;ads'), ('ads_phs_da_cde_acceptance_variety', 'CDE受理品种信业务表'), ('ads_phs_pub_annotation', '公共标注表;ads'), ('ads_phs_cr_translation', '临床结果翻译业务表'), ('ads_phs_da_cde_ct_imply_license', 'CDE临床默示许可业务表'), ('ads_phs_drug_special_approval', '药物特殊审评业务表'), ('ads_phs_da_submission', '药物审批submission业务表;ads'), ('ads_phs_dmp_drug_approval', ''), ('ads_phs_dmp_disease', '适应症检索大宽表'), ('ads_phs_ct_translation', '临床业务翻译表'), ('ads_phs_target_extend', '多靶点业务表'), ('ads_phs_disease', '适应症业务表'), ('ads_phs_dmp_endpoint', '终点指标检索大宽表'), ('ads_phs_da_cde_review_task_publicity', 'CDE审评任务公示业务表'), ('ads_phs_pub_entity_count', '实体 count 业务表'), ('ads_phs_kg_relationship_inc_daily', ''), ('ads_phs_drug_dev_status', '研发状态业务表'), ('ads_phs_dmp_mechanism', '作用机制大宽表')]
2025-02-27 00:02:07,101 - utils.logger - INFO - Analyzed user intent: {'intent': '查找拥有较多通用名的药物信息，返回这三条药物的药物ID、药物名称及其对应的通用名', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-27 00:02:07,102 - utils.logger - INFO - Analyzing user intent end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-27 00:02:07,106 - utils.logger - INFO - Generating SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-27 00:02:07,106 - utils.logger - INFO - generate_sql input: {'intent': '查找拥有较多通用名的药物信息，返回这三条药物的药物ID、药物名称及其对应的通用名', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名'}
2025-02-27 00:02:07,109 - utils.logger - INFO - Structure for table ads_phs_drug retrieved: 表名：ads_phs_drug
表结构：CREATE TABLE `ads_phs_drug` (
  `drug_id` varchar(32) NOT NULL COMMENT '药物 ID',
  `docid` int(11) DEFAULT NULL COMMENT '数字主键',
  `drug_name` json NOT NULL COMMENT '药物名称, List<Map>',
  `alias` json DEFAULT NULL COMMENT '别名, List<Map>',
  `dev_code` json DEFAULT NULL COMMENT '研发代码, List<Map>',
  `trade_name` json DEFAULT NULL COMMENT '商品名, List<Map>',
  `generic_name` json DEFAULT NULL COMMENT '通用名称, List<Map>',
  `is_nme` tinyint(1) DEFAULT NULL COMMENT '是否NME, New molecular entity',
  `is_first_in_class` tinyint(1) DEFAULT NULL COMMENT '是否First-in-class',
  `is_qidp` tinyint(1) DEFAULT NULL COMMENT '是否 Qualified Infectious Disease Product 合格传染病产品资格',
  `is_compound_medicine` tinyint(1) DEFAULT NULL COMMENT '是否复方',
  `biological_drug_source` varchar(32) DEFAULT NULL COMMENT '生物药来源 dict_type= BIOLOGICAL_DRUG_SOURCE',
  `express_system` varchar(32) DEFAULT NULL COMMENT '表达体系 dict_type=EXPRESS_SYSTEM',
  `registered_classification_cn` varchar(32) DEFAULT NULL COMMENT '中国注册分类',
  `null_target_reason` varchar(32) DEFAULT NULL COMMENT '无靶点原因 NOT_AVAILABLE/UNDEFINED',
  `wiki_link` varchar(1500) DEFAULT NULL COMMENT 'wiki 地址',
  `drugbank_id` json DEFAULT NULL COMMENT 'drugbank_id, List<String>',
  `kegg_id` json DEFAULT NULL COMMENT 'kegg_id, List<String>',
  `related_component` json DEFAULT NULL COMMENT '复方药的相关组分, List<String>',
  `drug_type` json DEFAULT NULL COMMENT '药物类型, List<String>',
  `originator_org_master_entity_id` json DEFAULT NULL COMMENT '原研机构, List<String>',
  `mechanism_action_id` json DEFAULT NULL COMMENT '作用机制 ID, List<String>',
  `target_id` json DEFAULT NULL COMMENT '靶点 id, List<String>',
  `atc_code` json DEFAULT NULL COMMENT 'ATC 代码，WHO发布的药物分类系统, List<String>',
  `antibody_drug_id` varchar(32) DEFAULT NULL COMMENT '抗体 ID',
  `antibody_type` varchar(32) DEFAULT NULL COMMENT '抗体类型',
  `linker_id` varchar(32) DEFAULT NULL COMMENT '连接子 id',
  `linker_number` varchar(32) DEFAULT NULL COMMENT '连接子数量',
  `payload_id` varchar(32) DEFAULT NULL COMMENT '载荷id',
  `dar` json DEFAULT NULL COMMENT '药物抗体比',
  `specific_site` tinyint(1) DEFAULT NULL COMMENT '是否定点偶联',
  `site_id` varchar(32) DEFAULT NULL COMMENT '位点id',
  `adc_reference` json DEFAULT NULL COMMENT 'ADC 参考信息',
  `target_moiety_type` json DEFAULT NULL COMMENT '靶向药物类型',
  `data_source` int(3) DEFAULT NULL COMMENT '数据来源',
  `genetic_material` varchar(32) DEFAULT NULL COMMENT '遗传物质, dict_type = V_GENETIC_MATERIAL',
  `delivery_system` json DEFAULT NULL COMMENT '递送系统, dict_type = V_DELIVERY_SYSTEM',
  `targeted_tissue` json DEFAULT NULL COMMENT '靶向组织, dict_type = V_TARGETED_TISSUE',
  `paired_region` json DEFAULT NULL COMMENT '识别区域, dict_type = V_PAIRED_REGION',
  `regulation_type` json DEFAULT NULL COMMENT '调控机制, dict_type = V_REGULATION_TYPE',
  `tech_platform` json DEFAULT NULL COMMENT '技术平台, dict_type = TECH_PLATFORM',
  `source_info_xna` json DEFAULT NULL COMMENT '核酸药物来源信息',
  `if_speculate` tinyint(1) DEFAULT NULL COMMENT '是否含有推测信息, 比如利用 WHO INN 推测药物结构',
  `profile` json DEFAULT NULL COMMENT '描述',
  `is_pathway` tinyint(1) DEFAULT NULL COMMENT '是否 pathway',
  `special_review` json DEFAULT NULL COMMENT '特殊审评 List<String>',
  `disease_id` json DEFAULT NULL COMMENT '适应症ID List<String>',
  `active_org_master_entity_id` json DEFAULT NULL COMMENT '在研机构 List<String>',
  `global_highest_dev_status` varchar(32) DEFAULT NULL COMMENT '全球最高研发状态',
  `global_highest_dev_status_before_termination` varchar(32) DEFAULT NULL COMMENT '终止前全球最高研发状态',
  `highest_dev_status_cn` varchar(32) DEFAULT NULL COMMENT '中国最高研发状态',
  `highest_dev_status_before_termination_cn` varchar(32) DEFAULT NULL COMMENT '终止前中国最高研发状态',
  `first_approved_date` bigint(20) DEFAULT NULL COMMENT '首批时间',
  `first_approved_country` json DEFAULT NULL COMMENT '首批国家, List<String>',
  `first_approved_indication` json DEFAULT NULL COMMENT '首批适应症, List<String>',
  `research_disease` json DEFAULT NULL COMMENT '在研适应症, List<String>',
  `non_research_disease` json DEFAULT NULL COMMENT '非在研适应症, List<String>',
  `inactive_org_master_entity_id` json DEFAULT NULL COMMENT '非在研机构 ,List<String>',
  `therapeutic_area` json DEFAULT NULL COMMENT '治疗领域, List<String>',
  `approval_country` json DEFAULT NULL COMMENT '获批国家, List<String>',
  `research_country` json DEFAULT NULL COMMENT '研发国家, List<String>',
  `rnk` int(11) DEFAULT NULL COMMENT '同靶点药物排名',
  `disease_phase` json DEFAULT NULL COMMENT '药物适应症 pahse, List<Map>',
  `adc_count` int(11) DEFAULT NULL COMMENT 'adc 药物被关联的次数',
  `target_extend_id` varchar(32) DEFAULT NULL COMMENT '多靶点表ID  生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `has_leading_org_involved` tinyint(1) DEFAULT NULL COMMENT '是否有头部企业参与',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间（数据库维护）',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间（数据库维护）',
  `data_status` varchar(10) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `original_drug_id` json DEFAULT NULL COMMENT '生物类似药',
  `created_by` varchar(255) DEFAULT NULL,
  `updated_by` varchar(255) DEFAULT NULL,
  `deal_related_org` json DEFAULT NULL COMMENT '交易涉及机构',
  `first_approved_date_cn` bigint(20) DEFAULT NULL COMMENT '中国首批时间',
  `moiety_target_id` json DEFAULT NULL COMMENT '抗体靶点ID',
  `payload_target_id` json DEFAULT NULL COMMENT '载荷靶点ID',
  `moiety_mechanism_action_id` json DEFAULT NULL COMMENT '抗体作用机制ID',
  `payload_mechanism_action_id` json DEFAULT NULL COMMENT '载荷作用机制D',
  `moiety_target_extend_id` varchar(32) DEFAULT NULL COMMENT '抗体靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  `payload_target_extend_id` varchar(32) DEFAULT NULL COMMENT '载荷靶点对应的多靶点ID 生成规则：多靶点表【items】集合正序排序后，通过UUID生成',
  PRIMARY KEY (`drug_id`) /*T![clustered_index] CLUSTERED */,
  UNIQUE KEY `docid` (`docid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='药物业务表'
示例数据：[{'drug_id': '0000717d1e7143dc94fd46c1755cd8e3', 'is_qidp': 'false', 'global_highest_dev_status': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'is_first_in_class': 'false', 'non_research_disease': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'originator_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]', 'created_ts': '1677735049000', 'drug_type': '["1151dbc710f64a85923dc05d4a5a0ba9"]', 'data_status': 'ACTIVE', 'drug_name': '[{"lang": "EN", "name": "JM023", "status": "ACTIVE"}]', 'research_country': '[{"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "c9e8fce7eb6b4bbd9cc66dc356017aab", "dev_status_time": {"time_trust_code": 7, "time_ts": 1669766400000}}]', 'created_by': 'data@patsnap.com', 'data_source': '10', 'updated_by': 'data@patsnap.com', 'dev_code': '[{"name": "AD20190509", "status": "ACTIVE"}]', 'is_pathway': 'false', 'disease_phase': '[{"disease_id": "25aa9dbd25714b36b8bcb9347d1b91d1", "highest_phase_cn": "c9e8fce7eb6b4bbd9cc66dc356017aab", "highest_phase_global": "c9e8fce7eb6b4bbd9cc66dc356017aab"}]', 'therapeutic_area': '["042cbe45c973477b957717ded29ef7b6"]', 'is_nme': 'false', 'updated_ts': '1735604387000', 'is_compound_medicine': 'false', 'docid': '36127', 'null_target_reason': 'UNDEFINED', 'highest_dev_status_cn': 'c9e8fce7eb6b4bbd9cc66dc356017aab', 'disease_id': '["25aa9dbd25714b36b8bcb9347d1b91d1"]', 'inactive_org_master_entity_id': '["da38a0196b9c470b09ba68c74f0e6d64"]'}, {'drug_id': '0000d4a23502459386f511f0dfdad0df', 'is_qidp': 'false', 'global_highest_dev_status': 'efd6215835394b07b046125e3175d3fe', 'is_first_in_class': 'false', 'first_approved_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be"]', 'drugbank_id': '["DB11606"]', 'non_research_disease': '["e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'originator_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'created_ts': '1633704418000', 'drug_type': '["4d2dcd3fc8b644db955f8cccefca280b"]', 'target_extend_id': '450cd6ab529c38d4b0ad05aaff0d5fd7', 'data_status': 'ACTIVE', 'first_approved_indication': '["07d4cf59dafc4a35840dbf53e136394a"]', 'drug_name': '[{"lang": "CN", "name": "舒索凝血素α", "source_info": [{"code": "国药准字SJ20240009", "normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "patsnap_id": "ea95955e04de20edd2a022ee3882a984", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"normalized_source_id": "c550fafe5544447091b21ca6c19f70f2", "source": "EMA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "スソクトコグ アルファ（遺伝子組換え）", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'mechanism_action_id': '["979b395f8c612b269b4c98663691de9d"]', 'generic_name': '[{"lang": "EN", "name": "Susoctocog alfa", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'research_country': '[{"country": "0dc5d896-7408-3c87-84c0-22e3d9b784be", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1414022400000}}, {"country": "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1708387200000}}, {"country": "9a18968a-f130-3a00-80b6-8b9e2eec4838", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "676de5ba-893a-36bb-8683-c93306aaf769", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1711411200000}}, {"country": "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1461888000000}}, {"country": "3d57c904-23bf-3ee0-9924-83496c75b8ee", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "52d1b118-b540-37ba-9cb2-f5aff686bb10", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1679270400000}}, {"country": "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "665d1d12-3d14-3e05-8459-014864489671", "dev_status": "efd6215835394b07b046125e3175d3fe", "dev_status_time": {"time_trust_code": 7, "time_ts": 1447200000000}}, {"country": "672807de-6d33-3706-a350-c97e6ed7735e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1620950400000}}, {"country": "cf11da47-6a9f-3948-9d29-8a824f805638", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7cb930b-9b67-3639-97cd-dab2ce82da83", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "0e7802a9-bad3-33a3-98ae-ff755c717809", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "dc266be9-66b5-3c85-af35-ef210568f738", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "1b05c4d2-8156-3854-9898-c71e0077e3c6", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "bf460c70-eac8-3426-baa3-7e6c72bc0889", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "15d3c741-f4c4-35d8-9273-339b5972916e", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "9b148c0c-8ce5-32a0-bab7-f7fa6c1cb312", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "4ac42935-7005-3e0d-a0e9-698b15e3986b", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "a7693298-e9f4-3dfb-ad3e-fda6b7e59658", "dev_status": "a5183ad464de4fe9bb9a3583425ae4a2", "dev_status_time": {"time_trust_code": 7, "time_ts": 1634688000000}}, {"country": "2f753928-f426-3cc1-9ea6-8c25f6a4d330", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1444348800000}}, {"country": "bb1d5b11-d9f8-31c4-872c-65a9fad8d193", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "6d64b019-4f80-31e9-b248-297aa588c950", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "00d7d9ab-3d75-3fa9-9849-2f715d69f010", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "c2da2aca-0b0b-3198-aaf9-d35fe9c83766", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}, {"country": "027bd29d-069d-3fdf-aa1a-be891fbaae92", "dev_status": "4d95bf5fb0c340fbb38cda626c1c9c60", "dev_status_time": {"time_trust_code": 7, "time_ts": 1413504000000}}]', 'wiki_link': 'https://en.wikipedia.org/wiki/Susoctocog_alfa', 'created_by': 'data@patsnap.com', 'data_source': '10', 'rnk': '9', 'kegg_id': '["D10831"]', 'biological_drug_source': '5763f27b05ac432dafde44df27a4ec76', 'express_system': '6ce3b90730044258a81ab5a3e9288495', 'updated_by': 'youjia@patsnap.com', 'research_disease': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a"]', 'atc_code': '["7319cbc33cb0475a94bf687ed6634978"]', 'dev_code': '[{"name": "BAX 802", "status": "ACTIVE"}, {"name": "BAX-801", "status": "ACTIVE"}, {"name": "BAX-802", "status": "ACTIVE"}, {"name": "BAX801", "status": "ACTIVE"}, {"name": "OBI-1", "status": "ACTIVE"}, {"name": "SHP672", "status": "ACTIVE"}, {"name": "TAK 672", "status": "ACTIVE"}]', 'trade_name': '[{"lang": "EN", "name": "Obizur", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "JP", "name": "オビザー", "source_info": [{"code": "30600AMX00123", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "92e2a35aadae20ae5d22528225a39aa2", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/400256_63494B2D1029_1_01"}], "status": "ACTIVE"}, {"lang": "CN", "name": "助因止", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "patsnap_id": "1c1403c1-b1e8-3014-96e8-1939c36cfecb", "patsnap_type": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "http://mp.weixin.qq.com/s?__biz=MzA5Njc0MTAxOQ==&mid=2650027443&idx=1&sn=71b7cef6c2070906937036501e33b9cc"}], "status": "ACTIVE"}, {"lang": "KR", "name": "오비주르주[서스옥토코그알파", "source_info": [{"code": "202300956", "normalized_source_id": "6f08ac4a5ca144f8b59de74187e41886", "source": "MFDS", "source_url": "https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202300956aupdateTs2024-06-10%2018:52:49.0b"}], "status": "ACTIVE"}]', 'active_org_master_entity_id': '["4099573c333dcbc48d8f398aee392060", "ad3caef0a55e98b5fc495d9921bf43e0", "b0b1d828ce0abb09b0567b191f02bb53", "f4bc92165e87f4758502c119ebc15574", "f6b3099a6af884bd6b51c208d8c47644", "3213232cf3774bc734def2420b679bb6"]', 'is_pathway': 'false', 'alias': '[{"lang": "EN", "name": "Antihemophilic Factor (Recombinant), Porcine Sequence", "source_info": [{"code": "BLA125512", "normalized_source_id": "f3bd4fd130ec4588971e9008b5010e32", "patsnap_id": "854204585a22558d8532e5de92e5d898", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "FDA_CBER"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor (recombinant) porcine sequence", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Antihemophilic factor porcine, B-domain truncated recombinant", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "PFVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine FVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Porcine recombinant factor VIII B-domain truncated", "source_info": [{"code": "DB11606", "normalized_source_id": "6bfddbfde33b4a4781436fc73d7bc9ab", "source": "DRUGBANK"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Recombinant porcine factor VIII", "status": "ACTIVE"}, {"lang": "EN", "name": "RpfVIII", "status": "ACTIVE"}, {"lang": "EN", "name": "Susoctocog alfa (INN)", "source_info": [{"code": "D10831", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}]', 'special_review': '["23d3523b7ece48ddacaddac53a66949d", "043a131d85994801b3617e822e7f87b3"]', 'disease_phase': '[{"disease_id": "71d86eb1f39c4e509b8da8fe4343bdd3", "highest_phase_before_ter_global": "9f31233bceb94d9796d3f3556f17ab13", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "e30a25b1033043c4adf00e944889533c", "highest_phase_before_ter_global": "f835774c48404593b64ef05369eb8eba", "highest_phase_global": "4d95bf5fb0c340fbb38cda626c1c9c60"}, {"disease_id": "07d4cf59dafc4a35840dbf53e136394a", "highest_phase_cn": "efd6215835394b07b046125e3175d3fe", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "d1e154571f0a46f8b15f8997f3031fd1", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}, {"disease_id": "18795373eb704b16936d51c793bbea01", "highest_phase_global": "efd6215835394b07b046125e3175d3fe"}]', 'therapeutic_area': '["c354b2ea74d349da99bef8388390c7d8", "5b1dfc2ca8564662860187aef864467d", "67034410be134e2bbb5b0930595b5e75"]', 'is_nme': 'false', 'updated_ts': '1737614304000', 'is_compound_medicine': 'false', 'docid': '4178', 'first_approved_date_cn': '1708387200000', 'target_id': '["3f888f3938b34a4ca124145b3fa1e229"]', 'highest_dev_status_cn': 'efd6215835394b07b046125e3175d3fe', 'approval_country': '["0dc5d896-7408-3c87-84c0-22e3d9b784be", "5a365096-b2a6-31cb-acdf-1de1f5ab3abe", "9a18968a-f130-3a00-80b6-8b9e2eec4838", "676de5ba-893a-36bb-8683-c93306aaf769", "ecc919b1-c2b7-3740-bfa7-7cda77176d07", "3d57c904-23bf-3ee0-9924-83496c75b8ee", "52d1b118-b540-37ba-9cb2-f5aff686bb10", "e0cd4ddd-6722-341f-bdc4-b3df494a7d1b", "665d1d12-3d14-3e05-8459-014864489671"]', 'disease_id': '["d1e154571f0a46f8b15f8997f3031fd1", "18795373eb704b16936d51c793bbea01", "07d4cf59dafc4a35840dbf53e136394a", "e30a25b1033043c4adf00e944889533c", "71d86eb1f39c4e509b8da8fe4343bdd3"]', 'if_speculate': 'false', 'inactive_org_master_entity_id': '["5f37443814e905dbfb0117df404c3aea"]', 'first_approved_date': '1414022400000'}]
2025-02-27 00:02:07,111 - utils.logger - INFO - Structure for table ads_phs_pub_name retrieved: 表名：ads_phs_pub_name
表结构：CREATE TABLE `ads_phs_pub_name` (
  `data_id` varchar(36) NOT NULL COMMENT 'ID',
  `data_type` varchar(32) NOT NULL COMMENT '数据类型，如 DRUG/TARGET/DISEASE',
  `name_type` varchar(64) NOT NULL COMMENT '名称类型',
  `name` varchar(604) NOT NULL COMMENT '名称',
  `lang` varchar(32) NOT NULL COMMENT '名称语言',
  `match_type` json DEFAULT NULL COMMENT 'NOR 时需匹配的字段',
  `source_info` json DEFAULT NULL COMMENT '来源信息 List<String>',
  `created_ts` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_ts` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `status` varchar(6) NOT NULL COMMENT 'dmp数据状态 DELETE/ACTIVE',
  `data_status` varchar(6) NOT NULL COMMENT '数据状态 DELETE/ACTIVE',
  `created_by` varchar(255) DEFAULT NULL COMMENT '创建人',
  `updated_by` varchar(255) DEFAULT NULL COMMENT '更新人',
  `version` int(11) DEFAULT NULL COMMENT '数据版本',
  `uuid` varchar(32) NOT NULL COMMENT '根据联合主键生成UUID',
  PRIMARY KEY (`data_id`,`data_type`,`name_type`,`name`,`lang`) /*T![clustered_index] CLUSTERED */,
  KEY `idx_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='PHS名称明细表'
示例数据：[{'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'c30e89f559c238d69a83a889903eb161', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formyl Furan', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}, {'updated_ts': '1688471520000', 'name_type': 'ALIAS', 'created_by': 'data@patsnap.com', 'uuid': 'eeffaee758fe3ae3929d321806deb8df', 'data_id': '0000247052fe46ddb0bae08436f92539', 'created_ts': '1688471518000', 'data_type': 'BIOMARKER', 'name': '2 Formylofuran', 'updated_by': 'data@patsnap.com', 'lang': 'EN', 'data_status': 'ACTIVE', 'source_info': '[{"code": "MDB00029831", "normalized_source_id": "bb63200cf7e34f49aa95a77f868d3a85", "source": "MarkerDB"}]', 'status': 'ACTIVE'}]
2025-02-27 00:02:21,665 - utils.logger - INFO - Generated SQL Response: content='{\n  "sql": "SELECT drug_id, drug_name, generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3;"\n}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 494, 'prompt_tokens': 9036, 'total_tokens': 9530, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': None}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'o3-mini-2025-01-31', 'system_fingerprint': 'fp_42bfad963b', 'finish_reason': 'stop', 'logprobs': None} id='run-903ac3b8-a0d5-4102-afa3-e86831327082-0' usage_metadata={'input_tokens': 9036, 'output_tokens': 494, 'total_tokens': 9530, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-02-27 00:02:21,667 - utils.logger - INFO - Generated SQL: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'sql': 'SELECT drug_id, drug_name, generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3;'}
2025-02-27 00:02:21,668 - utils.logger - INFO - Generating SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-27 00:02:21,670 - utils.logger - INFO - Executing SQL beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-27 00:02:21,671 - utils.logger - INFO - execute_sql input: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'tables': ['ads_phs_drug', 'ads_phs_pub_name'], 'sql': 'SELECT drug_id, drug_name, generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3;'}
2025-02-27 00:02:21,672 - utils.logger - INFO - Executing query: SELECT drug_id, drug_name, generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3;
2025-02-27 00:02:22,892 - utils.logger - INFO - SQL执行结果: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': 'SELECT drug_id, drug_name, generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3;', 'query_result': [{'drug_name': '[{"lang": "CN", "name": "复必泰", "source_info": [{"normalized_source_id": "cf0e26a9d83243f2a3855089fd5c4870", "source": "Company pipeline", "source_url": "https://yimiao.fosunpharma.com/news/detail/3?up=index"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Comirnaty-COVID-19 mRNA vaccine", "source_info": [{"normalized_source_id": "6ede8d4125e04e5f89f14e1cc3428f82", "source": "WEB", "source_url": "https://www.yalemedicine.org/news/covid-19-vaccine-comparison"}], "status": "ACTIVE"}, {"lang": "JP", "name": "トジナメラン", "source_info": [{"code": "30400AMX00015", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "d854805e8228850d402dd22ae84e3244", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11"}], "status": "ACTIVE"}]', 'drug_id': '19a9ef8ac9a741b0af4248b32326034a', 'generic_name': '[{"lang": "EN", "name": "COMIRNATY Original/Omicron", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Famtozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Riltozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "贝舒地尔", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil Mesilate", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02"}], "status": "ACTIVE"}, {"lang": "JP", "name": "ベルモスジルメシル酸塩", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision"}], "status": "ACTIVE"}]', 'drug_id': '0826acdaa31c473480a705191150f6f5', 'generic_name': '[{"lang": "EN", "name": "Belumosudil", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "10.1002/cpdd.1082", "normalized_source_id": "3a35cdb7-0f33-4417-a43d-5456963ef5a1", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Clin Pharmacol Drug Dev", "source_url": "http://dx.doi.org/10.1002/cpdd.1082"}, {"code": "35230741", "normalized_source_id": "e7f29b256e9c46c19d4acbc643430038", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Pubmed", "source_url": "https://pubmed.ncbi.nlm.nih.gov/35230741/"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil (USAN)", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}, {"lang": "EN", "name": "RHOLISTIQ", "source_info": [{"normalized_source_id": "d960dac41dfe49609b6b380987cae0d9", "source": "TGA", "source_url": "https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "盐酸普鲁卡因", "source_info": [{"normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Procaine Hydrochloride", "source_info": [{"normalized_source_id": "713ce6480d33457e84ba18159638cafb", "source": "FDA_CDER"}, {"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカイン塩酸塩", "source_info": [{"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'drug_id': '39140fe8d67b4bc0a1ccc0dff48a4586', 'generic_name': '[{"lang": "EN", "name": "Procanine", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "procaine", "source_info": [{"code": "4Z8Y51M438", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカニン", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]'}]}
2025-02-27 00:02:22,893 - utils.logger - INFO - Executing SQL end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-27 00:02:22,895 - utils.logger - INFO - Summarizing SQL result beginning>>>>>>>>>>>>>>>>>>>>>>>>
2025-02-27 00:02:22,896 - utils.logger - INFO - summarize_sql_result input: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': 'SELECT drug_id, drug_name, generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3;', 'query_result': [{'drug_name': '[{"lang": "CN", "name": "复必泰", "source_info": [{"normalized_source_id": "cf0e26a9d83243f2a3855089fd5c4870", "source": "Company pipeline", "source_url": "https://yimiao.fosunpharma.com/news/detail/3?up=index"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Comirnaty-COVID-19 mRNA vaccine", "source_info": [{"normalized_source_id": "6ede8d4125e04e5f89f14e1cc3428f82", "source": "WEB", "source_url": "https://www.yalemedicine.org/news/covid-19-vaccine-comparison"}], "status": "ACTIVE"}, {"lang": "JP", "name": "トジナメラン", "source_info": [{"code": "30400AMX00015", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "d854805e8228850d402dd22ae84e3244", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11"}], "status": "ACTIVE"}]', 'drug_id': '19a9ef8ac9a741b0af4248b32326034a', 'generic_name': '[{"lang": "EN", "name": "COMIRNATY Original/Omicron", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Famtozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Tozinameran/Riltozinameran", "source_info": [{"normalized_source_id": "112b7931c4484b7986ffbe3983494961", "source": "WHO", "source_url": "https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "贝舒地尔", "source_info": [{"normalized_source_id": "0b0db149ab6e4a978c1c4e83498d6d5a", "source": "NEWS", "source_url": "https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil Mesilate", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02"}], "status": "ACTIVE"}, {"lang": "JP", "name": "ベルモスジルメシル酸塩", "source_info": [{"code": "30600AMX00126000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "8982588d454de324833e0a82a2255285", "source": "PMDA", "source_url": "https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision"}], "status": "ACTIVE"}]', 'drug_id': '0826acdaa31c473480a705191150f6f5', 'generic_name': '[{"lang": "EN", "name": "Belumosudil", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}, {"code": "10.1002/cpdd.1082", "normalized_source_id": "3a35cdb7-0f33-4417-a43d-5456963ef5a1", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Clin Pharmacol Drug Dev", "source_url": "http://dx.doi.org/10.1002/cpdd.1082"}, {"code": "35230741", "normalized_source_id": "e7f29b256e9c46c19d4acbc643430038", "patsnap_id": "b31eecbe-99b5-463c-ab3b-bcce8e150d45", "patsnap_type": "f47efe2cbd0441bdb071fc24e8714d3e", "source": "Pubmed", "source_url": "https://pubmed.ncbi.nlm.nih.gov/35230741/"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Belumosudil (USAN)", "source_info": [{"code": "D11815", "normalized_source_id": "a07dbc9f94144f609a25c9d343a2ec5b", "source": "KEGG"}], "status": "ACTIVE"}, {"lang": "EN", "name": "RHOLISTIQ", "source_info": [{"normalized_source_id": "d960dac41dfe49609b6b380987cae0d9", "source": "TGA", "source_url": "https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd"}], "status": "ACTIVE"}]'}, {'drug_name': '[{"lang": "CN", "name": "盐酸普鲁卡因", "source_info": [{"normalized_source_id": "3f2dbc379c394cd7b1307649f4a49eae", "source": "NMPA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "Procaine Hydrochloride", "source_info": [{"normalized_source_id": "713ce6480d33457e84ba18159638cafb", "source": "FDA_CDER"}, {"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカイン塩酸塩", "source_info": [{"code": "22000AMX02403000", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "48d849a842e22d02ed98a558255052a9", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]', 'drug_id': '39140fe8d67b4bc0a1ccc0dff48a4586', 'generic_name': '[{"lang": "EN", "name": "Procanine", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}, {"lang": "EN", "name": "procaine", "source_info": [{"code": "4Z8Y51M438", "normalized_source_id": "a69257a1f6e645e29d7e433ddc094e1d", "source": "GSRS", "source_url": "https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460"}], "status": "ACTIVE"}, {"lang": "JP", "name": "プロカニン", "source_info": [{"code": "22000AMX00376", "normalized_source_id": "b5713ff9ea774e908282b147d30973d7", "patsnap_id": "52233898ed4a85002229ad238922a85d", "patsnap_type": "9bc3513c5909451980a59322d935419e", "source": "PMDA"}], "status": "ACTIVE"}]'}]}
2025-02-27 00:02:52,725 - utils.logger - INFO - Summarized SQL result: {'original_input': '帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名', 'sql': 'SELECT drug_id, drug_name, generic_name FROM ads_phs_drug ORDER BY JSON_LENGTH(generic_name) DESC LIMIT 3;', 'answer': '以下是整理后的结果，每条记录均展示了药品ID、药品名称（多语言）及其来源信息，以及通用名称信息：\n\n──────────────────────────────\n1. 药品ID: 19a9ef8ac9a741b0af4248b32326034a\n\n  • 药品名称:\n    1. CN – 复必泰\n       - 来源: Company pipeline\n       - 来源详情: normalized_source_id = cf0e26a9d83243f2a3855089fd5c4870\n       - 详情链接: https://yimiao.fosunpharma.com/news/detail/3?up=index\n    2. EN – Comirnaty-COVID-19 mRNA vaccine\n       - 来源: WEB\n       - 来源详情: normalized_source_id = 6ede8d4125e04e5f89f14e1cc3428f82\n       - 详情链接: https://www.yalemedicine.org/news/covid-19-vaccine-comparison\n    3. JP – トジナメラン\n       - 来源: PMDA\n       - 来源详情: code = 30400AMX00015; normalized_source_id = b5713ff9ea774e908282b147d30973d7; patsnap_id = d854805e8228850d402dd22ae84e3244; patsnap_type = 9bc3513c5909451980a59322d935419e\n       - 详情链接: https://www.pmda.go.jp/PmdaSearch/iyakuDetail/672212_631341DA2021_1_11\n\n  • 通用名称:\n    1. EN – COMIRNATY Original/Omicron\n       - 来源: WHO\n       - 来源详情: normalized_source_id = 112b7931c4484b7986ffbe3983494961\n       - 详情链接: https://extranet.who.int/prequal/vaccines/comirnaty-originalomicron#collapse52894\n    2. EN – COMIRNATY Original/Omicron BA.1(Tozinameran/Riltozinameran)\n       - 来源: WHO (同上)\n    3. EN – COMIRNATY Original/Omicron BA.4-5(Tozinameran/Famtozinameran)\n       - 来源: WHO (同上)\n    4. EN – Tozinameran/Famtozinameran\n       - 来源: WHO (同上)\n    5. EN – Tozinameran/Riltozinameran\n       - 来源: WHO (同上)\n\n──────────────────────────────\n2. 药品ID: 0826acdaa31c473480a705191150f6f5\n\n  • 药品名称:\n    1. CN – 贝舒地尔\n       - 来源: NEWS\n       - 来源详情: normalized_source_id = 0b0db149ab6e4a978c1c4e83498d6d5a\n       - 详情链接: https://www.cn-healthcare.com/articlewm/20211129/content-1290006.html\n    2. EN – Belumosudil Mesilate\n       - 来源: PMDA\n       - 来源详情: code = 30600AMX00126000; normalized_source_id = b5713ff9ea774e908282b147d30973d7; patsnap_id = 8982588d454de324833e0a82a2255285\n       - 详情链接: https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02\n    3. JP – ベルモスジルメシル酸塩\n       - 来源: PMDA\n       - 来源详情: 同上，并附有额外URL参数 (#HDR_DateOfPreparationOrRevision)\n       - 详情链接: https://www.pmda.go.jp/PmdaSearch/iyakuDetail/780009_39990E8F1026_1_02#HDR_DateOfPreparationOrRevision\n\n  • 通用名称:\n    1. EN – Belumosudil\n       - 来源信息:\n         a. 来自 KEGG: code 未指定, normalized_source_id = a07dbc9f94144f609a25c9d343a2ec5b\n         b. 来自 Clin Pharmacol Drug Dev: code = 10.1002/cpdd.1082; normalized_source_id = 3a35cdb7-0f33-4417-a43d-5456963ef5a1; patsnap_id = b31eecbe-99b5-463c-ab3b-bcce8e150d45; patsnap_type = f47efe2cbd0441bdb071fc24e8714d3e; 详情链接: http://dx.doi.org/10.1002/cpdd.1082\n         c. 来自 Pubmed: code = 35230741; normalized_source_id = e7f29b256e9c46c19d4acbc643430038; patsnap_id = b31eecbe-99b5-463c-ab3b-bcce8e150d45; patsnap_type = f47efe2cbd0441bdb071fc24e8714d3e; 详情链接: https://pubmed.ncbi.nlm.nih.gov/35230741/\n    2. EN – Belumosudil (USAN)\n       - 来源: KEGG (同前，normalized_source_id = a07dbc9f94144f609a25c9d343a2ec5b)\n    3. EN – RHOLISTIQ\n       - 来源: TGA\n       - 来源详情: normalized_source_id = d960dac41dfe49609b6b380987cae0d9\n       - 详情链接: https://www.tga.gov.au/resources/prescription-medicines-registrations/rholistiq-kadmon-oceania-pty-ltd\n\n──────────────────────────────\n3. 药品ID: 39140fe8d67b4bc0a1ccc0dff48a4586\n\n  • 药品名称:\n    1. CN – 盐酸普鲁卡因\n       - 来源: NMPA\n       - 来源详情: normalized_source_id = 3f2dbc379c394cd7b1307649f4a49eae\n    2. EN – Procaine Hydrochloride\n       - 来源信息:\n         a. 来自 FDA_CDER: normalized_source_id = 713ce6480d33457e84ba18159638cafb\n         b. 来自 PMDA: code = 22000AMX02403000; normalized_source_id = b5713ff9ea774e908282b147d30973d7; patsnap_id = 48d849a842e22d02ed98a558255052a9; patsnap_type = 9bc3513c5909451980a59322d935419e\n    3. JP – プロカイン塩酸塩\n       - 来源: PMDA\n       - 来源详情同上 (code = 22000AMX02403000 等)\n\n  • 通用名称:\n    1. EN – Procanine\n       - 来源: PMDA\n       - 来源详情: code = 22000AMX00376; normalized_source_id = b5713ff9ea774e908282b147d30973d7; patsnap_id = 52233898ed4a85002229ad238922a85d; patsnap_type = 9bc3513c5909451980a59322d935419e\n    2. EN – procaine\n       - 来源: GSRS\n       - 来源详情: code = 4Z8Y51M438; normalized_source_id = a69257a1f6e645e29d7e433ddc094e1d\n       - 详情链接: https://gsrs.ncats.nih.gov/ginas/app/ui/substances/1795d3e8-03f6-4d70-9ccd-35e34a047460\n    3. JP – プロカニン\n       - 来源: PMDA\n       - 来源详情同第1项 (code = 22000AMX00376 等)\n\n──────────────────────────────\n\n以上整理了每条记录中药品名称与通用名称的多语言版本，并附上各自的来源信息及详情链接（如有）。这样可以更直观地查看各药品的多语言表示及其数据来源。'}
2025-02-27 00:02:52,726 - utils.logger - INFO - Summarizing SQL result end>>>>>>>>>>>>>>>>>>>>>>>>


2025-02-27 00:02:52,781 - utils.logger - INFO - 更新QA对: 帮我找三条药物通用名比较多的药物，返回药物ID及药物名称及通用名
